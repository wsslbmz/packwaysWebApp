<div [@routerTransition]>
    <app-page-header [heading]="'Gestion des colis'" [icon]="'fa-table'"></app-page-header>
    <div class="row">
            <!-- &nbsp;&nbsp;&nbsp;&nbsp; <h3>Gestion de colis</h3> -->
        <div class="col col-xl-12 col-lg-12">
            <div class="card mb-3">
                <div class="card-header">
                        <div class="row">
                                
                                <div class="col-xl-12 text-xs-center">
                                        <div class="row">                                                
                                                <div class="col-xl-12 text-xs-center">                               
                                                    <div class="row">
                                                        <!-- <div *ngIf="isVisible" right class="col-xl-4 text-xs-center">
                                                            <button type="button" class="btn btn-primary" style="width: 100%;" (click)="openDechargeModal(content8)" title="Imprimer décharge. Maximum 6 par page.">Décharge (V2)</button>
                                                        </div> -->                                                                                                                                                                      
                                                        <div align="left" class="col-xl-1 text-xs-center">
                                                                        <div class="form-group" style="display: inline-block; vertical-align: middle;">
                                                                                <!-- <span class="custom-dropdown">
                                                                                        <select 
                                                                                        id="SelectElement" 
                                                                                        class="form-control dropdown-class"
                                                                                        [(ngModel)]="chooseView" (change)="onChangeDisplayedElement()">
                                                                                        <option [ngValue]="'none'" disabled hidden>Nombre d'éléments</option>
                                                                                        <option *ngFor="let num of displayedNumberList" [ngValue]="num">
                                                                                        {{num}}</option>
                                                                                        </select>
                                                                                </span> -->
                                                                                <label for="chooseView" style="display: inline-block; vertical-align: middle;"> <small class="form-text text-primary">Colis affichés:&nbsp;</small></label>
                                                                                <input type="text" class="form-control form-control-sm" style="display: inline-block; vertical-align: middle; width: 80%;" id="chooseView" [(ngModel)]="chooseView" name="chooseView" placeholder="Nombre des colis à affichés" (change)="setFilteredItems()">
                                                                        </div>                                                                                                                                
                                                        </div>
                                                        <div *ngIf="!isVisible" align="right" class="col-xl-1 text-xs-center">
                                                                <label for="file-upload" class="custom-file-upload btn-sm"><i class="fa fa-cloud-upload" title="Importer du fichier excel."></i></label>
                                                                <input id="file-upload" type="file" (change)="onFileChange($event, contentImport);" style="display: none;"/>                                                                                                                                                                                               
                                                        </div>
                                                        <div *ngIf="!isVisible" align="right" class="col-xl-1 text-xs-center">
                                                                <label for="file-download" class="custom-file-upload btn-sm"><i class="fa fa-cloud-download" title="Exporter fichier excel." (click)="openmodelExport(contentexport);"></i></label>                                                                                                                                                                                              
                                                        </div>
                                                        <div align="right" class="col-xl-1 text-xs-center" *ngIf="isVisible">
                                                                <button type="button" class="btn btn-warning btn-sm" title="Générer le rapport de livraison." (click)="generateExcelReportForClient()"><i class="material-icons">library_books</i></button>
                                                        </div>
                                                        <div *ngIf="isVisible" align="right" class="col-xl-2 text-xs-center">
                                                                <button type="button" class="btn btn-primary btn-sm" title="Imprimer bon de livraison." (click)="openBordereauxModal(content6)">Bon de Ramassage</button>
                                                        </div>                                                        
                                                        <div align="right" class="col-xl-2 text-xs-center">
                                                                <button type="button" class="btn btn-rounded btn-sm" title="Imprimer manifeste." (click)="openDechargeModal(content6)">Bon de livraison</button>
                                                        </div>
                                                        <div align="right" class="col-xl-1 text-xs-center">
                                                            <button type="button" class="btn btn-warning btn-sm" title="Ajouter un nouveau clois." (click)="openAddModal(content3)"><i class="fa fa-plus"></i></button>
                                                        </div> 
                                                        <div *ngIf="isVisible" align="right" class="col-xl-1 text-xs-center">
                                                                <button type="button" class="btn btn-warning btn-sm" title="Action d'envoi sms." (click)="open(contentMsgAction)"><i class="material-icons">
                                                                        sms</i>
                                                                </button>
                                                        </div>  
                                                        <div class="col-xl-1 text-xs-center" *ngIf="isVisible">                                                              
                                                                        <div class="dropdown">
                                                                                        <button class="btn btn-default dropdown-toggle btn-sm" type="button" data-toggle="dropdown" title="Actions Financière">
                                                                                        <span class="caret"></span><i class="material-icons"> local_atm </i> </button>
                                                                                        <ul class="dropdown-menu">
                                                                                                <li (click)="getvalue('Colturer/Payer',contentupdateCloture)">Colturer/Payer</li>
                                                                                                <li (click)="getvalue('En caisse',contentupdateargentRL)">En caisse</li>
                                                                                                <li (click)="getvalue('En cours de payement',contentupdatePayment)">En cours de paiement et retour</li>                                                                                              
                                                                                        </ul>
                                                                                        
                                                                        </div>
                                                        </div>   
                                                        <div class="col-xl-1 text-xs-center" *ngIf="isVisible">                                                              
                                                                        <div class="dropdown">
                                                                                <button class="btn btn-default dropdown-toggle btn-sm" type="button" data-toggle="dropdown" title="Actions de l'etat">
                                                                                <span class="caret"></span><i class="material-icons"> offline_pin </i> </button>
                                                                                        <ul class="dropdown-menu">
                                                                                                <li (click)="getvalueEtat('Livreur en chemin',contentupdateStatus)">Livreur en chemin</li>
                                                                                                <li (click)="getvalueEtat('Chez Livreur',contentupdateStatus)">Chez Livreur</li>     
                                                                                        </ul>           
                                                                        </div>
                                                        </div> 
                                                        <div class="col-xl-2 text-xs-center" *ngIf="isVisible">
                                                                        <!--  <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" title="Actions Financière">
                                                                                          <span class="caret"></span><i class="material-icons"> local_atm </i></button>
                                                                          <select class="form-control" id="actionA" [(ngModel)]="actionA" name="actionA" (change)="affectDriver(contentupdatedriverAFF)" title="Action d'affectation">
                                                                                  <ng-container *ngFor="let driver of Listdriver" class="form-control">                                        
                                                                                          <option [ngValue]="driver" *ngIf="driver.accountActive" >
                                                                                                  {{driver.nameDriver}}  {{driver.surnameDriver}}
                                                                                          </option>
                                                                                  </ng-container>  
                                                                          </select>  -->
                                                                        <ng2-completer [inputClass]="'form-control form-control-inline'" [datasource]="Listdriverauto" [minSearchLength]="0" [textSearching]="'Cherche...'" 
                                                                                [textNoResults]="'Pas trouvé.'" [placeholder]="'Entrer le livreur'" id="actionA" name="actionA" [(ngModel)]="actionA2"
                                                                                (selected)="getSelectedDriver($event);affectDriver(contentupdatedriverAFF)">
                                                                        </ng2-completer>
                                                                  
                                                        </div>                                                
                                                </div>   
                                                        <div class="row" *ngIf="!isVisible" hidden>
                                                                <div align="right" class="col-xl-12 text-xs-center" align="right">
                                                                        <button type="button" class="btn btn-rounded" style="width: 15%;" title="Imprimer manifeste." (click)="openDechargeModal(content6)">Manifeste</button>
                                                                </div>  
                                                        </div>
                                                </div>
                                        </div>
                                    
                                </div>
                        </div>                                               
                                                                                        
                </div>

                <div class="card-header">
                        <div class="row">                                
                                <div class="col-xl-3 text-xs-center">
                                        <fieldset class="scheduler-border-1">
                                                <legend class="scheduler-border-1">Date début</legend>
                                                <input id="startDateFilter" type="date" class="form-control" name="startDateFilter" [(ngModel)]="startDateFilter">
                                        </fieldset>
                                </div>
                                <div class="col-xl-3 text-xs-center">
                                        <fieldset class="scheduler-border-1">
                                                <legend class="scheduler-border-1">Date fin</legend>
                                                <input id="endDateFilter" type="date" class="form-control" name="endDateFilter" [(ngModel)]="endDateFilter">
                                        </fieldset>
                                </div>
                                <div class="col-xl-2 text-xs-center" *ngIf="isVisible">
                                        <fieldset class="scheduler-border-1">
                                                <legend class="scheduler-border-1">Client</legend>
                                               <!-- <input type="text" class="form-control" id="clientFilter" [(ngModel)]="clientFilter" name="clientFilter" placeholder="Client"> -->
                                                <!-- <select class="form-control" id="clientFilter" [(ngModel)]="clientFilter" name="clientFilter" (change)="getSelectedUser($event.target.value)"> 
                                                                <option [ngValue]="'tous'">---</option>                                              
                                                        <ng-container *ngFor="let user of Listuser" class="form-control">                                        
                                                                <option [ngValue]="user.idUser" *ngIf="user.accountActive">
                                                                        {{user.nameUser}} {{user.surnameUser}}
                                                                </option>
                                                                
                                                        </ng-container>
                                                </select> -->                                                
                                                <ng2-completer [inputClass]="'form-control form-control-inline'" [datasource]="Listuserauto" [minSearchLength]="0" [textSearching]="'Cherche...'" 
                                                        [textNoResults]="'Pas trouvé.'" [placeholder]="'Entrer le client'" id="clientFilter" name="clientFilter" [(ngModel)]="clientFilter" 
                                                        (selected)="getSelectedUser($event)">
                                                </ng2-completer>                                                
                                        </fieldset>
                                </div>
                                <div class="col-xl-2 text-xs-center" *ngIf="isVisible">
                                        <fieldset class="scheduler-border-1">
                                                <legend class="scheduler-border-1">Livreur</legend>
                                              <!--   <select class="form-control" id="driverFilter" [(ngModel)]="driverFilter" name="driverFilter">  
                                                                <option [ngValue]="'tous'">---</option>                                             
                                                        <ng-container *ngFor="let driver of Listdriver" class="form-control">                                        
                                                                <option [ngValue]="driver.idDriver" *ngIf="driver.accountActive">
                                                                        {{driver.nameDriver}} {{driver.surnameDriver}}
                                                                </option>
                                                        </ng-container>
                                                </select>
                                                 -->
                                                <ng2-completer [inputClass]="'form-control form-control-inline'" [datasource]="Listdriverauto" [minSearchLength]="0" [textSearching]="'Cherche...'" 
                                                        [textNoResults]="'Pas trouvé.'" [placeholder]="'Entrer le livreur'" id="driverFilter" name="driverFilter" [(ngModel)]="driverFilter" 
                                                        (selected)="getSelectedDriver($event)">
                                                </ng2-completer>
                                        </fieldset>
                                </div>
                                <div class="col-xl-2 text-xs-center">
                                        <fieldset class="scheduler-border-1">
                                                <legend class="scheduler-border-1">Status de colis</legend>
                                                <select class="form-control" id="stateFilter" [(ngModel)]="stateFilter" name="stateFilter">
                                                        <option [ngValue]="'tous'">Tous</option>                                                
                                                        <ng-container *ngFor="let status of statusList" class="form-control">                                        
                                                                <option [ngValue]="status" >
                                                                        {{status}}
                                                                </option>
                                                        </ng-container>
                                                </select>
                                        </fieldset>
                                </div>
                                                                                                                                                                                                                                                                                                       
                        </div>
                        <div class="row">
                                                <div class="col-xl-3 text-xs-center">
                                                        <fieldset class="scheduler-border-1">
                                                                <legend class="scheduler-border-1">Retard</legend>
                                                                <select class="form-control" id="enRetardFilter" [(ngModel)]="enRetardFilter" name="enRetardFilter">
                                                                        <option [ngValue]="'sansMsg'" *ngIf="isVisible" >Sans Msg</option> 
                                                                        <option [ngValue]="'retard'">Colis en retard</option>
                                                                        <option [ngValue]="'nonrecolté'" *ngIf="isVisible" >
                                                                                Retard d'encaissement</option>
                                                                        <option [ngValue]="'nonpayé'" *ngIf="isVisible" >Retard de payement</option>
                                                                        <option [ngValue]="'tous'">Tous</option>                                                
                                                                </select>
                                                        </fieldset>
                                                </div> 
                                                <div class="col-xl-3 text-xs-center">
                                                        <fieldset class="scheduler-border-1">
                                                                <legend class="scheduler-border-1">Status de paiement</legend>
                                                                <select class="form-control" id="payementStatusFilter" [(ngModel)]="payementStatusFilter" name="payementStatusFilter">
                                                                        <option [ngValue]="'En cours'">En cours de paiement et retour</option>
                                                                        <option [ngValue]="'Payee'">Payé</option> 
                                                                        <option [ngValue]="'Retournee'">Retourné</option>
                                                                        <option [ngValue]="'Récolté'">Récolté</option>
                                                                        <option [ngValue]="'Récolté/RetourBC'">Récolté et Retour BC</option>
                                                                        <option [ngValue]="'tous'">Tous</option>   
                                                                </select>
                                                        </fieldset>
                                                </div> 
                                                <div class="col-xl-3 text-xs-center">
                                                        <!-- <form class="form-inline my-2 my-lg-0">
                                                                <input class="form-control mr-sm-2" type="text" id="myInput" placeholder="Chercher" [(ngModel)]="searchTerm" [ngModelOptions]="{standalone: true}" (select)="setFilteredItems()">
                                                        </form> -->
                                                        <fieldset class="scheduler-border-1">
                                                                <legend class="scheduler-border-1">Recherche Global</legend>
                                                                <form class="form-inline mr-auto">
                                                                        <input class="form-control" type="text" id="myInput" [(ngModel)]="searchTerm" [ngModelOptions]="{standalone: true}" placeholder="Chercher" aria-label="Search" width="100%">
                                                                        <button class="btn btn-mdb-color btn-rounded btn-sm my-0 ml-sm-2" (click)="setFilteredItems()" type="submit" hidden><i class="fa fa-search"></i></button> 
                                                                </form>
                                                        </fieldset>
                                                </div>
                                                <div class="col-xl-3 text-xs-center">
                                                        <fieldset class="scheduler-border-1">
                                                                <legend class="scheduler-border-1">Action</legend>
                                                                <button type="button" align="right" style="width: 100%" class="btn btn-blue" (click)="setFilteredItems()" type="submit" >Chercher</button>
                                                        </fieldset>
                                                </div>
                                                
                                       
                        </div>
                </div>

                <!-- <div ng-controller="MyCtrl">
                        <ul>
                                <li *ngFor="let item of scans">{{trip.refTrip}}</li>
                        </ul>
                </div> -->
                <ngx-spinner class="myspinner" bdColor = "rgba(255,255,255,0.8)" size = "large" color = "#000000" type = "ball-square-clockwise-spin"></ngx-spinner>
                <div class="card-body table-responsive">                                                     
                        <div class="row">
                                <div class="col-xl-4 text-xs-center"><input type="checkbox" [(ngModel)]="selectedAll" (change)="selectAll($event);"/> Sélectionner tout</div>
                                
                                <div class="col-xl-4 text-xs-center" hidden>
                                        <a [hidden]="prvBtnDisabled" (click)="getFiltredTripsOnPrevious()" class="previous">&laquo; Précédent</a>
                                        <a [hidden]="nxtBtnDisabled" (click)="getFiltredTripsOnNext()" class="next">Suivant &raquo;</a>
                                </div>
                                <div *ngIf="isVisible" align="right" class="col-xl-8 text-xs-right">
                                        <button type="button" class="btn btn-primary" title="Scan list." (click)="open(contentscandochette)">Scan QR-Code</button> 
                                </div>
                                <small class="form-text text-primary" style="font-size:12px !important;">Nombre des colis selectionnées:  <b>{{NBchecked}}</b></small>                                
                        </div>
                        <table class="table" [mfData]="items" #mf="mfDataTable" [mfRowsOnPage]="chooseView" id="myTable">
                                <thead>
                                        <tr>
                                                <th style="width:1%">#</th>
                                                <th style="width:2%">REF</th>
                                                <th style="width:10%">Source</th>
                                                <th style="width:10%">Déstination</th>
                                                <th style="width:10%"><mfDefaultSorter by="statusTrip">Status</mfDefaultSorter></th>
                                                <th style="width:6%"><mfDefaultSorter by="userTrip.nameUser">Expéditeur</mfDefaultSorter></th>
                                                <th style="width:10%">Postulation</th>
                                                <th style="width:2%">Frais</th>
                                                <th style="width:3%">Prix</th>
                                                <th style="width:4%">E.financier</th>
                                                <th *ngIf="isVisible" style="width:3%">Tentatives</th>
                                                <th style="width:15%">Actions</th>
                                        </tr>
                                </thead>
                                
                                <tbody>
                                        <tr *ngFor="let trip of mf.data" id="trip-row-{{trip.idTrip}}" >
                                                <!-- <td scope="row"><input class="form-check-input" type="checkbox" id="checked-trip-{{trip.idTrip}}" value="option1" (click)="checkedTrip(trip)"></td> -->
                                                <td scope="row"><input class="form-check-input" type="checkbox" id="checked-trip-{{trip.idTrip}}" value="option1" [(ngModel)]="trip.selected" (change)="onCheckboxChange(trip,$event)"></td>
                                                <!-- <td *ngIf="showStatusTrip(trip) === true && showStatusTrip2(trip) === true" [ngStyle]="{'color': varcolor}">{{trip.refTrip}}</td>
                                                <td *ngIf="showStatusTrip(trip) === true && showStatusTrip2(trip) === false" style="background-color: rgb(216, 23, 23)">{{trip.refTrip}}</td> -->
                                                <td *ngIf="isVisible && trip.statusTrip === 'cherche un livreur'" style="background-color: rgb(255, 255, 255)">{{trip.refTrip}}</td>                                                
                                                <td *ngIf="isVisible && trip.statusTrip === 'Livreur en chemin' && showStatusTrip(trip) === true" style="background-color: rgb(201, 99, 40)">{{trip.refTrip}}</td>
                                                <td *ngIf="isVisible && trip.statusTrip === 'Livreur en chemin' && showStatusTrip(trip) === false" style="background-color: rgb(255, 255, 255)">{{trip.refTrip}}</td>
                                                <td *ngIf="isVisible && trip.statusTrip === 'Chez Livreur' && showStatusTrip(trip) === true" style="background-color: rgb(216, 23, 23)">{{trip.refTrip}}</td>
                                                <td *ngIf="isVisible && trip.statusTrip === 'Chez Livreur' && showStatusTrip(trip) === false" style="background-color: rgb(255, 255, 255)">{{trip.refTrip}}</td>
                                                <td *ngIf="isVisible && trip.statusTrip === 'livraison en cours' && showStatusTrip(trip) === true" style="background-color: rgb(57, 132, 194)">{{trip.refTrip}}</td>
                                                <td *ngIf="isVisible && trip.statusTrip === 'livraison en cours' && showStatusTrip(trip) === false" style="background-color: rgb(255, 255, 255)">{{trip.refTrip}}</td>
                                                <td *ngIf="isVisible && trip.statusTrip === 'Livree'" style="background-color: rgb(255, 255, 255)">{{trip.refTrip}}</td>
                                                <td *ngIf="isVisible && trip.statusTrip === 'Retour'" style="background-color: rgb(255, 255, 255)">{{trip.refTrip}}</td>
                                                <td *ngIf="isVisible && trip.statusTrip === 'Annulée'" style="background-color: rgb(255, 255, 255)">{{trip.refTrip}}</td>
                                                <td *ngIf="isVisible && trip.statusTrip === 'Retournee'" style="background-color: rgb(255, 255, 255)">{{trip.refTrip}}</td>
                                                <td *ngIf="!isVisible">{{trip.refTrip}}</td>
                                                <td>{{trip.sourceTrip.cityAdr}}</td>
                                                <td>{{trip.destTrip.cityAdr}}</td>
                                                <td>{{trip.statusTrip}}</td>
                                                <td>{{ trip.userTrip.nameUser }}</td>
                                                <td>{{changeDateFormat(trip.createdday)}}</td>
                                                <td *ngIf="trip.modeTrip === 'Payer par expéditeur'" style="background-color: rgb(127, 231, 41)">{{ trip.costTrip }}</td>
                                                <td *ngIf="trip.modeTrip !== 'Payer par expéditeur'" >{{ trip.costTrip }}</td>
                                                <td>{{ trip.packageTrip.valPackage }}</td>
                                                <td>{{ showFinancialStatus(trip) }}</td>
                                                <td *ngIf="isVisible">{{ trip.nbTentative }}</td>
                                                <td>
                                                        <button type="button" class="mat-mini-fab" title="Modifier" > <!-- (click)="open(content)" -->
                                                                <i class="material-icons" (click)="editTrip(content, trip)"> create </i>
                                                        </button>
                                                        <button type="button" class="mat-mini-fab" title="Dupliquer" (click)="open(content1)" hidden>
                                                                <i class="material-icons"> file_copy </i>
                                                        </button>
                                                        <button type="button" class="mat-mini-fab" title="Supprimer">
                                                                <i class="material-icons" (click)="openBlModal2(contentdeleteTrip,trip)" > delete </i>
                                                        </button>                                                        
                                                        <button type="button" class="mat-mini-fab" title="Détails">
                                                                <i class="material-icons" (click)="infoTrip(content2, trip)"> open_in_new </i>
                                                        </button>
                                                        <button type="button" class="mat-mini-fab" title="Envoyer le bon de livraison">
                                                                <i class="material-icons" (click)="openBlModal(content7, trip)"> call_made </i>
                                                        </button>
                                                        <button *ngIf="isVisible" type="button" class="mat-mini-fab" title="Envoyer un message" (click)="openMsgModal(contentMsg, trip)">
                                                                <i class="material-icons"> present_to_all </i>
                                                        </button>
                                                        <button type="button" class="mat-mini-fab" title="Ajuster la position de déstinataire" (click)="openLinkPos(trip.idTrip)">
                                                                <i class="material-icons"> my_location </i>
                                                        </button> 
                                                        <button type="button" class="mat-mini-fab" title="Générer le bon de livraison" (click)="openBlModal2(contentBl, trip)">
                                                                <i class="material-icons"> file_download </i>
                                                        </button>  
                                                        <button *ngIf="isVisible" type="button" class="mat-mini-fab" title="argentRecolte" (click)="openBlModal2(contentupdateargentR, trip)">
                                                                <i class="material-icons"> local_atm </i>
                                                        </button> 
                                                        <button *ngIf="isVisible" type="button" class="mat-mini-fab" title="Historique">
                                                                <i class="material-icons" (click)="infoTrip(contentHostorique, trip)"> list </i>
                                                        </button>                                                    
                                                </td>

                                        </tr>
                                </tbody>
                                <tfoot>
                                        <tr>
                                                <td align="right" colspan="8">
                                                        <mfBootstrapPaginator [rowsOnPageSet]="[]"></mfBootstrapPaginator>
                                                        <a [hidden]="prvBtnDisabled" (click)="getFiltredTripsOnPrevious()" class="previous">&laquo; Précédent</a>
                                                        <a [hidden]="nxtBtnDisabled" (click)="getFiltredTripsOnNext()" class="next">Suivant &raquo;</a>
                                                        <!-- <a [hidden]="!prvBtnDisabled" (click)="getTripsOnPrevious(pDate)" class="previous">&laquo; Précédent</a>
                                                        <a [hidden]="!nxtBtnDisabled" (click)="getTripsOnNext(nDate)" class="next">Suivant &raquo;</a> -->
                                                </td>
                                        </tr>
                                </tfoot>
                        </table>

                              <!-- <div class="example-header">                                
                                <mat-form-field>
                                  <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
                                </mat-form-field>
                              </div>
                              
                              <div class="example-container mat-elevation-z8">                                
                                <mat-table [dataSource]="dataSource" matSort>
                              
                                
                                  <ng-container matColumnDef="refTrip">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header> ID </mat-header-cell>
                                    <mat-cell *matCellDef="let row"> {{row.refTrip}} </mat-cell>
                                  </ng-container>
                              
                              
                                  <ng-container matColumnDef="costTrip">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header> Progress </mat-header-cell>
                                    <mat-cell *matCellDef="let row"> {{row.costTrip}} </mat-cell>
                                  </ng-container>
                              
                                  
                                  <ng-container matColumnDef="statusTrip">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header> Name </mat-header-cell>
                                    <mat-cell *matCellDef="let row"> {{row.statusTrip}} </mat-cell>
                                  </ng-container>                                                               
                              
                                  <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                                  <mat-row *matRowDef="let row; columns: displayedColumns;">
                                  </mat-row>
                                </mat-table>                                 
                                <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
                              </div> -->

                    <!-- <table class="table">
                        <thead>
                        <tr>
                            <th style="width:1%">#</th>                            
                            <th style="width:5%">REF</th>
                            <th style="width:10%">Adresse Source</th>
                            <th style="width:10%">Adresse déstination</th>
                            <th style="width:10%">Status</th>
                            <th style="width:10%">Expéditeur</th>
                            <th style="width:10%">Date de création</th>
                            <th style="width:5%">Frais de livraison</th>
                            <th style="width:5%">Prix</th>
                            <th style="width:10%">Actions</th>
                        </tr>
                        </thead>
                        <tbody>
                                <tr *ngFor="let trip of items.reverse()">
                                        <td scope="row"><input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1"></td>
                                        <td>{{ trip.refTrip }}</td>
                                        <td>{{ trip.sourceTrip.cityAdr }}</td>
                                        <td>{{ trip.destTrip.cityAdr }}</td>
                                        <td>{{ trip.statusTrip }}</td>
                                        <td>{{ trip.userTrip.nameUser }}</td>
                                        <td>{{ trip.createdday }}</td>
                                        <td>{{ trip.costTrip }}</td>
                                        <td>{{ trip.packageTrip.valPackage }}</td>
                                        <td>
                                                <button type="button" class="mat-mini-fab" (click)="open(content)">
                                                  <i class="material-icons"> create </i>
                                                </button>
                                                <button type="button" class="mat-mini-fab" (click)="open(content1)">
                                                    <i class="material-icons"> file_copy </i>
                                                </button>
                                                <button type="button" class="mat-mini-fab">
                                                    <i class="material-icons"> delete </i>
                                                </button>
                                                <button type="button" class="mat-mini-fab" (click)="open(content2)">
                                                    <i class="material-icons"> open_in_new </i>
                                                </button>
                                        </td>
                                </tr>                        
                        </tbody>
                    </table>  --> 

                </div>
            </div>
        </div>        
    </div>
</div>  

<ng-template #content let-c="close" let-c="dismiss">
    <div class="modal-header">
        <h4 class="modal-title">Edit de trip:&nbsp; {{objTrip.refTrip}}</h4>
            <button type="button" class="close" aria-label="Close" (click)="c('Cross click')">
                <span aria-hidden="true">&times;</span>
            </button>
    </div>
        <div class="modal-body">
            <div class="row">
                <div class="col-xl-6 text-xs-center">                        
                        <div class="form-group">
                                <label for="inputSourceTrip">Adresse source</label> &nbsp;<!-- <button type="button" id="btnShowHide1" class="btn btn-warning btn-sm" (click)="EditAddressSource()">Editer</button> -->
                              <!-- <input *ngIf="!disableInputValTrip" type="text" class="form-control" id="inputSourceTrip" [(ngModel)]="objTrip.sourceTrip.cityAdr" name="inputSourceTrip" disabled>
                               <input *ngIf="disableInputValTrip"  type="text" class="form-control" id="inputSourceTrip" [(ngModel)]="objTrip.sourceTrip.cityAdr" name="inputSourceTrip" disabled>     -->
                                <input type="text" class="form-control" id="inputSourceTrip" [(ngModel)]="objTrip.sourceTrip.cityAdr" name="inputSourceTrip" disabled>                      
                        </div>
                        <!--
                        <div class="col-xl-12 text-xs-center" id="newAdrSource">
                                <fieldset class="scheduler-border-1">
                                   <legend class="scheduler-border-1">Nouvelle adresse source</legend>
                                   <div class="control-group">
                                        <div class="row">
                                                <div class="col-xl-12 text-xs-center">
                                                        <input type="text" class="form-control" id="cityAdresseSourceUp" name="cityAdresseSourceUp" [(ngModel)]="cityAdresseSourceUp" placeholder="Adresse" autocomplete="on">                                                
                                                </div>
                                        </div>
                                        
                                        <div class="row">
                                                <div class="col-xl-12 text-xs-center">
                                                        <input type="text" class="form-control" pattern="[0-9]*" maxlength="4" required name="zipCodeUp" id="zipCodeUp" placeholder="Tapez ici le code postal" [(ngModel)]="zipCodeUp" (keyup)="resetDelegInputUp()">
                                                </div>
                                        </div>
                                        <div class="row">
                                                <div class="col-xl-12 text-xs-center">
                                                        <select id="gouvernoratUp" name="gouvernoratUp" class="form-control" [(ngModel)]="gouvernoratUp" (change)="getDelegFromGovOnUp(); onKeyAdrUp();">
                                                                        <option value="">-- Gouvernorat --</option>
                                                        </select>
                                                </div>
                                        </div>
                                        <div class="row" hidden>
                                                <div class="col-xl-12 text-xs-center">
                                                        <select id="delegationUp" name="delegationUp" class="form-control" [(ngModel)]="delegationUp" (change)="getAdrFromIndex()">
                                                                        <option value="">-- Delegation --</option>
                                                        </select>
                                                </div>
                                        </div>
                                        <div class="row">
                                                <div class="col-xl-12 text-xs-center">
                                                        <ng2-completer [inputClass]="'form-control form-control-inline'" [datasource]="tunisiaData" [minSearchLength]="0" [textSearching]="'Cherche...'" 
                                                                [textNoResults]="'Pas trouvé.'" [placeholder]="'Entrer la ville'" id="delegationUp" name="delegationUp" [(ngModel)]="delegationUp" 
                                                                (selected)="getAdrFromIndex()" (keyup)="onKeyAdrUp()">
                                                        </ng2-completer>
                                                </div>
                                        </div>
                                        
                                        <input type="text" class="form-control" id="latGlobalSourceUp" name="latGlobalSourceUp" [(ngModel)]="latGlobalSourceUp" hidden>
                                        <input type="text" class="form-control" id="lngGlobalSourceUp" name="lngGlobalSourceUp" [(ngModel)]="lngGlobalSourceUp" hidden>
                                        <input type="text" class="form-control" id="cityGlobalSourceUp" name="cityGlobalSourceUp" [(ngModel)]="cityGlobalSourceUp" hidden>
                                        
                                        <input type="text" class="form-control" id="latAdrUp1" name="latAdrUp1" [(ngModel)]="latAdrUp1" hidden>
                                        <input type="text" class="form-control" id="lngAdrUp1" name="lngAdrUp1" [(ngModel)]="lngAdrUp1" hidden>
                                        <input type="text" class="form-control" id="cityAdrUp1" name="cityAdrUp1" [(ngModel)]="cityAdrUp1" hidden>
                                   </div>
                                </fieldset>
                        </div> -->
                        <div class="form-group">
                                <label for="inputDestTrip">Adresse déstination</label> &nbsp; <button type="button" id="btnShowHide" class="btn btn-warning btn-sm" (click)="EditAddressDest()">Editer</button>
                                <input type="text" class="form-control" id="inputDestTrip" [(ngModel)]="objTrip.destTrip.cityAdr" name="inputDestTrip" disabled>                
                        </div>
                        <div class="col-xl-12 text-xs-center" id="newAdrDest">
                                <fieldset class="scheduler-border-1">
                                   <legend class="scheduler-border-1">Nouvelle adresse de déstinataire</legend>
                                   <div class="control-group">
                                        <div class="row">
                                                <div class="col-xl-12 text-xs-center">
                                                        <input type="text" class="form-control" id="cityAdresseDestUp" name="cityAdresseDestUp" [(ngModel)]="cityAdresseDestUp" placeholder="Adresse" autocomplete="on">                                                
                                                </div>
                                        </div>
                                        
                                        <div class="row">
                                                <div class="col-xl-12 text-xs-center">
                                                        <input type="text" class="form-control" pattern="[0-9]*" maxlength="4" required name="zipCodeUp" id="zipCodeUp" placeholder="Tapez ici le code postal" [(ngModel)]="zipCodeUp" (keyup)="resetDelegInputUp()">
                                                </div>
                                        </div>
                                        <div class="row">
                                                <div class="col-xl-12 text-xs-center">
                                                        <select id="gouvernoratUp" name="gouvernoratUp" class="form-control" [(ngModel)]="gouvernoratUp" (change)="getDelegFromGovOnUp(); onKeyAdrUp();">
                                                                        <option value="">-- Gouvernorat --</option>
                                                        </select>
                                                </div>
                                        </div>
                                        <div class="row" hidden>
                                                <div class="col-xl-12 text-xs-center">
                                                        <select id="delegationUp" name="delegationUp" class="form-control" [(ngModel)]="delegationUp" (change)="getAdrFromIndex()">
                                                                        <option value="">-- Delegation --</option>
                                                        </select>
                                                </div>
                                        </div>
                                        <div class="row">
                                                <div class="col-xl-12 text-xs-center">
                                                        <ng2-completer [inputClass]="'form-control form-control-inline'" [datasource]="tunisiaData" [minSearchLength]="0" [textSearching]="'Cherche...'" 
                                                                [textNoResults]="'Pas trouvé.'" [placeholder]="'Entrer la ville'" id="delegationUp" name="delegationUp" [(ngModel)]="delegationUp" 
                                                                (selected)="getAdrFromIndex()" (keyup)="onKeyAdrUp()">
                                                        </ng2-completer>
                                                </div>
                                        </div>
                                        
                                        <input type="text" class="form-control" id="latGlobalDestUp" name="latGlobalDestUp" [(ngModel)]="latGlobalDestUp" hidden>
                                        <input type="text" class="form-control" id="lngGlobalDestUp" name="lngGlobalDestUp" [(ngModel)]="lngGlobalDestUp" hidden>
                                        <input type="text" class="form-control" id="cityGlobalDestUp" name="cityGlobalDestUp" [(ngModel)]="cityGlobalDestUp" hidden>
                                        
                                        <input type="text" class="form-control" id="latAdrUp" name="latAdrUp" [(ngModel)]="latAdrUp" hidden>
                                        <input type="text" class="form-control" id="lngAdrUp" name="lngAdrUp" [(ngModel)]="lngAdrUp" hidden>
                                        <input type="text" class="form-control" id="cityAdrUp" name="cityAdrUp" [(ngModel)]="cityAdrUp" hidden>
                                   </div>
                                </fieldset>
                        </div>
                        <div class="form-group">
                                <label for="inputContactDestTrip">Contact de déstinataire</label>
                                <input *ngIf="!disableInputValTrip"  type="text" class="form-control" id="inputContactDestTrip" [(ngModel)]="objTrip.destTrip.contactAdr" name="inputContactDestTrip">
                                <input *ngIf="disableInputValTrip" type="text" class="form-control" id="inputContactDestTrip" [(ngModel)]="objTrip.destTrip.contactAdr" name="inputContactDestTrip" disabled>                
                        </div>
                        <div class="form-group">
                                <label for="inputTelDestTrip">Téléphone de déstinataire</label>
                                <div class="row">
                                        <div class="col-xl-6">                                                        
                                                <input *ngIf="!disableInputValTrip" type="text" maxlength="8" class="form-control" id="inputTelDestTrip" [(ngModel)]="objTrip.destTrip.mobileAdr" name="inputTelDestTrip">
                                                <input *ngIf="disableInputValTrip" type="text" maxlength="8" class="form-control" id="inputTelDestTrip" [(ngModel)]="objTrip.destTrip.mobileAdr" name="inputTelDestTrip" disabled>           
                                        </div>
                                        <div class="col-xl-6">               
                                                <input *ngIf="!disableInputValTrip" type="text" maxlength="8" class="form-control" id="inputTelDestTrip2" [(ngModel)]="objTrip.destTrip.mobileAdr2" name="inputTelDestTrip2" >
                                                <input *ngIf="disableInputValTrip" type="text" maxlength="8" class="form-control" id="inputTelDestTrip2" [(ngModel)]="objTrip.destTrip.mobileAdr2" name="inputTelDestTrip2" disabled>                          
                                        </div>
                                </div>
                        </div>
                        <div class="form-group">
                                <label for="inputCodeExp">Code éxpéditeur</label>
                                <input *ngIf="isVisible && !disableInputValTrip" type="text" class="form-control" id="inputCodeExp" [(ngModel)]="objTrip.codeExp" name="inputCodeExp">
                                <input *ngIf="isVisible && disableInputValTrip" type="text" class="form-control" id="inputCodeExp" [(ngModel)]="objTrip.codeExp" name="inputCodeExp" disabled>
                                <input *ngIf="!isVisible" type="text" class="form-control" [(ngModel)]="objTrip.codeExp" [attr.disabled]="true">
                        </div>
                        <div class="form-group">
                                <label for="inputCodeDest">Code déstinataire</label>
                                <input *ngIf="isVisible && !disableInputValTrip" type="text" class="form-control" id="inputCodeDest" [(ngModel)]="objTrip.codeTrip" name="inputCodeDest">
                                <input *ngIf="isVisible && disableInputValTrip" type="text" class="form-control" id="inputCodeDest" [(ngModel)]="objTrip.codeTrip" name="inputCodeDest"disabled>                
                                <input *ngIf="!isVisible" type="text" class="form-control" [(ngModel)]="objTrip.codeTrip" [attr.disabled]="true">
                        </div>
                        <div class="form-group">
                                <label for="inputDelais">Délais</label>
                                <input *ngIf="isVisible && !disableInputValTrip" type="text" class="form-control" id="inputDelais" [(ngModel)]="objTrip.timingTrip" name="inputDelais">
                                <input *ngIf="isVisible && disableInputValTrip" type="text" class="form-control" id="inputDelais" [(ngModel)]="objTrip.timingTrip" name="inputDelais"disabled>                
                                <input *ngIf="!isVisible" type="text" class="form-control" [(ngModel)]="objTrip.timingTrip" [attr.disabled]="true">
                        </div>                        
                        <div class="form-group">
                                <label for="inputStatusAc">Status actuelle</label>
                                <input *ngIf="!isVisible" type="text" class="form-control" [(ngModel)]="objTrip.statusTrip" [attr.disabled]="true">
                                <input *ngIf="isVisible && disableInputValTrip" type="text" class="form-control" [(ngModel)]="objTrip.statusTrip" [attr.disabled]="true">
                                <!-- <select *ngIf="isVisible" class="form-control" id="inputStatusAc" [(ngModel)]="objTrip.statusTrip" name="inputStatusAc">
                                        <option>{{objTrip.statusTrip}}</option>
                                        <option *ngIf="objTrip.statusTrip!='livraison en cours'">livraison en cours</option>
                                        <option *ngIf="objTrip.statusTrip!='Annulée'">Annulée</option>
                                        <option *ngIf="objTrip.statusTrip!='Livreur en chemin'">Livreur en chemin</option>
                                        <option *ngIf="objTrip.statusTrip!='cherche un Livreur'">cherche un Livreur</option>
                                        <option *ngIf="objTrip.statusTrip!='Livree'">Livree</option>
                                        <option *ngIf="objTrip.statusTrip!='Retour'">Retour</option>
                                        <option *ngIf="objTrip.statusTrip!='Chez Livreur'">Chez Livreur</option>
                                </select>  -->
                                <select *ngIf="isVisible && !disableInputValTrip" class="form-control" id="inputStatusAc" [(ngModel)]="objTrip.statusTrip" name="inputStatusAc">
                                        <option value={{objTrip.statusTrip}}>{{objTrip.statusTrip}}</option>
                                        <ng-container *ngFor="let status of statusList" class="form-control">                                        
                                                <option *ngIf="status!=objTrip.statusTrip" [ngValue]="status" >
                                                        {{status}}
                                                </option>
                                        </ng-container>
                                </select>                                           
                        </div>
                        <div class="form-group" *ngIf="objTrip.prevStatusTrip  || isVisible">
                                <label for="inputStatusPr">Status précédente</label>
                                <input *ngIf="!isVisible" type="text" class="form-control" [(ngModel)]="objTrip.prevStatusTrip" [attr.disabled]="true"> 
                                <input *ngIf="isVisible && disableInputValTrip" type="text" class="form-control" [(ngModel)]="objTrip.prevStatusTrip" [attr.disabled]="true">                                
                                <select *ngIf="isVisible && !disableInputValTrip" class="form-control" id="inputStatusPr" [(ngModel)]="objTrip.prevStatusTrip" name="inputStatusPr">
                                        <option value={{objTrip.prevStatusTrip}}>{{objTrip.prevStatusTrip}}</option>
                                        <ng-container *ngFor="let status of statusList" class="form-control">                                        
                                                <option *ngIf="status!=objTrip.prevStatusTrip" [ngValue]="status" >
                                                        {{status}}
                                                </option>
                                        </ng-container>
                                </select>                
                        </div>                         
                </div>
                <div class="col-xl-6 text-xs-center">
                        <div class="form-group">
                                <label for="inputDateCr">Date de création</label>
                                <input *ngIf="isVisible  && !disableInputValTrip" type="text" class="form-control" id="inputDateCr" [(ngModel)]="objTrip.createdday" name="inputDateCr"> 
                                <input *ngIf="isVisible  && disableInputValTrip" type="text" class="form-control" [(ngModel)]="objTrip.createdday" [attr.disabled]="true">               
                                <input *ngIf="!isVisible" type="text" class="form-control" [(ngModel)]="objTrip.createdday" [attr.disabled]="true">
                        </div>
                        <div class="form-group" *ngIf="objTrip.affectedday || isVisible">
                                <label for="inputDateAf">Date d'affectation</label>
                                <input *ngIf="isVisible && !disableInputValTrip" type="text" class="form-control" id="inputDateAf" [(ngModel)]="objTrip.affectedday" name="inputDateAf">
                                <input *ngIf="isVisible && disableInputValTrip" type="text" class="form-control" id="inputDateAf" [(ngModel)]="objTrip.affectedday" name="inputDateAf" disabled>                
                                <input *ngIf="!isVisible" type="text" class="form-control" [(ngModel)]="objTrip.affectedday" [attr.disabled]="true">
                        </div>
                        <div class="form-group" *ngIf="objTrip.getedday || isVisible">
                                <label for="inputDateRec">Date de récupération</label>
                                <input *ngIf="isVisible && !disableInputValTrip" type="text" class="form-control" id="inputDateRec" [(ngModel)]="objTrip.getedday" name="inputDateRec">
                                <input *ngIf="isVisible && disableInputValTrip" type="text" class="form-control" id="inputDateRec" [(ngModel)]="objTrip.getedday" name="inputDateRec" disabled>                
                                <input *ngIf="!isVisible" type="text" class="form-control" [(ngModel)]="objTrip.getedday"[attr.disabled]="true">
                        </div>
                        <div class="form-group" *ngIf="objTrip.startdelday || isVisible">
                                <label for="inputDateStartLiv">Date début de livraison</label>
                                <input *ngIf="isVisible && !disableInputValTrip" type="text" class="form-control" id="inputDateStartLiv" [(ngModel)]="objTrip.startdelday" name="inputDateStartLiv">
                                <input *ngIf="isVisible && disableInputValTrip" type="text" class="form-control" id="inputDateStartLiv" [(ngModel)]="objTrip.startdelday" name="inputDateStartLiv" disabled>                
                                <input *ngIf="!isVisible" type="text" class="form-control" [(ngModel)]="objTrip.startdelday" [attr.disabled]="true">
                        </div>
                        <div class="form-group" *ngIf="objTrip.livredday || isVisible">
                                <label for="inputDateEndLiv">Date fin de livraison</label>
                                <input *ngIf="isVisible && !disableInputValTrip" type="text" class="form-control" id="inputDateEndLiv" [(ngModel)]="objTrip.livredday" name="inputDateEndLiv">
                                <input *ngIf="isVisible && disableInputValTrip" type="text" class="form-control" id="inputDateEndLiv" [(ngModel)]="objTrip.livredday" name="inputDateEndLiv" disabled>                
                                <input *ngIf="!isVisible" type="text" class="form-control" [(ngModel)]="objTrip.livredday" [attr.disabled]="true">
                        </div>
                        <div class="form-group" *ngIf="objTrip.prereturnedday || isVisible">
                                <label for="inputReturnedday">Date de retour</label>
                                <input *ngIf="isVisible && !disableInputValTrip" type="text" class="form-control" id="inputReturnedday" [(ngModel)]="objTrip.prereturnedday" name="inputReturnedday"> 
                                <input *ngIf="isVisible && disableInputValTrip" type="text" class="form-control" id="inputReturnedday" [(ngModel)]="objTrip.prereturnedday" name="inputReturnedday" disabled>               
                                <input *ngIf="!isVisible" type="text" class="form-control" [(ngModel)]="objTrip.prereturnedday" [attr.disabled]="true">
                        </div>
                        <div class="form-group" *ngIf="objTrip.costTrip || isVisible">
                                <label for="inputCostTrip">Coût de livraison</label>
                                <input *ngIf="isVisible && !disableInputValTrip" type="text" class="form-control" id="inputCostTrip" [(ngModel)]="objTrip.costTrip" name="inputCostTrip">  
                                <input *ngIf="isVisible && disableInputValTrip" type="text" class="form-control" id="inputCostTrip" [(ngModel)]="objTrip.costTrip" name="inputCostTrip" [attr.disabled]="true">              
                                <input *ngIf="!isVisible" type="text" class="form-control" [(ngModel)]="objTrip.costTrip" [attr.disabled]="true">
                        </div> 
                        <div class="form-group">
                                <label for="inputValTrip">Valeur de colis</label>
                                <input *ngIf="!disableInputValTrip" type="text" class="form-control" id="inputValTrip" [(ngModel)]="objTrip.packageTrip.valPackage" name="inputValTrip">
				<input *ngIf="disableInputValTrip" type="text" class="form-control" id="inputValTrip" [(ngModel)]="objTrip.packageTrip.valPackage" name="inputValTrip" [attr.disabled]="true">                                                								
                        </div>
                        <div class="form-group">
                                <label for="inputDescpTrip">Description</label>
                                <input *ngIf="!disableInputValTrip" type="text" class="form-control" id="inputDescpTrip" [(ngModel)]="objTrip.descriptionTrip" name="inputDescpTrip">
                                <input *ngIf="disableInputValTrip" type="text" class="form-control" id="inputDescpTrip" [(ngModel)]="objTrip.descriptionTrip" name="inputDescpTrip" disabled>                                                
                        </div>         
                        <div class="form-group" *ngIf="isVisible && !disableInputValTrip">
                                <label for="inputSelectDr">Selectionner un Livreur:</label>
                                <!-- <select class="form-control" name="inputSelectDr" [(ngModel)]="driver">                                  
                                  <option *ngFor="let drive of Listdriver"  [ngValue]="drive">
                                        {{drive.nameDriver}}
                                  </option>     
                                </select> 
                                <select class="form-control" id="inputSelectDr" name="inputSelectDr" [(ngModel)]="objTrip.driverTrip">                                        
                                        <option *ngIf="objTrip.driverTrip != null" value={{objTrip.driverTrip}}>{{objTrip.driverTrip.nameDriver}}</option>
                                        <ng-container *ngFor="let drive of Listdriver" class="form-control">                                        
                                                <option *ngIf="drive!=objTrip.driverTrip" [ngValue]="drive" >
                                                        {{drive.nameDriver}} {{drive.surnameDriver}}
                                                </option>
                                        </ng-container>
                                </select>   -->
                                <ng2-completer [inputClass]="'form-control form-control-inline'" [datasource]="Listdriverauto" [minSearchLength]="0" [textSearching]="'Cherche...'" 
                                        [textNoResults]="'Pas trouvé.'" id="driverFilter" name="driverFilter" [(ngModel)]="ngdriverTrip" 
                                        (selected)="getSelectedDriver($event)">
                                </ng2-completer>             
                        </div>                                       
                </div>
            </div>                        
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-danger" (click)="c('Close click')">Fermer</button>
            <button type="button" class="btn btn-primary" (click)="updatetrip();c('Cross click')" >Sauvegarder</button>
        </div>
</ng-template>

<ng-template #content1 let-c="close" let-d="dismiss">
        <div class="modal-header">
            <h4 class="modal-title">Duplicate</h4>
                <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                    <span aria-hidden="true">&times;</span>
                </button>
        </div>
        <div class="modal-body">
                <div class="row">
                    <div class="col-xl-6 text-xs-center">                        
                            <div class="form-group">
                                    <label for="inputCodeExp">Code éxpéditeur</label>
                                    <input type="text" class="form-control" id="inputCodeExp">                
                            </div>
                            <div class="form-group">
                                    <label for="inputCodeDest">Code déstinataire</label>
                                    <input type="text" class="form-control" id="inputCodeDest">                
                            </div>
                            <div class="form-group">
                                    <label for="inputDelais">Délais</label>
                                    <input type="text" class="form-control" id="inputDelais">                
                            </div>                        
                            <div class="form-group">
                                    <label for="inputStatusAc">Status actuelle</label>
                                    <input type="text" class="form-control" id="inputStatusAc">                
                            </div>
                            <div class="form-group">
                                    <label for="inputStatusPr">Status précédente</label>
                                    <input type="text" class="form-control" id="inputStatusPr">                
                            </div>                         
                    </div>
                    <div class="col-xl-6 text-xs-center">
                            <div class="form-group">
                                    <label for="inputDateCr">Date de création</label>
                                    <input type="text" class="form-control" id="inputDateCr">                
                            </div>
                            <div class="form-group">
                                    <label for="inputDateAf">Date d'affectation</label>
                                    <input type="text" class="form-control" id="inputDateAf">                
                            </div>
                            <div class="form-group">
                                    <label for="inputDateRec">Date de récupération</label>
                                    <input type="text" class="form-control" id="inputDateRec">                
                            </div>
                            <div class="form-group">
                                    <label for="inputDateStartLiv">Date début de livraison</label>
                                    <input type="text" class="form-control" id="inputDateStartLiv">                
                            </div>
                            <div class="form-group">
                                    <label for="inputDateEndLiv">Date fin de livraison</label>
                                    <input type="text" class="form-control" id="inputDateEndLiv">                
                            </div>                                                 
                    </div>
                </div>                        
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" (click)="c('Close click')">Close</button>
                <button type="button" class="btn btn-primary" >Sauvegarder</button>
            </div>
</ng-template>


<ng-template #content2 let-c="close" let-d="dismiss">
        <div class="modal-header">
            <h4 class="modal-title">Détails de trip:&nbsp; {{objTrip.refTrip}} </h4>
                <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                    <span aria-hidden="true">&times;</span>
                </button>
        </div>
        <div class="modal-body">
                <div class="row">
                        <div class="col-xl-4 text-xs-center"  *ngIf="objTrip.codeExp">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border text-center"><h6>Code éxpéditeur</h6></legend>
                                        <div class="control-group">                                
                                                <label class="text-center font-weight-light">{{objTrip.codeExp}}</label>                                                                                                           
                                        </div>
                                </fieldset>
                        </div>
                        <div class="col-xl-4 text-xs-center" *ngIf="objTrip.codeTrip">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Code déstinataire</h6></legend>
                                        <div class="control-group">                                
                                                <label  center class="font-weight-light text-center">{{objTrip.codeTrip}}</label>                                                                                                           
                                        </div>
                                </fieldset>
                        </div>
                        <div class="col-xl-4 text-xs-center" *ngIf="objTrip.userTrip.nameUser && objTrip.userTrip.mobileUser">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Expéditeur</h6></legend>
                                        <div class="control-group">                                
                                                <label center class="font-weight-light">{{objTrip.userTrip.nameUser}}&nbsp;-&nbsp;{{objTrip.userTrip.mobileUser}}</label>                                                                                                           
                                        </div>
                                </fieldset>
                        </div>  

                        <div class="col-xl-4 text-xs-center" *ngIf="objTrip.destTrip.contactAdr && objTrip.destTrip.mobileAdr">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Déstinateur</h6></legend>
                                        <div class="control-group">                                
                                                <label  center class="font-weight-light">{{objTrip.destTrip.contactAdr}}&nbsp;-&nbsp;{{objTrip.destTrip.mobileAdr}}&nbsp;-&nbsp;{{objTrip.destTrip.mobileAdr2}}</label>                                                                                                           
                                        </div>
                                </fieldset>
                        </div>
                        <div class="col-xl-4 text-xs-center">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Conducteur</h6></legend>
                                        <div class="control-group">                                
                                                <label center class="font-weight-light" *ngIf="objTrip.driverTrip !== null">{{objTrip.driverTrip.nameDriver}}&nbsp;-&nbsp;{{objTrip.driverTrip.mobileDriver}}</label>
                                                <label align ="center" class="font-weight-light" *ngIf="objTrip.driverTrip === null">---</label>                                                                                                           
                                        </div>
                                </fieldset>
                        </div>
                        <div class="col-xl-4 text-xs-center" *ngIf="objTrip.timingTrip">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Délais</h6></legend>
                                        <div class="control-group">                                
                                                <label center class="font-weight-light">{{objTrip.timingTrip}}</label>                                                                                                           
                                        </div>
                                </fieldset>
                        </div> 

                        <div class="col-xl-4 text-xs-center" *ngIf="objTrip.statusTrip">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Status actuelle</h6></legend>
                                        <div class="control-group">                                
                                                <label  class="font-weight-light">{{objTrip.statusTrip}}</label>                                                                                                           
                                        </div>
                                </fieldset>
                        </div>
                        <div class="col-xl-4 text-xs-center" *ngIf="objTrip.prevStatusTrip">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Status précédente</h6></legend>
                                        <div class="control-group">                                
                                                <label  class="font-weight-light">{{objTrip.prevStatusTrip}}</label>                                                                                                           
                                        </div>
                                </fieldset>
                        </div>
                        <div class="col-xl-4 text-xs-center" *ngIf="objTrip.costTrip">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Coût de livraison</h6></legend>
                                        <div class="control-group">                                
                                                <label  class="font-weight-light">{{objTrip.costTrip}}</label>                                                                                                           
                                        </div>
                                </fieldset>
                        </div>
                        <div class="col-xl-4 text-xs-center" *ngIf="objTrip.packageTrip.valPackage">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Valeur de colis</h6></legend>
                                        <div class="control-group">                                
                                                <label  class="font-weight-light">{{objTrip.packageTrip.valPackage}}</label>                                                                                                           
                                        </div>
                                </fieldset>
                        </div> 
                
                        <div class="col-xl-4 text-xs-center" *ngIf="objTrip.createdday">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Date de postulation</h6></legend>
                                        <div class="control-group">                                
                                                <label  class="font-weight-light">{{changeDateFormat(objTrip.createdday)}}</label>                                                                                                           
                                        </div>
                                </fieldset>
                        </div>
                        <div class="col-xl-4 text-xs-center" *ngIf="objTrip.affectedday">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Date d'affectation</h6></legend>
                                        <div class="control-group">                                
                                                <label  class="font-weight-light">{{changeDateFormat(objTrip.affectedday)}}</label>                                                                                                           
                                        </div>
                                </fieldset>
                        </div>
                        <div class="col-xl-4 text-xs-center" *ngIf="objTrip.getedday">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Date de ramassage</h6></legend>
                                        <div class="control-group">                                
                                                <label  class="font-weight-light">{{changeDateFormat(objTrip.getedday)}}</label>                                                                                                           
                                        </div>
                                </fieldset>
                        </div> 
                
                        <div class="col-xl-4 text-xs-center" *ngIf="objTrip.startdelday">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Début de livraison</h6></legend>
                                        <div class="control-group">                                
                                                <label  class="font-weight-light">{{changeDateFormat(objTrip.startdelday)}}</label>                                                                                                           
                                        </div>
                                </fieldset>
                        </div>
                        <div class="col-xl-4 text-xs-center" *ngIf="objTrip.livredday">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Fin de livraison</h6></legend>
                                        <div class="control-group">                                
                                                <label  class="font-weight-light">{{changeDateFormat(objTrip.livredday)}}</label>                                                                                                           
                                        </div>
                                </fieldset>
                        </div>
                        <div class="col-xl-4 text-xs-center" *ngIf="objTrip.prereturnedday">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Date de retour</h6></legend>
                                        <div class="control-group">                                
                                                <label  class="font-weight-light">{{changeDateFormat(objTrip.prereturnedday)}}</label>                                                                                                           
                                        </div>
                                </fieldset>
                        </div> 
                
                        <div class="col-xl-4 text-xs-center" *ngIf="objTrip.descriptionTrip">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Description</h6></legend>
                                        <div class="control-group">                                
                                                <label  class="font-weight-light">{{objTrip.descriptionTrip}}</label>                                                                                                           
                                        </div>
                                </fieldset>
                        </div>
                        <div class="col-xl-4 text-xs-center" *ngIf="objTrip.lastupdateby!==null">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Dernière modification</h6></legend>
                                        <div class="control-group">                                
                                                <ul>                                                        
                                                        <li>{{objTrip.lastupdateby}}
                                                                <ul>
                                                                <li>{{objTrip.lastupdateday}}</li>
                                                                </ul>
                                                        </li>
                                                </ul>                                                                                                             
                                        </div>
                                </fieldset>
                        </div>
                        
                </div>
                <div class="row">
                        <div class="col-xl-4 text-xs-center" *ngIf="objTrip.msgTrip && objTrip.msgTrip.length > 0">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Messages</h6></legend>
                                        <div class="control-group">                                
                                                <ul *ngFor="let msg of objTrip.msgTrip">                                                        
                                                        <li>{{msg.contentMsg}}
                                                                <ul>
                                                                <li>{{msg.ownerMsg}}</li>
                                                                <li>{{changeDateFormat(msg.dateMsg)}}</li>
                                                                </ul>
                                                        </li>
                                                </ul>                                                                                                           
                                        </div>
                                </fieldset>
                        </div>     
                        <div class="col-xl-4 text-xs-center" *ngIf="objTrip.listdriverTrip && objTrip.listdriverTrip.length > 0">
                                        <fieldset class="scheduler-border">
                                                <legend class="scheduler-border"><h6>Historique des condicteurs</h6></legend>
                                                <div class="control-group">                                
                                                        <ul *ngFor="let driver of objTrip.listdriverTrip">                                                        
                                                                <li>{{driver.nameDriver}} {{driver.surnameDriver}}
                                                                        <ul>
                                                                        <li>{{driver.changedDateDriver}}</li>
                                                                        </ul>
                                                                </li>
                                                        </ul>                                                                                                           
                                                </div>
                                        </fieldset>
                                </div>                    
                        <div class="col-xl-4 text-xs-center" *ngIf="objTrip.image">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Image de colis</h6></legend>
                                        <div class="control-group">                                
                                                <img [src]="objTrip.image" style="width: 50%; height: 50%;"/>
                                        </div>
                                </fieldset>
                        </div>
                </div>                         
        </div>                
                                       
            
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" (click)="c('Close click')">Fermer</button>                
            </div>
</ng-template>

<ng-template #content3 let-c="close" let-d="dismiss" id="modalAdd">
        <div class="modal-header">
            <h4 class="modal-title">Ajouter un colis</h4>
                <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                    <span aria-hidden="true">&times;</span>
                </button>
        </div>
        <div class="modal-body">
                <div class="row">
                        <div class="col-xl-12 text-xs-center">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border">Expéditeur</legend>
                                        <div class="control-group">
                                                <div class="row">
                                                        <div class="col-xl-4 text-xs-center" *ngIf="isVisible" >
                                                                <div class="form-group">
                                                                        <small class="form-text text-primary" style="font-size:10px !important;">Choisissez un Client.</small>
                                                                        <!--
                                                                        <select id="inputExpAdresseName" class="form-control" (change)="onClickUserExp()" [(ngModel)]="selecteduserExp">
                                                                                <option *ngFor="let user of Listuser" [ngValue]="user">
                                                                                        {{ user.nameUser }} {{ user.surnameUser }}
                                                                                </option>
                                                                        </select>
                                                                        -->
                                                                        <ng2-completer [inputClass]="'form-control form-control-inline'" [datasource]="Listuserauto" [minSearchLength]="0" [textSearching]="'Cherche...'" 
                                                                                [textNoResults]="'Pas trouvé.'" [placeholder]="'Entrer le client'" id="selecteduserExp" name="selecteduserExp" [(ngModel)]="clientFilter" 
                                                                        (selected)="onClickUserExp($event)">
                                                </ng2-completer>
                                                                </div>                                                                                           
                                                         </div>
                                                        <div class="col-xl-4 text-xs-center">
                                                                <div class="form-group">
                                                                        <small class="form-text text-primary" style="font-size:10px !important;">Choisissez une adresse déjà enregistrée.</small>
                                                                        <select id="inputExpAdresseName" class="form-control" (change)="onClickAdrExp()" [(ngModel)]="selectedAdresseExp">
                                                                                <option *ngFor="let adresse of Adresses" [ngValue]="adresse">
                                                                                        {{ adresse.labelAdr }}
                                                                                </option>
                                                                        </select>
                                                                </div>                                                                                           
                                                                <div class="form-group"><input type="text" class="form-control" id="inputExpAdresseCity" name="inputExpAdresseCity" [(ngModel)]="cityAdresseExp" placeholder="Adresse" disabled></div>
                                                        </div>
                                                        <div class="col-xl-4 text-xs-center"> 
                                                                <h6><span>.</span></h6>
                                                                <div class="form-group"><input type="text" class="form-control" id="inputExpContact" name="inputExpContact" [(ngModel)]="contactAdresseExp" placeholder="Nom de contact" disabled></div>
                                                                <div class="form-group"><input type="text" class="form-control" id="inputExpTel" name="inputExpTel" [(ngModel)]="telContAdresseExp" placeholder="Téléphone de contact" disabled></div>
                                                        </div>
                                                </div>
                                        </div> 
                                </fieldset>
                        </div>
                </div>
                <div class="row">
                        <!-- <div class="col-xl-6 text-xs-center">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border">Expéditeur</legend>
                                        <div class="control-group">
                                                <div class="form-group">
                                                                <h6><span>Sélectionner l'adresse source:</span></h6>
                                                        <select id="inputExpAdresseName" class="form-control" (change)="onClickAdrExp()" [(ngModel)]="selectedAdresseExp">
                                                                <option *ngFor="let adresse of Adresses" [ngValue]="adresse">
                                                                        {{ adresse.labelAdr }}
                                                                </option>
                                                        </select>
                                                </div>                                                                                           
                                                <div class="form-group"><input type="text" class="form-control" id="inputExpAdresseCity" name="inputExpAdresseCity" [(ngModel)]="cityAdresseExp" placeholder="Adresse" disabled></div>                                                                
                                                <div class="form-group"><input type="text" class="form-control" id="inputExpContact" name="inputExpContact" [(ngModel)]="contactAdresseExp" placeholder="Nom de contact" disabled></div>
                                                <div class="form-group"><input type="text" class="form-control" id="inputExpTel" name="inputExpTel" [(ngModel)]="telContAdresseExp" placeholder="Téléphone de contact" disabled></div>
                                        </div>
                                </fieldset>
                        </div> -->
                        <div class="col-xl-12 text-xs-center">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border">Déstinataire</legend>
                                        <div class="control-group">
                                                <div class="row">
                                                        <div class="col-xl-6 text-xs-center"> 
                                                                <div class="form-group">   
                                                                        <small class="form-text text-primary" style="font-size:10px !important;">Choisissez une adresse déjà enregistrée ou créer une nouvelle adresse.</small>                                                                                                                                                                                                                                                                                                                           
                                                                        <select id="inputDestAdresseName" class="form-control" (change)="onClickAdrDest()" [(ngModel)]="selectedAdresseDest">                                                                                
                                                                                <option *ngFor="let adresse of Adresses" [ngValue]="adresse">
                                                                                        {{ adresse.labelAdr }}
                                                                                </option>
                                                                        </select>
                                                                </div>                                                                                                                                                
                                                                <div class="form-group"><input type="text" class="form-control" id="inputDestAdresseCity" name="inputDestAdresseCity" [(ngModel)]="cityAdresseDest" placeholder="Adresse" autocomplete="on"></div>
                                                        </div>
                                                        <div class="col-xl-6 text-xs-center"> 
                                                                <h6><span>.</span></h6>
                                                                <div class="form-group"><input type="text" class="form-control" id="inputDestContact" name="inputDestContact" [(ngModel)]="contactAdresseDest" placeholder="Nom de contact"></div>
                                                                <div class="row">
                                                                        <div class="col-xl-6 text-xs-center">
                                                                                <div class="form-group"><input type="text" class="form-control" id="inputDestTel" name="inputDestTel" [(ngModel)]="telContAdresseDest" placeholder="Téléphone 1"></div>
                                                                        </div>
                                                                        <div class="col-xl-6 text-xs-center">
                                                                                <div class="form-group"><input type="text" class="form-control" id="inputDestTel2" name="inputDestTel2" [(ngModel)]="telContAdresseDest2" placeholder="Téléphone 2"></div>
                                                                        </div>                                                                        
                                                               
                                                                </div>
                                                        </div> 
                                                </div>
                                                
                                                <div class="row">
                                                        <div class="col-xl-4 text-xs-center"> 
                                                                <div class="form-group" id="gouv_del">
                                                                        <input type="text" class="form-control" pattern="[0-9]*" maxlength="4" required name="zipCode" id="zipCode" placeholder="Tapez ici le code postal" [(ngModel)]="zipCode" (keyup)="resetDelegInput()">                                                                                                                                                                                                        
                                                                </div>
                                                        </div>
                                                        <div class="col-xl-4 text-xs-center">
                                                                <select id="gouvernorat" name="gouvernorat" class="form-control" [(ngModel)]="gouvernorat" (change)="getDelegFromGov(); onKeyAdr();">
                                                                        <option value="">-- Gouvernorat --</option>
                                                                </select>
                                                        </div>                                                        
                                                        <div class="col-xl-4 text-xs-center" hidden>
                                                                <select id="delegationn" name="delegationn" class="form-control" [(ngModel)]="delegation" (change)="getGovAndDelegFromIndex()">
                                                                        <option value="">-- Delegation --</option>
                                                                </select>
                                                        </div>
                                                        <div class="col-xl-4 text-xs-center">
                                                                <div class="form-group" id="del">
                                                                        <ng2-completer [inputClass]="'form-control form-control-inline'" [datasource]="tunisiaData" [minSearchLength]="0" [textSearching]="'Cherche...'" 
                                                                        [textNoResults]="'Pas trouvé.'" [placeholder]="'Entrer la ville'" id="delegation" name="delegation" [(ngModel)]="delegation" 
                                                                        (selected)="getGovAndDelegFromIndex()" (keyup)="onKeyAdr()">
                                                                        </ng2-completer>
                                                                </div>                                                                
                                                        </div>
                                                </div>
                                                <!-- <div class="row" hidden>
                                                        <div class="col-xl-4 text-xs-center"> 
                                                                <div class="form-group" id="gouv_del">
                                                                        <input type="text" class="form-control" pattern="[0-9]*" maxlength="4" required name="zipCode" id="zipCode" placeholder="Tapez ici le code postal" [(ngModel)]="zipCode">                                                                                                                                                                                                        
                                                                </div>
                                                        </div>
                                                        <div class="col-xl-4 text-xs-center">
                                                                <select id="gouvernorat" name="gouvernorat" class="form-control" [(ngModel)]="gouvernorat">
                                                                        <option value="">-- Gouvernorat --</option>
                                                                </select>
                                                        </div>                                                        
                                                        <div class="col-xl-4 text-xs-center">
                                                                <div class="form-group" id="delegatio">       
                                                                        <ng2-completer input-class="form-control form-control-small" [(ngModel)]="delegation" [datasource]="tunisiaData" [minSearchLength]="0" [autofocus]="true"
                                                                                [minSearchLength]="0" [clearSelected]="true" [selectOnClick]="true"></ng2-completer>                                                                                                                                         
                                                                </div>                                                                
                                                        </div>
                                                </div>  -->                                                                                                                                                                                                                             
                                                <!-- <input type="text" class="form-control" id="inputComposedAdresse" name="inputComposedAdresse" [(ngModel)]="inputComposedAdresse" >
                                                <input type="text" id="latitude2" name="latitude2" [(ngModel)]="latitude2" readonly  />
                                                <input type="text" id="longitude2" name="longitude2" [(ngModel)]="longitude2" readonly  /> -->
                                                
                                                <input type="text" class="form-control" id="latGlobalDest" name="latGlobalDest" [(ngModel)]="latGlobalDest" hidden>
                                                <input type="text" class="form-control" id="lngGlobalDest" name="lngGlobalDest" [(ngModel)]="lngGlobalDest" hidden>
                                                <input type="text" class="form-control" id="cityGlobalDest" name="cityGlobalDest" [(ngModel)]="cityGlobalDest" hidden>

                                        </div>
                                </fieldset>
                        </div>
                </div>                                                
                <div class="row">
                    <div class="col-xl-12 text-xs-center">
                        <fieldset class="scheduler-border">
                                <legend class="scheduler-border">Colis</legend>
                                <div class="control-group">
                                        <div class="row">
                                                <div class="col-xl-12 text-xs-center">
                                                        <fieldset class="scheduler-border">
                                                                <legend class="scheduler-border">Type de colis</legend>
                                                                <div class="control-group">
                                                                        <div class="row">
                                                                                <div class="col-xl-3 text-xs-center" style="margin-left: 10px;">                                                                                        
                                                                                        <input type="radio" class="form-check-input" id="rd-type1-trip" name="rd-btn-type-trip" (click)="show1()" value="pack" [(ngModel)]="selectedTripType" mdbInputDirective>                                                                                
                                                                                        <label class="form-check-label" for="rd-type1-trip">Petit</label>
                                                                                </div>
                                                                                <div class="col-xl-3 text-xs-center" style="margin-left: 10px;">                                                                                        
                                                                                        <input type="radio" class="form-check-input" id="rd-type2-trip" name="rd-btn-type-trip" (click)="show2()" value="packbig" [(ngModel)]="selectedTripType" mdbInputDirective>
                                                                                        <label class="form-check-label" for="rd-type2-trip">Grand</label>
                                                                                </div>
                                                                                <div class="col-xl-3 text-xs-center" style="margin-left: 10px;">                                                                                        
                                                                                        <input type="radio" class="form-check-input" id="rd-type3-trip" name="rd-btn-type-trip" (click)="show1()" value="doc" [(ngModel)]="selectedTripType" mdbInputDirective>
                                                                                        <label class="form-check-label" for="rd-type3-trip">Document</label>
                                                                                </div>
                                                                        </div>                                                                        
                                                                </div>
                                                        </fieldset>  
                                                </div>                                              
                                        </div>
                                        <div class="row">
                                                <div id="div_dimensions" class="col-xl-12 text-xs-center" style="display: none;">
                                                        <fieldset class="scheduler-border">
                                                                <legend class="scheduler-border">Dimensions et poids de colis</legend>
                                                                <div class="control-group">
                                                                        <div class="row">
                                                                                <div class="col-xl-4 text-xs-center">
                                                                                        <input type="text" class="form-control" id="inputTripDim1" name="inputTripDim1" [(ngModel)]="longueurTrip" placeholder="Longueur">
                                                                                </div>
                                                                                <div class="col-xl-4 text-xs-center">
                                                                                        <input type="text" class="form-control" id="inputTripDim2" name="inputTripDim2" [(ngModel)]="largeurTrip" placeholder="Largeur">
                                                                                </div>
                                                                                <div class="col-xl-4 text-xs-center">
                                                                                        <input type="text" class="form-control" id="inputTripDim3" name="inputTripDim3" [(ngModel)]="hauteurTrip" placeholder="Hauteur">
                                                                                </div>
                                                                        </div>                                                                                                                                               
                                                                </div>
                                                                <br>
                                                                <div class="control-group">
                                                                        <div class="row">
                                                                                <div class="col-xl-4 text-xs-center">
                                                                                        <div class="form-group"><input type="text" class="form-control" id="inputTripPoids" name="inputTripPoids" [(ngModel)]="poidsTrip" placeholder="Poids"></div>
                                                                                </div>
                                                                        </div>
                                                                </div> 
                                                        </fieldset>  
                                                </div>                                              
                                        </div>                                        
                                        <div class="form-group"><textarea class="form-control" id="inputTripDescription" name="inputTripDescription" [(ngModel)]="descriptionTrip" rows="3" placeholder="Description de colis"></textarea></div>
                                        <!-- <div class="form-group"><input type="text" class="form-control" id="inputTripDescription" name="inputTripDescription" [(ngModel)]="descriptionTrip" placeholder="Description de colis"></div> -->
                                        <!-- <div class="form-group">
                                                <label for="InputImageTrip">Image de colis</label>
                                                <input type="file" (change)="onUploadChange($event)" accept=".png, .jpg, .jpeg" class="form-control-file" id="InputImageTrip" [(ngModel)]="imgTrip" aria-describedby="fileHelp">
                                                <img *ngFor="let ite of base64textString"  src={{ite}} alt="" id="img" style="width: 10%; height: 10%;">
                                                <small id="fileHelp" class="form-text text-muted">Taille maximale d'image est 2Mo.</small>
                                        </div> --> 
                                        <div class="form-group">
                                                <button (click)="compressFile()">Image de colis</button>
                                                <small id="fileHelp" class="form-text text-muted">Taille maximale d'image est 2Mo.</small>
                                                <img *ngIf="imgResultBeforeCompress" [src]="imgResultBeforeCompress" alt="" style="display: none;">
                                                <img *ngIf="imgResultAfterCompress" [src]="imgResultAfterCompress" alt="" style="width: 10%; height: 10%;">
                                        </div>                                    
                                        <div class="form-group">
                                                <label for="InputImageTrip">Valeur de colis</label>
                                                <input type="text" class="form-control" id="inputTripValue" name="inputTripValue" [(ngModel)]="valueTrip" placeholder="exp: 58.60">
                                        </div>
                                        <div class="form-group">
                                                <h6><span>Choisir le mode de livraison:</span></h6>
                                                <select id="inputExpAdresseName" class="form-control" [(ngModel)]="modeLiv" (change)="getLatLngFromGov()">                                                        
                                                        <!-- <option value="immediate">Immédiate</option> -->
                                                        <option value="24H">24/48 heures</option>                                                        
                                                </select>
                                        </div>
                                        <div class="form-group">
                                                <h6><span>Choisir le type de paiement:</span></h6>
                                                <select id="inputExpAdresseName" class="form-control" [(ngModel)]="typePaiement" (change)="getLatLngFromGov()">                                                        
                                                        <option value="Payer par expéditeur">Payer par l'éxpéditeur</option>
                                                        <option value="Payer par destinataire">Payer par le déstinataire</option>
                                                        <option value="Contre remboursement">Contre remboursement</option>
                                                </select>
                                        </div>                                                       
                                </div>
                        </fieldset>                                                     
                    </div>
                </div> 
        </div>
            
        <div class="modal-footer">
                <button type="button" class="btn btn-secondary" (click)="c('Close click')">Fermer</button>
                <button type="button" class="btn btn-primary" (click)="addTrip()">Postuler</button>
        </div>
</ng-template>

<!-- <div id='modal_dialog'>
        <div class='title'>Etes-vous sur de bien vouloir supprimer cet élément ?</div>
        <input type='button' value='yes' id='btnYes' />
        <input type='button' value='no' id='btnNo' />
</div> -->

<ng-template #content6 let-modal>
        <div class="modal-header">
                <h4 class="modal-title" id="modal-basic-title">Génération de manifeste</h4>                
                <button type="button" class="btn btn-primary" (click)="generateDechargeForAdmin();">Générer</button>
        </div>
        <div class="modal-body">                        
                        <table class="table table-sm" id="contentToConvert" style="font-size:12px !important;">
                                <thead class="thead">                                        
                                        <tr style="border-style:hidden; border-width: 0px;">
                                                <th><img src="assets/images/l2.png" height="52" width="52"></th>
                                                <th colspan="1"><u>Société:</u>&nbsp;<b>PACKWAYS</b></th>
                                                <th colspan="3" class="text-center" align="left" valign="top"><h3>BON DE SORTIE N°{{entier}}</h3></th>            
                                        </tr>
                                        <tr style="border-style:hidden; border-width: 0px;">                                                                         
                                                <th colspan="1"></th>
                                                <th colspan="5"><u>MF:</u>&nbsp;<b>1612403CAM000</b> &nbsp; <u>Date:</u> {{dateJ}}&nbsp;&nbsp;&nbsp; <u>Livreur:</u>
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        &nbsp;&nbsp;&nbsp;&nbsp; <u>Mat_Voiture:</u><!-- Date:&nbsp;{{dateJ}} --></th>                                                
                                                <th colspan="5" class="text-right"><u>Total des colis:</u>&nbsp;{{totalTripInManifest}}</th>
                                        </tr>
                                        <tr class="thead-light text-center">
                                        <th style="width:1%">Ref</th>
                                        <th style="width:10%">Déstinataire</th>    
                                        <th *ngIf="!isVisible" style="width:10%">Téléphone</th>                                    
                                        <th style="width:50%">Adresse</th>
                                        <th style="width:35%">Description</th>
                                        <th *ngIf="isVisible" style="width:28%">Type de paiement</th>
                                        <th style="width:1%">Fr</th>
                                        <th style="width:1%">Val</th>
                                        <th *ngIf="isVisible" style="width:3%">QRCode</th>
                                        </tr>
                                </thead>
                                <tbody style="font-size:14px !important;">
                                        <tr *ngFor="let trp of checkedTrips" class="table-active text-center" style="background-color: #ffffff;">
                                                <td style="background-color: #ffffff;">{{trp.refTrip}}</td>   
                                                <td *ngIf="isVisible" style="background-color: #ffffff;">{{trp.destTrip.contactAdr}}<br><hr>{{trp.destTrip.mobileAdr}}</td>
                                                <td *ngIf="!isVisible" style="background-color: #ffffff;">{{trp.destTrip.contactAdr}}</td> 
                                                <td *ngIf="!isVisible" style="background-color: #ffffff;">{{trp.destTrip.mobileAdr}}</td>                                                                                           
                                                <td style="background-color: #ffffff;">{{trp.destTrip.cityAdr}}</td>                                                                                                
                                                <td style="background-color: #ffffff;">{{trp.descriptionTrip}}</td>
                                                <td *ngIf="isVisible" style="background-color: #ffffff;">{{trp.modeTrip}}</td> 
                                                <td style="background-color: #ffffff;">{{trp.costTrip }}</td>
                                                <td style="background-color: #ffffff;">{{trp.packageTrip.valPackage }}</td>
                                                <td *ngIf="isVisible && displayQrCode" style="background-color: #ffffff;"><ngx-qrcode                                                         
                                                        [qrc-value] = "trp.idTrip"
                                                        qrc-class = "aclass" qrc-version = "2"
                                                        qrc-errorCorrectionLevel = "L">
                                                        </ngx-qrcode>
                                                </td>
                                                
                                        </tr>                                        
                                </tbody>
                                <tfoot>
                                        <tr style="background-color: #e9ecef;">
                                                <td colspan="8"><b>Fraix total:</b> {{fraixTotal}} &nbsp;&nbsp; <b>Valeur total:</b> {{valeurTotal}}</td>                                                                                                                                                
                                        </tr>                                        
                                </tfoot>
                        </table>                        
        </div>
        <div class="modal-footer">                
                <button type="button" class="btn btn-secondary" (click)="modal.close('Save click')">Fermer</button>
        </div>
</ng-template>

<ng-template #content8 let-modal>
        <div class="modal-header">
                <h4 class="modal-title" id="modal-basic-title">Génération de décharge</h4>                
                <button type="button" class="btn btn-primary" (click)="generateDechargeForClient()">Générer</button>
        </div>
        <div class="modal-body">
                        <table class="table table-sm" id="contentToConvert" style="font-size:10px !important;">
                                <thead class="thead-dark">                                        
                                        <tr class="text-center">
                                        <th style="width:10%">Ref</th>
                                        <th style="width:15%">Déstinataire</th>
                                        <th style="width:15%">Téléphone</th>
                                        <th style="width:40%">Adresse</th>
                                        <th style="width:25%">Date création</th>
                                        <th style="width:15%">Frais</th>
                                        <th style="width:15%">Valeur</th>                                        
                                        </tr>
                                </thead>
                                <tbody>
                                        <tr *ngFor="let trp of checkedTrips" class="table-active text-center" style="background-color: #ffffff;">
                                                <td style="background-color: #ffffff;">{{trp.refTrip}}</td>   
                                                <td style="background-color: #ffffff;">{{trp.destTrip.contactAdr}}</td> 
                                                <td style="background-color: #ffffff;">{{trp.destTrip.mobileAdr}}</td>                                            
                                                <td style="background-color: #ffffff;">{{trp.destTrip.cityAdr}}</td>                                                                                                
                                                <td style="background-color: #ffffff;">{{changeDateFormat(trp.createdday)}}</td>
                                                <td style="background-color: #ffffff;">{{trp.costTrip }}</td>
                                                <td style="background-color: #ffffff;">{{trp.packageTrip.valPackage }}</td>                                                                                                
                                        </tr>                                        
                                </tbody>
                                <tfoot>
                                        <tr class="table-primary">
                                                <td colspan="7">Fraix total: {{fraixTotal}}</td>                                                                                                
                                        </tr>
                                        <tr class="table-primary">
                                                <td colspan="7">Valeur total: {{valeurTotal}}</td>                                                                                                
                                        </tr>
                                </tfoot>
                        </table>
        </div>
        <div class="modal-footer">                
                <button type="button" class="btn btn-secondary" (click)="modal.close('Save click')">Fermer</button>
        </div>
</ng-template>

<ng-template #content7 let-modal id="content7">
        <div class="modal-header">
                <h4 class="modal-title">Le bon de livraison de colis &nbsp; {{tripBl.refTrip}} &nbsp; a été envoyé avec succès.</h4>
                <button type="button" class="close" aria-label="Close" (click)="modal.close('Save click')">
                <span aria-hidden="true">&times;</span>
                </button>
        </div>        
        
        <div class="modal-footer">                                                
                <button type="button" class="btn btn-secondary" (click)="modal.close('Save click')">Fermer</button>
        </div>
</ng-template>

<ng-template #contentMsg let-modal id="contentMsg">
        <div class="modal-header">                
                <h5 class="modal-title">Envoyer un message au client:&nbsp; {{trpMsg.userTrip.nameUser}}.&nbsp;Référence de colis:&nbsp; {{trpMsg.refTrip}}.</h5>
                <button type="button" class="close" aria-label="Close" (click)="modal.close('Save click')">
                <span aria-hidden="true">&times;</span>
                </button>
        </div> 
        <div class="modal-body">
                <div class="row">
                  <div class="col-xl-12 text-xs-center">
                        <fieldset class="scheduler-border">
                                <legend class="scheduler-border">Sélectionner un message:</legend>
                                <div class="control-group">
                                        <div class="form-group">                                                                                                                                                                                                                                                                                                                                                          
                                                <select id="inputPreMessageToClient" class="form-control dropdown-class" [(ngModel)]="inputPreMessageToClient">
                                                        <option *ngFor="let message of PreMessages" [ngValue]="message">
                                                                {{ message }}
                                                        </option>
                                                </select>
                                        </div>                                                                                                                                                                                                                              
                                        <div class="form-group"><input type="text" class="form-control" id="inputCusMessageToClient" name="inputCusMessageToClient" [(ngModel)]="inputCusMessageToClient" placeholder="Message personalisé"></div>                                                                                                                
                                </div>                                 
                        </fieldset>
                  </div>
                </div> 
        </div>
        <div class="modal-footer">
                <button type="button" class="btn btn-danger" (click)="modal.close('Save click')">Annuler</button>                
                <button type="button" class="btn btn-primary" (click)="onClickPreMsg(); modal.close('Save click');">Envoyer</button>
        </div>
</ng-template>

<ng-template #contentMsgAction let-modal id="contentMsgAction">
        <div class="modal-header">                
                <h5 class="modal-title">Envoyer un message multiple</h5>
                <button type="button" class="close" aria-label="Close" (click)="modal.close('Save click')">
                <span aria-hidden="true">&times;</span>
                </button>
        </div> 
        <div class="modal-body">
                <div class="row">
                  <div class="col-xl-12 text-xs-center">
                        <fieldset class="scheduler-border">
                                <legend class="scheduler-border">Sélectionner un message:</legend>
                                <div class="control-group">
                                        <div class="form-group">                                                                                                                                                                                                                                                                                                                                                          
                                                <select id="inputPreMessageToClient" class="form-control dropdown-class" [(ngModel)]="inputPreMessageToClient">
                                                        <option *ngFor="let message of PreMessagesAction" [ngValue]="message">
                                                                {{ message }}
                                                        </option>
                                                </select>
                                        </div>                                                                                                                                                                                                                              
                                        <div class="form-group"><input type="text" class="form-control" id="inputCusMessageToClient" name="inputCusMessageToClient" [(ngModel)]="inputCusMessageToClient" placeholder="Message personalisé"></div>                                                                                                                
                                </div>                                 
                        </fieldset>
                  </div>
                </div> 
        </div>
        <div class="modal-footer">
                <button type="button" class="btn btn-danger" (click)="modal.close('Save click')">Annuler</button>                
                <button type="button" class="btn btn-primary" (click)="actionSendSms(); modal.close('Save click');">Envoyer</button>
        </div>
</ng-template>

<ng-template #contentBl let-modal>
        <div class="modal-header">
                <h4 class="modal-title" id="modal-basic-title">Génération de bon de livraison de colis: {{tripBl.refTrip}}</h4>                
                <button type="button" class="btn btn-primary" (click)="generateBLivraison()">Générer</button>
        </div>
        <div class="modal-body">                        
                <table id="contentBlToConvert" class="table table-borderless-cus" background="assets/images/stickers.png"  style="border-collapse: unset;background-position:center; background-repeat: no-repeat; border-style:groove; border-width: 5px;
                border-color:rgb(0, 0, 0);" >                                       
                        <tbody style="padding-top: .0em; padding-bottom: .0em;">
                                <tr class="text-center">
                                <td><b>Cachet et signature</b></td>                                
                                <td colspan="3"><h2><u>BON DE LIVRAISON</u></h2><br><H2>N°{{numBl}}</H2></td>                             
                                <td><ngx-qrcode                                                         
                                        [qrc-value] = "tripBl.idTrip"
                                        qrc-class = "aclass" qrc-version = "2"
                                        qrc-errorCorrectionLevel = "L"
                                        >
                                        </ngx-qrcode>
                                </td>      
                                </tr>
                                <tr>      
                                <td class="text-left"><b>REF</b></td>
                                <td colspan="3"><b>{{tripBl.refTrip}}</b></td>
                                <td class="text-center"><b>Date</b> <br> {{changeDateFormat(tripBl.createdday)}} </td>
                                <!-- <td colspan="2" class="text-left"><h3>Code expéditeur</h3></td>
                                <td>{{tripBl.codeExp}}</td> -->                                 
                                </tr>
                                <tr height="70" style="border-style:solid; border-width: 2px;">      
                                <td class="text-left" ><b>Expéditeur</b></td>
                                <td colspan="2">{{tripBl.userTrip.nameUser}}</td>
                                <td class="text-left"><b>Mobile</b></td>
                                <td>{{tripBl.userTrip.mobileUser}}</td>                                    
                                </tr>                                
                                <tr>      
                                <td class="text-left"><b>Adresse</b></td>
                                <td colspan="4">{{tripBl.sourceTrip.cityAdr}}</td>                                      
                                </tr> 
                                <tr>     
                                <td class="text-left"><b>Déstinataire</b></td>
                                <td colspan="2">{{tripBl.destTrip.contactAdr}}</td>
                                <td class="text-left"><b>Mobile</b></td>
                                <td>{{tripBl.destTrip.mobileAdr}}</td>                                    
                                </tr>
                                <tr>      
                                <td class="text-left"><b>Adresse</b></td>
                                <td colspan="4">{{tripBl.destTrip.labelAdr}}&nbsp;{{tripBl.destTrip.cityAdr}}</td>                                      
                                </tr>
                                <tr>      
                                <td colspan="2"><b>Prix Total(HT)</b>&nbsp;&nbsp; {{valHt}}</td>
                                <td colspan="2"><b>TVA</b> &nbsp; &nbsp; 19%</td>
                                <td colspan="2" class="text-left"><b>ValeurTTC </b>&nbsp; &nbsp; {{tripBl.packageTrip.valPackage}}</td>                                
                                </tr>
                                <tr>      
                                <td class="text-left"><b>Description</b></td>
                                <td colspan="4">{{tripBl.descriptionTrip}}</td>                                      
                                </tr>
                                <!--
                                <tr height="70" style="border-style:solid; border-width: 2px;">  
                                        <td colspan="2"><b>Cachet et signature</b></td>      
                                        <td class="text-center"><b>Date</b> <br> {{changeDateFormat(tripBl.createdday)}} </td>
                                        <td colspan="2"><b>Nom de livreur et matricule de voiture</b></td>                                            
                                </tr>          
                                -->                      
                                <tr height="2" style="border-style:solid; border-width: 2px;">
                                        <td><b>Tel:</b> +21654885552</td>
                                        <td colspan="3"><b>Email:</b> contact.packways@gmail.com</td>
                                        <td><b>Facebook:</b> Packways</td>
                                </tr>
                        </tbody>
                                          <!--Table body-->
                </table>
        </div>
        <div class="modal-footer">                
                <button type="button" class="btn btn-secondary" (click)="modal.close('Save click');">Fermer</button>
        </div>
</ng-template>

<ng-template #contentImport let-modal id="contentImport">
        <div class="modal-header">
                <!-- <h5 class="modal-title">Importation des colis à partir d'un fichier excel.</h5> <br> -->
                <div class="row">
                        <div class="col-xl-12 text-xs-center"> 
                                <div class="form-group">
                                        <small class="form-text text-primary" style="font-size:10px !important;">Choisissez une adresse source déjà enregistrée.</small>
                                        <select id="inputExpAdresseNameExcel" class="form-control" [(ngModel)]="selectedAdresseExpExcel" (change)="tripsFromExcelAdrLatLng()">
                                                <option *ngFor="let adresse of Adresses" [ngValue]="adresse">
                                                        {{ adresse.labelAdr }}
                                                </option>
                                        </select>
                                </div>                                                                                                                                                                                
                        </div>                        
                </div>                
        </div>  
        <div class="modal-body" hidden>                
                <table class="table table-sm" style="background-color: #ffffff;">                        
                        <tbody style="background-color: #ece8e8;">
                                <tr *ngFor="let row of tripsFromExcelTemp" class="table-active text-center">
                                        <td *ngFor="let val of row">
                                                {{val}}
                                        </td>
                                </tr>                                        
                        </tbody>                       
                </table>                
        </div>      
        
        <div class="modal-footer">                                                
                <button type="button" class="btn btn-secondary btn-sm" (click)="modal.close('Save click')">Annuler</button>  <!-- showArrayTrip() -->
                <button type="button" class="btn btn-primary btn-sm" (click)="addTripsFromExcelFile();modal.close('Save click');">Confirmer</button>
        </div>

</ng-template>

<ng-template #contentupdateargentR let-c="close" let-d="dismiss">
                <div class="modal-body">
                        <div class="row">
                                <h6>Etes-vous sur de bien vouloir recolter le colis REF: {{tripBl.refTrip}} ?</h6>
                        </div> 
                </div>
                <div class="modal-footer">
                        <button type="button" class="btn btn-danger" (click)="(c('Close click'))">Annuler</button>                
                        <button type="button" class="btn btn-primary" (click)="updateArgentRecolte();(c('Close click'))">Confirmer</button>
                </div>
</ng-template>

<ng-template #contentupdateargentRL let-c="close" let-d="dismiss">
                <div class="modal-body">
                        <div class="row justify-content-center">
                                <h6 style="color: #f00f0f;"><b>Etes-vous sur de bien vouloir recolter ces colis ?</b></h6>
                        </div> 
                </div>
                <div class="modal-body">                        
                        <table class="table table-sm" id="contentToConvert" style="font-size:12px !important;">
                                <thead class="thead">
                                        <tr class="thead-light text-center">
                                        <th style="width:1%">Ref</th>
                                        <th style="width:1%">Valeur</th>
                                        <th style="width:1%">Action</th>
                                        </tr>
                                </thead>
                                <tbody style="font-size:14px !important;">
                                        <tr *ngFor="let trp of checkedTrips" class="table-active text-center" style="background-color: #ffffff;">
                                                <td style="background-color: #ffffff;">{{trp.refTrip}}</td>
                                                <td style="background-color: #ffffff;">{{trp.packageTrip.valPackage }}</td>
                                                <td style="background-color: #ffffff;">
                                                        <i class="material-icons" (click)="deleteChecked(trp)" > delete </i>
                                                </td>
                                                
                                        </tr>                                     
                                </tbody>
                                <tfoot>
                                        <tr>
                                                <td><h6><b> Total:  </b></h6></td>
                                                <td><h6><b> {{sommeTotal}} </b></h6></td>
                                        </tr>
                                </tfoot>
                        </table>                        
                </div>
                <div class="modal-footer">
                        <button type="button" class="btn btn-danger" (click)="(c('Close click'))">Annuler</button>                
                        <button type="button" class="btn btn-primary" (click)="recolterTrip();(c('Close click'))">Confirmer</button>
                </div>
</ng-template>

<ng-template #contentupdateCloture let-c="close" let-d="dismiss">
                <div class="modal-body">
                        <div class="row justify-content-center">
                                <h6 style="color: #f01010;"><b>Etes-vous sur de bien vouloir cloturer ces colis ?</b></h6>
                        </div> 
                </div>
                <div class="modal-body">                        
                        <table class="table table-sm" id="contentToConvert" style="font-size:12px !important;">
                                <thead class="thead">
                                        <tr class="thead-light text-center">
                                        <th style="width:1%">Ref</th>
                                        <th style="width:1%">Valeur</th>
                                        <th style="width:1%">Action</th>
                                        </tr>
                                </thead>
                                <tbody style="font-size:14px !important;">
                                        <tr *ngFor="let trp of checkedTrips" class="table-active text-center" style="background-color: #ffffff;">
                                                <td style="background-color: #ffffff;">{{trp.refTrip}}</td>
                                                <td style="background-color: #ffffff;">{{trp.packageTrip.valPackage }}</td>
                                                <td style="background-color: #ffffff;">
                                                        <i class="material-icons" (click)="deleteChecked(trp)" > delete </i>
                                                </td>
                                                
                                        </tr>                                        
                                </tbody>
                                <tfoot>
                                        <tr>
                                                <td><h6><b> Total:  </b></h6></td>
                                                <td><h6><b> {{sommeTotal}} </b></h6></td>
                                        </tr>
                                </tfoot>
                        </table>                        
                </div>
                <div class="modal-footer">
                        <button type="button" class="btn btn-danger" (click)="(c('Close click'))">Annuler</button>                
                        <button type="button" class="btn btn-primary" (click)="closeTrip();(c('Close click'))">Confirmer</button>
                </div>
</ng-template>

<ng-template #contentupdatePayment let-c="close" let-d="dismiss">
                <div class="modal-body">
                        <div class="row justify-content-center">
                                <h6 style="color: #f01010;"><b>Etes-vous sur de bien vouloir lancer le payment de ces colis ?</b></h6>
                        </div> 
                </div>
                <div class="modal-body">                        
                        <table class="table table-sm" id="contentToConvert" style="font-size:12px !important;">
                                <thead class="thead">
                                        <tr class="thead-light text-center">
                                        <th style="width:1%">Ref</th>
                                        <th style="width:1%">Valeur</th>
                                        <th style="width:1%">Action</th>
                                        </tr>
                                </thead>
                                <tbody style="font-size:14px !important;">
                                        <tr *ngFor="let trp of checkedTrips" class="table-active text-center" style="background-color: #ffffff;">
                                                <td style="background-color: #ffffff;">{{trp.refTrip}}</td>
                                                <td style="background-color: #ffffff;">{{trp.packageTrip.valPackage }}</td>
                                                <td style="background-color: #ffffff;">
                                                        <i class="material-icons" (click)="deleteChecked(trp)" > delete </i>
                                                </td>
                                        </tr>                                        
                                </tbody>
                                <tfoot>
                                        <tr>
                                                <td><h6><b> Total:  </b></h6></td>
                                                <td><h6><b> {{sommeTotal}} </b></h6></td>
                                        </tr>
                                </tfoot>
                        </table>                        
                </div>
                <div class="modal-footer">
                        <button type="button" class="btn btn-danger" (click)="(c('Close click'))">Annuler</button>                
                        <button type="button" class="btn btn-primary" (click)="EncoursPayementTrip();(c('Close click'))">Confirmer</button>
                </div>
</ng-template>

<ng-template #contentupdateStatus let-c="close" let-d="dismiss">
                <div class="modal-body">
                        <div class="row justify-content-center">
                                <h6 style="color: #f01010;"><b>Etes-vous sur de bien vouloir changer le statut de ces colis ?</b></h6>
                        </div> 
                </div>
                <div class="modal-body">                        
                        <table class="table table-sm" id="contentToConvert" style="font-size:12px !important;">
                                <thead class="thead">
                                        <tr class="thead-light text-center">
                                        <th style="width:1%">Ref</th>
                                        <th style="width:1%">Status</th>
                                        <th style="width:1%">Action</th>
                                        </tr>
                                </thead>
                                <tbody style="font-size:14px !important;">
                                        <tr *ngFor="let trp of checkedTrips" class="table-active text-center" style="background-color: #ffffff;">
                                                <td style="background-color: #ffffff;">{{trp.refTrip}}</td>
                                                <td style="background-color: #ffffff;">{{trp.statusTrip }}</td>
                                                <td style="background-color: #ffffff;">
                                                        <i class="material-icons" (click)="deleteChecked(trp)" > delete </i>
                                                </td>
                                        </tr>                                        
                                </tbody>
                        </table>                        
                </div>
                <div class="modal-footer">
                        <button type="button" class="btn btn-danger" (click)="(c('Close click'))">Annuler</button>                
                        <button type="button" class="btn btn-primary" (click)="actionEtat();(c('Close click'))">Confirmer</button>
                </div>
</ng-template>

<ng-template #contentupdatedriverAFF let-c="close" let-d="dismiss">
                <div class="modal-body">
                        <div class="row justify-content-center">
                                <h6 style="color: #f01010;"><b>Etes-vous sur de bien vouloir affecter le condicteur " {{actionA.nameDriver}} {{actionA.surnameDriver}} " à ces colis ?</b></h6>
                        </div> 
                </div>
                <div class="modal-body">                        
                        <table class="table table-sm" id="contentToConvert" style="font-size:12px !important;">
                                <thead class="thead">
                                        <tr class="thead-light text-center">
                                        <th style="width:1%">Ref</th>
                                        <th style="width:1%">Driver</th>
                                        <th style="width:1%">Action</th>
                                        </tr>
                                </thead>
                                <tbody style="font-size:14px !important;">
                                        <tr *ngFor="let trp of checkedTrips" class="table-active text-center" style="background-color: #ffffff;">
                                                <td style="background-color: #ffffff;">{{trp.refTrip}}</td>
                                                <td style="background-color: #ffffff;" *ngIf="trp.driverTrip!==null">{{trp.driverTrip.nameDriver }} {{trp.driverTrip.surnameDriver }}</td>
                                                <td style="background-color: #ffffff;" *ngIf="trp.driverTrip===null">Aucun livreur</td>
                                                <td style="background-color: #ffffff;">
                                                        <i class="material-icons" (click)="deleteChecked(trp)" > delete </i>
                                                </td>
                                        </tr>                                        
                                </tbody>
                        </table>                        
                </div>
                <div class="modal-footer">
                        <button type="button" class="btn btn-danger" (click)="(c('Close click'))">Annuler</button>                
                        <button type="button" class="btn btn-primary" (click)="actionAffectation();(c('Close click'))">Confirmer</button>
                </div>
</ng-template>

<ng-template #contentexport let-c="close" let-d="dismiss">
                <div class="modal-body">
                        <div class="row justify-content-center">
                                <h6 style="color: #f01010;"><b>Etes-vous sur de bien vouloir exporter ces colis ?</b></h6>
                        </div> 
                </div>
                <div class="modal-body">                        
                        <table class="table table-sm" id="contentToConvert" style="font-size:12px !important;">
                                <thead class="thead">
                                        <tr class="thead-light text-center">
                                        <th style="width:1%">Ref</th>
                                        <th style="width:1%">Destinataire</th>
                                        </tr>
                                </thead>
                                <tbody style="font-size:14px !important;">
                                        <tr *ngFor="let trp of checkedTrips" class="table-active text-center" style="background-color: #ffffff;">
                                                <td style="background-color: #ffffff;">{{trp.refTrip}}</td>
                                                <td style="background-color: #ffffff;" >{{trp.destTrip.contactAdr }}</td>
                                        </tr>                                        
                                </tbody>
                        </table>                        
                </div>
                <div class="modal-footer">
                        <button type="button" class="btn btn-danger" (click)="(c('Close click'))">Annuler</button>                
                        <button type="button" class="btn btn-primary" (click)="generatePackwaysExcelReport();(c('Close click'))">Confirmer</button>
                </div>
</ng-template>

<ng-template #contentdeleteTrip let-c="close" let-d="dismiss">
                <div class="modal-body">
                        <div class="row">
                                <h6>Etes-vous sur de bien vouloir supprimer le colis REF: {{tripBl.refTrip}} ?</h6>
                        </div> 
                </div>
                <div class="modal-footer">
                        <button type="button" class="btn btn-danger" (click)="(c('Close click'))">Annuler</button>                
                        <button type="button" class="btn btn-primary" (click)="deleteTrip(tripBl);(c('Close click'))">Confirmer</button>
                </div>
</ng-template>

<ng-template #contentHostorique let-c="close" let-d="dismiss">
        <div class="modal-header">
            <h4 class="modal-title">Historique de trip:&nbsp; {{objTrip.refTrip}} </h4>
                <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                    <span aria-hidden="true">&times;</span>
                </button>
        </div>
                <div class="row">
                        <div class="col-xl-12 text-xs-center" *ngIf="objTrip.historique && objTrip.historique.length > 0">
                                <fieldset class="scheduler-border">
                                        <legend class="scheduler-border"><h6>Historique</h6></legend>
                                        <div class="control-group">                                
                                                <ul *ngFor="let his of objTrip.historique">                                                        
                                                        <li>{{his.ws}}
                                                                <ul>
                                                                <li>{{his.action}}</li>
                                                                <li>{{his.changedRecord}}</li>
                                                                <li>{{changeDateFormat(his.dateRecord)}}</li>
                                                                </ul>
                                                        </li>
                                                </ul>                                                                                                           
                                        </div>
                                </fieldset>
                        </div>
                </div>                                        
            
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" (click)="c('Close click')">Fermer</button>                
            </div>
</ng-template>

<ng-template #contentscandochette let-c="close" let-d="dismiss">
        <div class="modal-body">
                <div class="row justify-content-center">
                        <div class="col-xl-4 text-xs-center">
                                <!-- <form class="form-inline my-2 my-lg-0">
                                        <input class="form-control mr-sm-2" type="text" id="myInput" placeholder="Chercher" [(ngModel)]="searchTerm" [ngModelOptions]="{standalone: true}" (select)="setFilteredItems()">
                                </form> -->
                                <fieldset class="scheduler-border-1">
                                        <legend class="scheduler-border-1">Scan QR-Code</legend>
                                        <form class="form-inline mr-auto">
                                                <input class="form-control" type="text" id="myInput" [(ngModel)]="searchTermscan" [ngModelOptions]="{standalone: true}" placeholder="Chercher" aria-label="Search" width="100%">
                                                <button class="btn btn-mdb-color btn-rounded btn-sm my-0 ml-sm-2" (click)="scanList()" type="submit" hidden><i class="fa fa-search"></i></button> 
                                        </form>
                                </fieldset>
                        </div>
                </div>   
                <small class="form-text text-primary" style="font-size:12px !important;">Nombre des colis selectionnées:  <b>{{ListScanNB}}</b></small>                   
                        <table class="table table-sm" id="contentToConvert" style="font-size:12px !important;">
                                <thead class="thead"  *ngIf="ListScan !== []" >
                                        <tr class="thead-light text-center">
                                        <th style="width:1%">Ref</th>
                                        <th style="width:1%">Status</th>
                                        <th style="width:1%">Expéditeur</th>
                                        <th style="width:1%">Destinataire</th>
                                        <th style="width:1%">Msg</th>
                                        <th style="width:1%">Action</th>
                                        
                                        </tr>
                                </thead>
                                <tbody style="font-size:14px !important;">
                                        <tr *ngFor="let trp of ListScan" class="table-active text-center" style="background-color: #ffffff;">
                                                <td style="background-color: #ffffff;">{{trp.refTrip}}</td>
                                                <td style="background-color: #ffffff; width:15%;">{{trp.statusTrip}}</td>
                                                <td style="background-color: #ffffff; width:15%;">{{trp.userTrip.nameUser}} {{trp.userTrip.surnameUser}}</td>
                                                <td style="background-color: #ffffff; width:15%;" >{{trp.destTrip.contactAdr }}</td>
                                                <td  style="background-color: #ffffff;  width:50%;" *ngIf="trp.msgTrip && trp.msgTrip.length > 0">
                                                        <ul>                                                        
                                                                <li>{{trp.msgTrip[trp.msgTrip.length-1].contentMsg }}</li>
                                                                <li>{{trp.msgTrip[trp.msgTrip.length-1].dateMsg }}</li>
                                                        </ul>
                                                </td>
                                                <td style="background-color: #ffffff;" *ngIf="trp.msgTrip && trp.msgTrip.length === 0">-</td>
                                                <td style="background-color: #ffffff;">
                                                        <i class="material-icons" (click)="deleteScanList(trp)" > delete </i>
                                                </td>
                                        </tr>                                        
                                </tbody>
                        </table>                        
                
        </div>
        <div class="modal-footer">
                <button type="button" class="btn btn-danger" (click)="(c('Close click'))">Annuler</button>                
                <button type="button" class="btn btn-primary" (click)="chercher();(c('Close click'))">Chercher</button>
        </div>
</ng-template>