/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { SearchableAutoCompleteItems } from './AutocompleteItem';
export class AutocompleteGroup {
    constructor() {
        this.async = null;
        this.removals = [];
    }
    /**
     *
     * @param {?} value
     * @param {?} titleKey
     * @return {?}
     */
    SetNewValue(value, titleKey) {
        /** @type {?} */
        const values = SearchableAutoCompleteItems(value, titleKey);
        this.SetCopy(values);
        /**
         *
         */
        this.value = this.FilterRemovals(this.removals, values);
    }
    /**
     *
     * @param {?} ids
     * @return {?}
     */
    Removables(ids) {
        this.removals = ids;
        /**
         *
         */
        this.value = this.FilterRemovals(this.removals, this._copy);
    }
    /**
     *
     * @return {?}
     */
    InitialValue() {
        this.value = this.FilterRemovals(this.removals, this.initialValue);
        /**
         *
         */
        this.SetCopy(this.initialValue);
    }
    /**
     *
     * @param {?} values
     * @return {?}
     */
    SetCopy(values) {
        this._copy = Object.assign([], values);
    }
    /**
     *
     * @param {?} value
     * @return {?}
     */
    SetValues(value) {
        this.value = SearchableAutoCompleteItems(value, this.keys.titleKey, this.keys.childrenKey);
        /**
         *
         */
        this.initialValue = Object.assign({}, this.value);
        this.SetCopy(Object.assign({}, this.value));
    }
    /**
     *
     * @param {?} removals
     * @param {?} value
     * @return {?}
     */
    FilterRemovals(removals, value) {
        /** @type {?} */
        let filtered = Object.assign({}, value);
        /** @type {?} */
        let key;
        /** @type {?} */
        let keys = [];
        for (key in filtered) {
            if (filtered.hasOwnProperty(key)) {
                removals.forEach((id) => {
                    // Comparable string and ID
                    /** @type {?} */
                    let f = `_id_${String(id)}`;
                    /** @type {?} */
                    let c = key.substring(key.indexOf(f), key.length);
                    if (f === c) {
                        keys.push(key);
                    }
                });
            }
        }
        keys.forEach((k) => {
            delete filtered[k];
        });
        return filtered;
    }
}
if (false) {
    /** @type {?} */
    AutocompleteGroup.prototype.initialValue;
    /** @type {?} */
    AutocompleteGroup.prototype.key;
    /** @type {?} */
    AutocompleteGroup.prototype.keys;
    /** @type {?} */
    AutocompleteGroup.prototype.value;
    /** @type {?} */
    AutocompleteGroup.prototype.remove;
    /** @type {?} */
    AutocompleteGroup.prototype.placeholder;
    /** @type {?} */
    AutocompleteGroup.prototype.parent;
    /** @type {?} */
    AutocompleteGroup.prototype.completion;
    /** @type {?} */
    AutocompleteGroup.prototype.searchLength;
    /** @type {?} */
    AutocompleteGroup.prototype.async;
    /** @type {?} */
    AutocompleteGroup.prototype.noResults;
    /** @type {?} */
    AutocompleteGroup.prototype.dropdownValue;
    /** @type {?} */
    AutocompleteGroup.prototype.placeholderValue;
    /**
     * @type {?}
     * @private
     */
    AutocompleteGroup.prototype.removals;
    /**
     * @type {?}
     * @private
     */
    AutocompleteGroup.prototype._copy;
}
/**
 *
 * @template T
 * @param {?} placeholder
 * @param {?} key
 * @param {?} value
 * @param {?} keys
 * @param {?=} parent
 * @param {?=} completion
 * @param {?=} searchLength
 * @return {?}
 */
export function CreateNewAutocompleteGroup(placeholder, key, value, keys, parent = '', completion = true, searchLength = 2) {
    /** @type {?} */
    const group = new AutocompleteGroup();
    group.key = key;
    group.keys = keys;
    group.placeholder = placeholder;
    group.parent = parent;
    group.completion = completion;
    group.searchLength = searchLength;
    /**
     * Initial value needed, if we empty search box or want to clear it, it needs to be reset.
     * Setting copy, used if user wants to remove values (by id.). This _ list gets filtered.
     */
    group.SetValues(value);
    return group;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXV0b2NvbXBsZXRlR3JvdXAuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZy1hdXRvLWNvbXBsZXRlLyIsInNvdXJjZXMiOlsibGliL2NsYXNzZXMvQXV0b2NvbXBsZXRlR3JvdXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBb0IsMkJBQTJCLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUduRixNQUFNLE9BQU8saUJBQWlCO0lBcUIxQjtRQVZBLFVBQUssR0FBOEUsSUFBSSxDQUFDO1FBT2hGLGFBQVEsR0FBYSxFQUFFLENBQUM7SUFJaEMsQ0FBQzs7Ozs7OztJQUtELFdBQVcsQ0FBQyxLQUFzRCxFQUFFLFFBQWdCOztjQUMxRSxNQUFNLEdBQUcsMkJBQTJCLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQztRQUMzRCxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRXJCOztXQUVHO1FBQ0gsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDNUQsQ0FBQzs7Ozs7O0lBS0QsVUFBVSxDQUFDLEdBQWE7UUFDcEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUM7UUFFcEI7O1dBRUc7UUFDSCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDaEUsQ0FBQzs7Ozs7SUFLRCxZQUFZO1FBQ1IsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBRW5FOztXQUVHO1FBQ0gsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDcEMsQ0FBQzs7Ozs7O0lBS0QsT0FBTyxDQUFDLE1BQTZDO1FBQ2pELElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDM0MsQ0FBQzs7Ozs7O0lBS0QsU0FBUyxDQUFDLEtBQXVEO1FBQzdELElBQUksQ0FBQyxLQUFLLEdBQUcsMkJBQTJCLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFFM0Y7O1dBRUc7UUFDSCxJQUFJLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNsRCxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ2hELENBQUM7Ozs7Ozs7SUFLRCxjQUFjLENBQUMsUUFBZSxFQUFFLEtBQTRDOztZQUNwRSxRQUFRLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsS0FBSyxDQUFDOztZQUVuQyxHQUFHOztZQUFFLElBQUksR0FBRyxFQUFFO1FBQ2xCLEtBQUssR0FBRyxJQUFJLFFBQVEsRUFBRTtZQUNsQixJQUFJLFFBQVEsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQzlCLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRTs7O3dCQUVoQixDQUFDLEdBQUcsT0FBTyxNQUFNLENBQUMsRUFBRSxDQUFDLEVBQUU7O3dCQUN2QixDQUFDLEdBQUcsR0FBRyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxNQUFNLENBQUM7b0JBRWpELElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTt3QkFDVCxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO3FCQUNsQjtnQkFDTCxDQUFDLENBQUMsQ0FBQTthQUNMO1NBQ0o7UUFFRCxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDZixPQUFPLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QixDQUFDLENBQUMsQ0FBQztRQUVILE9BQU8sUUFBUSxDQUFDO0lBQ3BCLENBQUM7Q0FDSjs7O0lBM0dHLHlDQUFvRDs7SUFFcEQsZ0NBQVk7O0lBQ1osaUNBQXVEOztJQUN2RCxrQ0FBNkM7O0lBQzdDLG1DQUFpQjs7SUFDakIsd0NBQW9COztJQUNwQixtQ0FBZTs7SUFDZix1Q0FBb0I7O0lBQ3BCLHlDQUFxQjs7SUFDckIsa0NBQXdGOztJQUd4RixzQ0FBNEI7O0lBQzVCLDBDQUFnQzs7SUFDaEMsNkNBQW1DOzs7OztJQUVuQyxxQ0FBZ0M7Ozs7O0lBQ2hDLGtDQUFxRDs7Ozs7Ozs7Ozs7Ozs7QUE4RnpELE1BQU0sVUFBVSwwQkFBMEIsQ0FBSSxXQUFtQixFQUFFLEdBQVcsRUFBRSxLQUF1RCxFQUFFLElBQXNELEVBQUUsU0FBaUIsRUFBRSxFQUFFLGFBQXNCLElBQUksRUFBRSxlQUF1QixDQUFDOztVQUNoUSxLQUFLLEdBQUcsSUFBSSxpQkFBaUIsRUFBRTtJQUVyQyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztJQUNoQixLQUFLLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztJQUNsQixLQUFLLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQztJQUNoQyxLQUFLLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztJQUN0QixLQUFLLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztJQUM5QixLQUFLLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQztJQUVsQzs7O09BR0c7SUFDSCxLQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBRXZCLE9BQU8sS0FBSyxDQUFDO0FBQ2pCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBdXRvY29tcGxldGVJdGVtLCBTZWFyY2hhYmxlQXV0b0NvbXBsZXRlSXRlbXMgfSBmcm9tICcuL0F1dG9jb21wbGV0ZUl0ZW0nO1xuaW1wb3J0IHsgVGVtcGxhdGVSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuZXhwb3J0IGNsYXNzIEF1dG9jb21wbGV0ZUdyb3VwIHtcbiAgICBpbml0aWFsVmFsdWU6IHsgW3ZhbHVlOiBzdHJpbmddOiBBdXRvY29tcGxldGVJdGVtIH07XG5cbiAgICBrZXk6IHN0cmluZztcbiAgICBrZXlzOiB7IHRpdGxlS2V5OiBzdHJpbmcsIGNoaWxkcmVuS2V5OiBzdHJpbmcgfCBudWxsIH07XG4gICAgdmFsdWU6IHsgW3ZhbHVlOiBzdHJpbmddOiBBdXRvY29tcGxldGVJdGVtIH07XG4gICAgcmVtb3ZlOiBzdHJpbmdbXTtcbiAgICBwbGFjZWhvbGRlcjogc3RyaW5nO1xuICAgIHBhcmVudDogc3RyaW5nO1xuICAgIGNvbXBsZXRpb246IGJvb2xlYW47XG4gICAgc2VhcmNoTGVuZ3RoOiBudW1iZXI7XG4gICAgYXN5bmM6IChzdHI6IHN0cmluZykgPT4gUHJvbWlzZTx7IGlkOiBzdHJpbmcgfCBudW1iZXI7IFt2YWx1ZTogc3RyaW5nXTogYW55IH1bXT4gPSBudWxsO1xuXG4gICAgLy8gVGVtcGxhdGVzXG4gICAgbm9SZXN1bHRzOiBUZW1wbGF0ZVJlZjxhbnk+O1xuICAgIGRyb3Bkb3duVmFsdWU6IFRlbXBsYXRlUmVmPGFueT47XG4gICAgcGxhY2Vob2xkZXJWYWx1ZTogVGVtcGxhdGVSZWY8YW55PjtcblxuICAgIHByaXZhdGUgcmVtb3ZhbHM6IHN0cmluZ1tdID0gW107XG4gICAgcHJpdmF0ZSBfY29weTogeyBbdmFsdWU6IHN0cmluZ106IEF1dG9jb21wbGV0ZUl0ZW0gfTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgU2V0TmV3VmFsdWUodmFsdWU6IHsgaWQ6IHN0cmluZyB8IG51bWJlcjsgW3ZhbHVlOiBzdHJpbmddOiBhbnkgfVtdLCB0aXRsZUtleTogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IFNlYXJjaGFibGVBdXRvQ29tcGxldGVJdGVtcyh2YWx1ZSwgdGl0bGVLZXkpO1xuICAgICAgICB0aGlzLlNldENvcHkodmFsdWVzKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLkZpbHRlclJlbW92YWxzKHRoaXMucmVtb3ZhbHMsIHZhbHVlcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBSZW1vdmFibGVzKGlkczogc3RyaW5nW10pIHtcbiAgICAgICAgdGhpcy5yZW1vdmFscyA9IGlkcztcblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLkZpbHRlclJlbW92YWxzKHRoaXMucmVtb3ZhbHMsIHRoaXMuX2NvcHkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgSW5pdGlhbFZhbHVlKCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5GaWx0ZXJSZW1vdmFscyh0aGlzLnJlbW92YWxzLCB0aGlzLmluaXRpYWxWYWx1ZSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlNldENvcHkodGhpcy5pbml0aWFsVmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgU2V0Q29weSh2YWx1ZXM6IHsgW3ZhbHVlOiBzdHJpbmddOiBBdXRvY29tcGxldGVJdGVtIH0pIHtcbiAgICAgICAgdGhpcy5fY29weSA9IE9iamVjdC5hc3NpZ24oW10sIHZhbHVlcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBTZXRWYWx1ZXModmFsdWU6IHsgaWQ/OiBzdHJpbmcgfCBudW1iZXI7IFt2YWx1ZTogc3RyaW5nXTogYW55IH1bXSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gU2VhcmNoYWJsZUF1dG9Db21wbGV0ZUl0ZW1zKHZhbHVlLCB0aGlzLmtleXMudGl0bGVLZXksIHRoaXMua2V5cy5jaGlsZHJlbktleSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmluaXRpYWxWYWx1ZSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMudmFsdWUpO1xuICAgICAgICB0aGlzLlNldENvcHkoT2JqZWN0LmFzc2lnbih7fSwgdGhpcy52YWx1ZSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgRmlsdGVyUmVtb3ZhbHMocmVtb3ZhbHM6IGFueVtdLCB2YWx1ZTogeyBbdmFsdWU6IHN0cmluZ106IEF1dG9jb21wbGV0ZUl0ZW0gfSk6IHsgW3ZhbHVlOiBzdHJpbmddOiBBdXRvY29tcGxldGVJdGVtIH0ge1xuICAgICAgICBsZXQgZmlsdGVyZWQgPSBPYmplY3QuYXNzaWduKHt9LCB2YWx1ZSk7XG5cbiAgICAgICAgbGV0IGtleSwga2V5cyA9IFtdO1xuICAgICAgICBmb3IgKGtleSBpbiBmaWx0ZXJlZCkge1xuICAgICAgICAgICAgaWYgKGZpbHRlcmVkLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICByZW1vdmFscy5mb3JFYWNoKChpZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBDb21wYXJhYmxlIHN0cmluZyBhbmQgSURcbiAgICAgICAgICAgICAgICAgICAgbGV0IGYgPSBgX2lkXyR7U3RyaW5nKGlkKX1gO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYyA9IGtleS5zdWJzdHJpbmcoa2V5LmluZGV4T2YoZiksIGtleS5sZW5ndGgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChmID09PSBjKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBrZXlzLmZvckVhY2goKGspID0+IHtcbiAgICAgICAgICAgIGRlbGV0ZSBmaWx0ZXJlZFtrXTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkO1xuICAgIH1cbn1cblxuLyoqXG4gKlxuICovXG5leHBvcnQgZnVuY3Rpb24gQ3JlYXRlTmV3QXV0b2NvbXBsZXRlR3JvdXA8VD4ocGxhY2Vob2xkZXI6IHN0cmluZywga2V5OiBzdHJpbmcsIHZhbHVlOiB7IGlkPzogc3RyaW5nIHwgbnVtYmVyOyBbdmFsdWU6IHN0cmluZ106IGFueSB9W10sIGtleXM6IHsgdGl0bGVLZXk6IHN0cmluZywgY2hpbGRyZW5LZXk6IHN0cmluZyB8IG51bGwgfSwgcGFyZW50OiBzdHJpbmcgPSAnJywgY29tcGxldGlvbjogYm9vbGVhbiA9IHRydWUsIHNlYXJjaExlbmd0aDogbnVtYmVyID0gMik6IEF1dG9jb21wbGV0ZUdyb3VwIHtcbiAgICBjb25zdCBncm91cCA9IG5ldyBBdXRvY29tcGxldGVHcm91cCgpO1xuXG4gICAgZ3JvdXAua2V5ID0ga2V5O1xuICAgIGdyb3VwLmtleXMgPSBrZXlzO1xuICAgIGdyb3VwLnBsYWNlaG9sZGVyID0gcGxhY2Vob2xkZXI7XG4gICAgZ3JvdXAucGFyZW50ID0gcGFyZW50O1xuICAgIGdyb3VwLmNvbXBsZXRpb24gPSBjb21wbGV0aW9uO1xuICAgIGdyb3VwLnNlYXJjaExlbmd0aCA9IHNlYXJjaExlbmd0aDtcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWwgdmFsdWUgbmVlZGVkLCBpZiB3ZSBlbXB0eSBzZWFyY2ggYm94IG9yIHdhbnQgdG8gY2xlYXIgaXQsIGl0IG5lZWRzIHRvIGJlIHJlc2V0LlxuICAgICAqIFNldHRpbmcgY29weSwgdXNlZCBpZiB1c2VyIHdhbnRzIHRvIHJlbW92ZSB2YWx1ZXMgKGJ5IGlkLikuIFRoaXMgXyBsaXN0IGdldHMgZmlsdGVyZWQuXG4gICAgICovXG4gICAgZ3JvdXAuU2V0VmFsdWVzKHZhbHVlKTtcblxuICAgIHJldHVybiBncm91cDtcbn1cbiJdfQ==