(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('rxjs/operators'), require('rxjs'), require('@angular/common'), require('@angular/forms')) :
    typeof define === 'function' && define.amd ? define('ng-auto-complete', ['exports', '@angular/core', 'rxjs/operators', 'rxjs', '@angular/common', '@angular/forms'], factory) :
    (factory((global['ng-auto-complete'] = {}),global.ng.core,global.rxjs.operators,global.rxjs,global.ng.common,global.ng.forms));
}(this, (function (exports,core,operators,rxjs,common,forms) { 'use strict';

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
    var __assign = function () {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s)
                    if (Object.prototype.hasOwnProperty.call(s, p))
                        t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };
    function __awaiter(thisArg, _arguments, P, generator) {
        return new (P || (P = Promise))(function (resolve, reject) {
            function fulfilled(value) { try {
                step(generator.next(value));
            }
            catch (e) {
                reject(e);
            } }
            function rejected(value) { try {
                step(generator["throw"](value));
            }
            catch (e) {
                reject(e);
            } }
            function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
            step((generator = generator.apply(thisArg, _arguments || [])).next());
        });
    }
    function __generator(thisArg, body) {
        var _ = { label: 0, sent: function () { if (t[0] & 1)
                throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
        return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function () { return this; }), g;
        function verb(n) { return function (v) { return step([n, v]); }; }
        function step(op) {
            if (f)
                throw new TypeError("Generator is already executing.");
            while (_)
                try {
                    if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)
                        return t;
                    if (y = 0, t)
                        op = [op[0] & 2, t.value];
                    switch (op[0]) {
                        case 0:
                        case 1:
                            t = op;
                            break;
                        case 4:
                            _.label++;
                            return { value: op[1], done: false };
                        case 5:
                            _.label++;
                            y = op[1];
                            op = [0];
                            continue;
                        case 7:
                            op = _.ops.pop();
                            _.trys.pop();
                            continue;
                        default:
                            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                                _ = 0;
                                continue;
                            }
                            if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {
                                _.label = op[1];
                                break;
                            }
                            if (op[0] === 6 && _.label < t[1]) {
                                _.label = t[1];
                                t = op;
                                break;
                            }
                            if (t && _.label < t[2]) {
                                _.label = t[2];
                                _.ops.push(op);
                                break;
                            }
                            if (t[2])
                                _.ops.pop();
                            _.trys.pop();
                            continue;
                    }
                    op = body.call(thisArg, _);
                }
                catch (e) {
                    op = [6, e];
                    y = 0;
                }
                finally {
                    f = t = 0;
                }
            if (op[0] & 5)
                throw op[1];
            return { value: op[0] ? op[1] : void 0, done: true };
        }
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AutocompleteItem = /** @class */ (function () {
        function AutocompleteItem(title, id, original) {
            this.title = title;
            this.id = id;
            this.original = original;
        }
        return AutocompleteItem;
    }());
    /**
     *
     * @param {?} items
     * @param {?} titleKey
     * @param {?=} childrenKey
     * @return {?}
     */
    function SearchableAutoCompleteItems(items, titleKey, childrenKey) {
        if (childrenKey === void 0) {
            childrenKey = null;
        }
        return items.reduce(function (r, i) {
            /** @type {?} */
            var t = SearchableAutoCompleteString(i[titleKey], i.id);
            if (typeof r[t] === 'undefined') {
                r[t] = TransformToAutocompleteItem(i, titleKey, childrenKey);
            }
            return r;
        }, {});
    }
    /**
     *
     * @param {?} key
     * @param {?} id
     * @return {?}
     */
    function SearchableAutoCompleteString(key, id) {
        return key.replace(/ /g, "_") + "_id_" + String(id);
    }
    /**
     *
     * @param {?} str
     * @return {?}
     */
    function ComparableAutoCompleteString(str) {
        return str.replace(/_/g, " ");
    }
    /**
     * object must have an ID
     * @param {?} object
     * @param {?} titleKey
     * @param {?=} childrenKey
     * @return {?}
     */
    function TransformToAutocompleteItem(object, titleKey, childrenKey) {
        if (childrenKey === void 0) {
            childrenKey = null;
        }
        /** @type {?} */
        var item = new AutocompleteItem(object[titleKey], object.id, object);
        /**
         * if there are children, add these.
         */
        if (childrenKey !== null)
            item.children = object[childrenKey];
        return item;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var UsedCodeList = {
        ArrowDown: 40,
        ArrowUp: 38,
        Enter: 13,
        Escape: 27,
        Tab: 9,
        MetaLeft: 91,
        AltLeft: 18,
        ControlLeft: 17,
        ShiftLeft: 16,
        ArrowLeft: 37,
        ArrowRight: 39,
        MetaRight: 93,
        AltRight: 18
    };
    /**
     *
     * @param {?} array
     * @return {?}
     */
    function ReturnStringArrayByID(array) {
        return array.reduce(function (result, item) {
            result.push(item.id.toString());
            return result;
        }, []);
    }
    /**
     *
     * @param {?} removals
     * @param {?} list
     * @return {?}
     */
    function FilterRemovals(removals, list) {
        return list.filter(function (item) {
            return removals.indexOf(item.id.toString()) <= -1;
        });
    }
    /**
     *
     * @return {?}
     */
    function IsMobileOrTablet() {
        /** @type {?} */
        var isMobile = false;
        if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)
            || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0, 4))) {
            isMobile = true;
        }
        return isMobile;
    }
    /**
     * @param {?} code
     * @return {?}
     */
    function NotUsedKey(code) {
        return typeof UsedCodeList[code] === 'undefined';
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var NgDropdownDirective = /** @class */ (function () {
        function NgDropdownDirective(_eref) {
            this._eref = _eref;
            this.list = [];
            this.active = null;
            this.input = null;
            this.element = null;
            this.key = '';
            this.completion = true;
            this.hover = new core.EventEmitter();
            this.selected = new core.EventEmitter();
            this.closed = new core.EventEmitter();
            this._open = false;
            this._list = [];
            this._class = '';
        }
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        NgDropdownDirective.prototype.ngOnInit = /**
         *
         * @return {?}
         */
            function () {
                var _this = this;
                this._class = "dr-item-" + this.key + "-";
                if (this.RefExists()) {
                    this.input.addEventListener('keydown', function (event) {
                        _this.keyDown(event);
                    });
                }
                if (!this.completion) {
                    document.addEventListener('keydown', function (event) {
                        if (_this._open) {
                            _this.keyDown(event);
                        }
                    });
                }
                if (!IsMobileOrTablet()) {
                    this._eref.nativeElement.addEventListener('mouseover', function (event) {
                        _this.OnMouseOver(event);
                    });
                }
                /**
                 *
                 */
                this.PrepareList();
            };
        /**
         *
         */
        /**
         *
         * @param {?} changes
         * @return {?}
         */
        NgDropdownDirective.prototype.ngOnChanges = /**
         *
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                if (typeof changes['active'] !== 'undefined' && !changes['active'].firstChange) {
                    this.PrepareList();
                }
                if (typeof changes['list'] !== 'undefined') {
                    this.list = changes['list'].currentValue;
                    /**
                     *
                     */
                    this.PrepareList();
                }
            };
        /**
         *
         */
        /**
         *
         * @param {?} event
         * @return {?}
         */
        NgDropdownDirective.prototype.keyDown = /**
         *
         * @param {?} event
         * @return {?}
         */
            function (event) {
                event.stopImmediatePropagation();
                event.stopPropagation();
                /**
                 *
                 */
                switch (event.code) {
                    case 'ArrowDown':
                        this.Open();
                        /**
                         *
                         */
                        this.SetActive(this.FindActive() + 1);
                        this.DropdownFocusAreaDown();
                        event.preventDefault();
                        break;
                    case 'ArrowUp':
                        this.Open();
                        /**
                         *
                         */
                        this.SetActive(this.FindActive() - 1);
                        this.DropdownFocusAreaUp();
                        event.preventDefault();
                        break;
                    case 'Enter':
                        this.EmitSelected();
                        this.Close(null, true);
                        event.preventDefault();
                        break;
                    case 'Escape':
                        this.Close(null, true);
                        event.preventDefault();
                        break;
                    case 'Tab':
                        if (!event.shiftKey) {
                            this.EmitSelected();
                        }
                        this.Close(null, true);
                        break;
                    default:
                        return;
                }
            };
        /**
         *
         */
        /**
         *
         * @param {?} event
         * @return {?}
         */
        NgDropdownDirective.prototype.OnMouseOver = /**
         *
         * @param {?} event
         * @return {?}
         */
            function (event) {
                // Mouse didn't actually move, so no logic needed.
                if (event.movementX == 0 && event.movementY == 0) {
                    return;
                }
                /**
                 *
                 * @type {?}
                 */
                var el = event.target || event.srcElement;
                if (el.id.length > 0 && el.id.includes(this._class)) {
                    this.SetActive(Number(el.id.slice(this._class.length, el.id.length)));
                }
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        NgDropdownDirective.prototype.EmitSelected = /**
         *
         * @return {?}
         */
            function () {
                if (this.FindActive() > -1) {
                    this.selected.emit(this._list[this.FindActive()].key);
                }
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        NgDropdownDirective.prototype.DropdownFocusAreaDown = /**
         *
         * @return {?}
         */
            function () {
                /** @type {?} */
                var scroll = this._eref.nativeElement.offsetHeight + this._eref.nativeElement.scrollTop;
                /**
                 *
                 */
                if ((this.GetElement(this.FindActive()).offsetTop + this.GetElement(this.FindActive()).offsetHeight) > scroll) {
                    this._eref.nativeElement.scrollTop = this.GetElement(this.FindActive()).offsetTop - (this._eref.nativeElement.offsetHeight - this.GetElement(this.FindActive()).offsetHeight);
                }
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        NgDropdownDirective.prototype.DropdownFocusAreaUp = /**
         *
         * @return {?}
         */
            function () {
                /** @type {?} */
                var scroll = this._eref.nativeElement.scrollTop;
                /**
                 *
                 */
                if (this.GetElement(this.FindActive()).offsetTop < scroll && scroll > 0) {
                    this._eref.nativeElement.scrollTop = this.GetElement(this.FindActive()).offsetTop;
                }
            };
        Object.defineProperty(NgDropdownDirective.prototype, "opened", {
            // =======================================================================//
            // ! Bindings                                                             //
            // =======================================================================//
            /**
             *
             */
            get: 
            // =======================================================================//
            // ! Bindings                                                             //
            // =======================================================================//
            /**
             *
             * @return {?}
             */
            function () {
                return this._open;
            },
            enumerable: true,
            configurable: true
        });
        // =======================================================================//
        // ! Listeners                                                            //
        // =======================================================================//
        /**
         *
         */
        // =======================================================================//
        // ! Listeners                                                            //
        // =======================================================================//
        /**
         *
         * @param {?} event
         * @param {?=} force
         * @return {?}
         */
        NgDropdownDirective.prototype.Close =
            // =======================================================================//
            // ! Listeners                                                            //
            // =======================================================================//
            /**
             *
             * @param {?} event
             * @param {?=} force
             * @return {?}
             */
            function (event, force) {
                var _this = this;
                if (force === void 0) {
                    force = false;
                }
                if (!this._open) {
                    return;
                }
                /** @type {?} */
                var close = function () {
                    _this._open = false;
                    /**
                     * Emit NULL so listening components know what to do.
                     */
                    _this.ClearActive();
                    _this.hover.emit(null);
                    _this.closed.emit();
                };
                if (force) {
                    close();
                    return;
                }
                if ((this._open && (!this.element.contains(event.target)))) {
                    close();
                }
            };
        // =======================================================================//
        // ! Utils                                                                //
        // =======================================================================//
        /**
         *
         */
        // =======================================================================//
        // ! Utils                                                                //
        // =======================================================================//
        /**
         *
         * @return {?}
         */
        NgDropdownDirective.prototype.Open =
            // =======================================================================//
            // ! Utils                                                                //
            // =======================================================================//
            /**
             *
             * @return {?}
             */
            function () {
                var _this = this;
                setTimeout(function () {
                    if (!_this._open && !_this._eref.nativeElement.classList.contains('is-initial-empty')) {
                        _this._open = true;
                        _this.PrepareList();
                        /**
                         *
                         */
                        if (_this.FindActive() < 0) {
                            _this._eref.nativeElement.scrollTop = 0;
                        }
                        else {
                            _this._eref.nativeElement.scrollTop = _this.GetElement(_this.FindActive()).offsetHeight * _this.FindActive();
                        }
                    }
                }, 0);
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        NgDropdownDirective.prototype.RefExists = /**
         *
         * @return {?}
         */
            function () {
                return typeof this.input !== 'undefined';
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        NgDropdownDirective.prototype.FindActive = /**
         *
         * @return {?}
         */
            function () {
                return this._list.reduce(function (result, item, index) {
                    if (item.active) {
                        result = index;
                    }
                    return result;
                }, -1);
            };
        /**
         *
         */
        /**
         *
         * @param {?} index
         * @return {?}
         */
        NgDropdownDirective.prototype.SetActive = /**
         *
         * @param {?} index
         * @return {?}
         */
            function (index) {
                if (index > this._list.length - 1 || index < 0)
                    return;
                /**
                 *
                 */
                this.ClearActive();
                this._list[index].active = true;
                this.hover.emit(this._list[index].key);
                /**
                 *
                 */
                this.GetElement(index).classList.add('active');
            };
        /**
         *
         */
        /**
         *
         * @param {?} index
         * @return {?}
         */
        NgDropdownDirective.prototype.GetElement = /**
         *
         * @param {?} index
         * @return {?}
         */
            function (index) {
                return this._eref.nativeElement.children[index];
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        NgDropdownDirective.prototype.ClearActive = /**
         *
         * @return {?}
         */
            function () {
                var _this = this;
                this._list.forEach(function (item, index) {
                    item.active = false;
                    /**
                     *
                     */
                    _this.GetElement(index).classList.remove('active');
                });
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        NgDropdownDirective.prototype.PrepareList = /**
         *
         * @return {?}
         */
            function () {
                var _this = this;
                this._list = Object.keys(this.list).map(function (key) {
                    return {
                        key: key,
                        active: _this.ActiveItem(key)
                    };
                });
                /**
                 *
                 */
                this.PrepareChildrenList();
            };
        /**
         *
         */
        /**
         *
         * @param {?} item
         * @return {?}
         */
        NgDropdownDirective.prototype.ActiveItem = /**
         *
         * @param {?} item
         * @return {?}
         */
            function (item) {
                return this.active !== null && item === this.active;
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        NgDropdownDirective.prototype.DetermineActiveClass = /**
         *
         * @return {?}
         */
            function () {
                var _this = this;
                this._list.forEach(function (item, index) {
                    if (typeof _this.GetElement(index) === 'undefined') {
                        return;
                    }
                    /**
                     *
                     */
                    _this.GetElement(index).classList.remove('active');
                    if (item.active)
                        _this.GetElement(index).classList.add('active');
                });
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        NgDropdownDirective.prototype.PrepareChildrenList = /**
         *
         * @return {?}
         */
            function () {
                var _this = this;
                /** @type {?} */
                var list = this._eref.nativeElement.children;
                setTimeout(function () {
                    for (var i = 0; i < list.length; i++) {
                        list[i].id = _this._class + i;
                    }
                }, 0);
                /**
                 *
                 */
                this.DetermineActiveClass();
            };
        /**
         *
         */
        /**
         *
         * @param {?} object
         * @return {?}
         */
        NgDropdownDirective.prototype.DeReference = /**
         *
         * @param {?} object
         * @return {?}
         */
            function (object) {
                var item = object.item;
                /**
                 *
                 */
                return Object.assign({}, __assign({}, item));
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        NgDropdownDirective.prototype.ngOnDestroy = /**
         *
         * @return {?}
         */
            function () {
                if (this.RefExists()) {
                    this.wheelHandler = this.removeEventListner.bind(this.input);
                    // this.input.removeEventListener('keydown');
                }
                if (!this.completion) {
                    this.wheelHandler = this.removeEventListner.bind(document);
                    // document.removeEventListener('keydown');
                }
                if (!IsMobileOrTablet()) {
                    this.wheelHandler = this.removeEventListner.bind(this._eref);
                    // this._eref.nativeElement.removeEventListener('mouseover');
                }
            };
        /**
         * @param {?} elem
         * @return {?}
         */
        NgDropdownDirective.prototype.removeEventListner = /**
         * @param {?} elem
         * @return {?}
         */
            function (elem) {
                elem.removeEventListener('wheel', this.wheelHandler, true);
            };
        NgDropdownDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[ngDropdown]'
                    },] }
        ];
        /** @nocollapse */
        NgDropdownDirective.ctorParameters = function () {
            return [
                { type: core.ElementRef }
            ];
        };
        NgDropdownDirective.propDecorators = {
            list: [{ type: core.Input }],
            active: [{ type: core.Input }],
            input: [{ type: core.Input }],
            element: [{ type: core.Input }],
            key: [{ type: core.Input }],
            completion: [{ type: core.Input }],
            hover: [{ type: core.Output }],
            selected: [{ type: core.Output }],
            closed: [{ type: core.Output }],
            opened: [{ type: core.HostBinding, args: ['class.open',] }],
            Close: [{ type: core.HostListener, args: ['document:click', ['$event'],] }]
        };
        return NgDropdownDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CompleterComponent = /** @class */ (function () {
        function CompleterComponent(_zone) {
            this._zone = _zone;
            this.cleared = new core.EventEmitter();
            this.selected = new core.EventEmitter();
            this.noResult = new core.EventEmitter();
            this.group = ( /** @type {?} */({}));
            this._change = new rxjs.Subject();
            this._items = {};
            this._completer = '';
            this._highlight = '';
            this._DOM = {
                notFound: ( /** @type {?} */(false)),
                empty: ( /** @type {?} */(false)),
                placeholder: ( /** @type {?} */(null)),
                selected: ( /** @type {?} */('')),
                isLoading: ( /** @type {?} */(false))
            };
        }
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        CompleterComponent.prototype.ngOnInit = /**
         *
         * @return {?}
         */
            function () {
                var _this = this;
                this._zone.runOutsideAngular(function () {
                    _this._change.pipe(operators.debounceTime(300))
                        .subscribe(function (value) {
                        _this._zone.run(function () {
                            if (_this.group.async !== null) {
                                _this.RunAsyncFunction(value);
                            }
                            else {
                                _this.OnModelChange(value);
                            }
                        });
                    });
                });
                this.SetItems();
            };
        /**
         * Only used when completion is off.
         */
        /**
         * Only used when completion is off.
         * @return {?}
         */
        CompleterComponent.prototype.RegisterClick = /**
         * Only used when completion is off.
         * @return {?}
         */
            function () {
                if (!this.group.completion) {
                    this.SwitchDropdownState();
                }
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        CompleterComponent.prototype.DropdownArray = /**
         *
         * @return {?}
         */
            function () {
                if (this.group.completion) {
                    this.SwitchDropdownState();
                }
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        CompleterComponent.prototype.SwitchDropdownState = /**
         *
         * @return {?}
         */
            function () {
                if (this.dropdown._open) {
                    this.CloseDropdown();
                    return;
                }
                /**
                 *
                 */
                this.OpenDropdown();
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        CompleterComponent.prototype.CloseDropdown = /**
         *
         * @return {?}
         */
            function () {
                this.dropdown._open = false;
                /**
                 *
                 */
                this._DOM.placeholder = null;
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        CompleterComponent.prototype.OpenDropdown = /**
         *
         * @return {?}
         */
            function () {
                this.dropdown.Open();
                /**
                 *
                 */
                this._DOM.placeholder = null;
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        CompleterComponent.prototype.SetItems = /**
         *
         * @return {?}
         */
            function () {
                this._items = this.group.value;
                this.IsInitialEmpty();
            };
        /**
         *
         */
        /**
         *
         * @param {?} item
         * @return {?}
         */
        CompleterComponent.prototype.SelectItem = /**
         *
         * @param {?} item
         * @return {?}
         */
            function (item) {
                /** @type {?} */
                var i;
                if (typeof item === 'string') {
                    i = this._items[item];
                    this._DOM.selected = item;
                }
                else {
                    i = item;
                    this._DOM.selected = SearchableAutoCompleteString(item.title, item.id);
                }
                this._completer = i.title;
                this._highlight = '';
                this.dropdown.Close(null, true);
                this.selected.emit({ group: { key: this.group.key }, item: i });
            };
        /**
         *
         */
        /**
         *
         * @param {?} value
         * @return {?}
         */
        CompleterComponent.prototype.RunAsyncFunction = /**
         *
         * @param {?} value
         * @return {?}
         */
            function (value) {
                return __awaiter(this, void 0, void 0, function () {
                    var values;
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                this._completer = value;
                                this._highlight = value;
                                this._DOM.selected = null;
                                if (!(value.length === 0))
                                    return [3 /*break*/, 1];
                                this.group.InitialValue();
                                this.ClearModel();
                                this.dropdown.Close('', true);
                                return [3 /*break*/, 3];
                            case 1:
                                if (!(value.length > this.group.searchLength))
                                    return [3 /*break*/, 3];
                                this._DOM.isLoading = true;
                                return [4 /*yield*/, this.group.async(value)];
                            case 2:
                                values = _a.sent();
                                this.group.SetNewValue(values, this.group.keys.titleKey);
                                this._DOM.isLoading = false;
                                this._items = this.group.value;
                                this.EmptySearch(this._items, value);
                                // User has typed something now, results could be shown. We need to remove the "is-initial-empty" class.
                                this.IsInitialEmpty();
                                this.dropdown.Open();
                                _a.label = 3;
                            case 3: return [2 /*return*/];
                        }
                    });
                });
            };
        /**
         *
         */
        /**
         *
         * @param {?} value
         * @return {?}
         */
        CompleterComponent.prototype.OnModelChange = /**
         *
         * @param {?} value
         * @return {?}
         */
            function (value) {
                this._completer = value;
                this._highlight = value;
                this._DOM.selected = null;
                if (value.length === 0) {
                    this.ClearModel();
                    this.dropdown.Close('', true);
                }
                else if (value.length > this.group.searchLength) {
                    this.CompareItemsAndSet(value);
                }
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        CompleterComponent.prototype.ClearModel = /**
         *
         * @return {?}
         */
            function () {
                this._DOM.selected = null;
                this._DOM.notFound = false;
                this.cleared.emit(this.group.key);
            };
        /**
         *
         */
        /**
         *
         * @param {?} value
         * @return {?}
         */
        CompleterComponent.prototype.CompareItemsAndSet = /**
         *
         * @param {?} value
         * @return {?}
         */
            function (value) {
                /** @type {?} */
                var obj = {};
                for (var key in this.group.value) {
                    if (ComparableAutoCompleteString(key).toLowerCase().indexOf(value.toLowerCase()) > -1) {
                        obj[key] = this.group.value[key];
                    }
                }
                this._items = obj;
                this.EmptySearch(this._items, value);
                // User has typed something now, results could be shown. We need to remove the "is-initial-empty" class.
                this.IsInitialEmpty();
                this.dropdown.Open();
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        CompleterComponent.prototype.OnInputBlurred = /**
         *
         * @return {?}
         */
            function () {
                if (!this.HasChosenValue()) {
                    /**
                     * Let component know completer input has been cleared -
                     * this function shows the list again, also resets children, if chosen.
                     */
                    this.OnModelChange('');
                }
            };
        /**
         *
         */
        /**
         *
         * @param {?} item
         * @return {?}
         */
        CompleterComponent.prototype.OnHoverDropdownItem = /**
         *
         * @param {?} item
         * @return {?}
         */
            function (item) {
                if (typeof item == 'string') {
                    this._DOM.placeholder = this._items[item];
                    return;
                }
                if (item == null) {
                    this._DOM.placeholder = null;
                    return;
                }
                this._DOM.placeholder = item;
            };
        // =======================================================================//
        // ! Utils                                                                //
        // =======================================================================//
        // =======================================================================//
        // ! Utils                                                                //
        // =======================================================================//
        /**
         * @return {?}
         */
        CompleterComponent.prototype.IsInitialEmpty =
            // =======================================================================//
            // ! Utils                                                                //
            // =======================================================================//
            /**
             * @return {?}
             */
            function () {
                if (Object.keys(this._items).length === 0 && this._completer.length === 0) {
                    this._DOM.empty = true;
                    return;
                }
                this._DOM.empty = false;
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        CompleterComponent.prototype.HasChosenValue = /**
         *
         * @return {?}
         */
            function () {
                return this._DOM.selected !== null;
            };
        /**
         *
         */
        /**
         *
         * @param {?} obj
         * @param {?} query
         * @return {?}
         */
        CompleterComponent.prototype.EmptySearch = /**
         *
         * @param {?} obj
         * @param {?} query
         * @return {?}
         */
            function (obj, query) {
                if (Object.keys(obj).length > 0) {
                    this._DOM.notFound = false;
                    return;
                }
                this._DOM.notFound = true;
                this.noResult.emit({ group: { key: this.group.key }, query: query });
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        CompleterComponent.prototype.ClearValue = /**
         *
         * @return {?}
         */
            function () {
                this._completer = '';
                this._DOM.selected = null;
                this.group.InitialValue();
                this.IsInitialEmpty();
                /**
                 *
                 */
                this.selected.emit({ group: { key: this.group.key }, item: null });
            };
        CompleterComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'ng-completer',
                        template: "\n        <div #element class=\"ng-autocomplete-dropdown\"\n             [ngClass]=\"{'open': dropdown._open, 'is-loading': _DOM.isLoading, 'is-async': group.async !== null}\">\n\n            <!--GROUP: {{group.key}}-->\n\n            <div class=\"ng-autocomplete-inputs\" (click)=\"RegisterClick()\"\n                 [ngClass]=\"{'completion-off': !group.completion}\">\n                <span class=\"ng-autocomplete-placeholder\"\n                      *ngIf=\"_DOM.placeholder\">\n                  <ng-container *ngIf=\"group.placeholderValue\">\n                      <ng-template *ngTemplateOutlet=\"group.placeholderValue; context: {$implicit: _DOM.placeholder}\"></ng-template>\n                  </ng-container>\n                  <ng-template [ngIf]=\"!group.placeholderValue\">\n                      {{_DOM.placeholder.title}}\n                  </ng-template>\n                </span>\n                <input #input type=\"text\" [placeholder]=\"group.placeholder\" name=\"completer\" [(ngModel)]=\"_completer\"\n                       (ngModelChange)=\"_change.next($event);\"\n                       [value]=\"_completer\"\n                       autocomplete=\"off\"\n                       (click)=\"OpenDropdown()\"\n                       (focus)=\"OpenDropdown()\" class=\"ng-autocomplete-input\">\n\n                <span [ngClass]=\"{'open': dropdown._open}\" class=\"ng-autocomplete-dropdown-icon\"\n                      (click)=\"DropdownArray()\"></span>\n            </div>\n\n            <div class=\"ng-dropdown\" ngDropdown [list]=\"_items\" [element]=\"element\" [input]=\"input\"\n                 [ngClass]=\"{'is-initial-empty': _DOM.empty}\"\n                 [active]=\"_DOM.selected\" [key]=\"group.key\"\n                 [completion]=\"group.completion\"\n                 (hover)=\"OnHoverDropdownItem($event)\"\n                 (selected)=\"SelectItem($event)\"\n                 (closed)=\"OnInputBlurred()\"\n            >\n                <div *ngIf=\"_DOM.notFound && group.noResults\" class=\"dropdown-item no-results\">\n                    <ng-container *ngIf=\"group.noResults\">\n                        <ng-template *ngTemplateOutlet=\"group.noResults; context: {$implicit: _completer}\"></ng-template>\n                    </ng-container>\n                </div>\n\n                <div class=\"dropdown-item\" *ngFor=\"let item of _items | keys; let i = index\"\n                     (click)=\"SelectItem(_items[item])\">\n\n                    <ng-container *ngIf=\"group.dropdownValue\">\n                        <ng-template\n                            *ngTemplateOutlet=\"group.dropdownValue; context: {$implicit: _items[item], highlight: _items[item].title | highlight:_highlight}\"></ng-template>\n                    </ng-container>\n\n                    <div *ngIf=\"!group.dropdownValue\" [innerHTML]=\"_items[item].title | highlight:_highlight\"></div>\n                </div>\n            </div>\n        </div>",
                        styles: ["\n        .ng-autocomplete-inputs {\n            position: relative;\n        }\n\n        .ng-autocomplete-inputs.completion-off {\n            cursor: pointer;\n        }\n\n        .ng-autocomplete-inputs.completion-off input {\n            pointer-events: none;\n        }\n\n        .ng-autocomplete-placeholder {\n            pointer-events: none;\n        }\n\n        .ng-autocomplete-dropdown-icon {\n\n        }\n\n        .ng-autocomplete-dropdown .ng-dropdown {\n            display: none;\n        }\n\n        .ng-autocomplete-dropdown .ng-dropdown.is-empty {\n            display: none;\n        }\n\n        .ng-autocomplete-dropdown .ng-dropdown.open {\n            display: block;\n        }\n    "]
                    }] }
        ];
        /** @nocollapse */
        CompleterComponent.ctorParameters = function () {
            return [
                { type: core.NgZone }
            ];
        };
        CompleterComponent.propDecorators = {
            dropdown: [{ type: core.ViewChild, args: [NgDropdownDirective,] }],
            cleared: [{ type: core.Output }],
            selected: [{ type: core.Output }],
            noResult: [{ type: core.Output, args: ['no-result',] }],
            group: [{ type: core.Input }]
        };
        return CompleterComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var NgAutoCompleteComponent = /** @class */ (function () {
        function NgAutoCompleteComponent(cdr) {
            this.cdr = cdr;
            this.selected = new core.EventEmitter();
            this.noResult = new core.EventEmitter();
            this.group = [];
            this.key = '';
            this.classes = [];
            this._viewHasBeenInit = false;
            this._viewInitSubject = new rxjs.Subject();
        }
        /**
         * @param {?} changes
         * @return {?}
         */
        NgAutoCompleteComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        NgAutoCompleteComponent.prototype.ngOnInit = /**
         *
         * @return {?}
         */
            function () {
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        NgAutoCompleteComponent.prototype.ngAfterViewChecked = /**
         *
         * @return {?}
         */
            function () {
                if (!this._viewHasBeenInit) {
                    /** @type {?} */
                    var el = this.init.nativeElement.querySelector('.after-view-init');
                    if (window.getComputedStyle(el).length > 0) {
                        this._viewHasBeenInit = true;
                        this._viewInitSubject.next(true);
                    }
                }
            };
        /**
         *
         */
        /**
         *
         * @param {?} selected
         * @return {?}
         */
        NgAutoCompleteComponent.prototype.ListenToSelected = /**
         *
         * @param {?} selected
         * @return {?}
         */
            function (selected) {
                this.selected.emit(selected);
                /**
                 *
                 */
                this.SetChildren(selected);
            };
        /**
         *
         */
        /**
         *
         * @param {?} group
         * @return {?}
         */
        NgAutoCompleteComponent.prototype.NoResult = /**
         *
         * @param {?} group
         * @return {?}
         */
            function (group) {
                this.noResult.emit(group);
            };
        /**
         *
         */
        /**
         *
         * @param {?} key
         * @return {?}
         */
        NgAutoCompleteComponent.prototype.InputCleared = /**
         *
         * @param {?} key
         * @return {?}
         */
            function (key) {
                var _this = this;
                this.group.forEach(function (group) {
                    if (group.key === key || group.parent === key) {
                        _this.ResetInput(group.key);
                    }
                });
                /**
                 * Items may have changed, need to te re-set list in completer components.
                 */
                this.TriggerChange();
            };
        /**
         *
         */
        /**
         *
         * @param {?} selected
         * @return {?}
         */
        NgAutoCompleteComponent.prototype.SetChildren = /**
         *
         * @param {?} selected
         * @return {?}
         */
            function (selected) {
                var _this = this;
                this.group.forEach(function (item) {
                    if (item.parent == selected.group.key) {
                        _this.ResetInput(item.key);
                        /**
                         *
                         */
                        if (selected.item !== null && typeof selected.item.children !== 'undefined') {
                            item.SetNewValue(selected.item.children, selected.group.keys.titleKey);
                        }
                    }
                });
                /**
                 * Items may have changed, need to te re-set list in completer components.
                 */
                this.TriggerChange();
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        NgAutoCompleteComponent.prototype.TriggerChange = /**
         *
         * @return {?}
         */
            function () {
                this.completers.forEach(function (completer) {
                    completer.SetItems();
                });
            };
        // =======================================================================//
        // ! Utils                                                                //
        // =======================================================================//
        /**
         *
         */
        // =======================================================================//
        // ! Utils                                                                //
        // =======================================================================//
        /**
         *
         * @param {?} key
         * @return {?}
         */
        NgAutoCompleteComponent.prototype.GetInput =
            // =======================================================================//
            // ! Utils                                                                //
            // =======================================================================//
            /**
             *
             * @param {?} key
             * @return {?}
             */
            function (key) {
                return this.completers.reduce(function (result, completer) {
                    if (completer.group.key === key) {
                        result = completer;
                    }
                    return result;
                }, ( /** @type {?} */({})));
            };
        /**
         *
         */
        /**
         *
         * @param {?} key
         * @param {?} f
         * @return {?}
         */
        NgAutoCompleteComponent.prototype.SubscribeInput = /**
         *
         * @param {?} key
         * @param {?} f
         * @return {?}
         */
            function (key, f) {
                var _this = this;
                if (this._viewHasBeenInit) {
                    /** @type {?} */
                    var completer = this.GetInput(key);
                    /**
                     *
                     */
                    f(completer);
                    return;
                }
                this._viewInitSubject.subscribe(function (_bool) {
                    /** @type {?} */
                    var completer = _this.GetInput(key);
                    setTimeout(function () {
                        f(completer);
                    });
                    _this._viewInitSubject.unsubscribe();
                });
            };
        /**
         *
         */
        /**
         *
         * @param {?} key
         * @return {?}
         */
        NgAutoCompleteComponent.prototype.ResetInput = /**
         *
         * @param {?} key
         * @return {?}
         */
            function (key) {
                this.SubscribeInput(key, function (completer) {
                    completer.ClearValue();
                });
            };
        /**
         *
         */
        /**
         *
         * @param {?} key
         * @param {?} values
         * @return {?}
         */
        NgAutoCompleteComponent.prototype.SetValues = /**
         *
         * @param {?} key
         * @param {?} values
         * @return {?}
         */
            function (key, values) {
                var _this = this;
                this.SubscribeInput(key, function (completer) {
                    completer.group.SetValues(values);
                    /**
                     * Items may have changed, need to te re-set list in completer components.
                     */
                    _this.TriggerChange();
                });
            };
        /**
         *
         */
        /**
         *
         * @param {?} key
         * @param {?} type
         * @param {?} template
         * @return {?}
         */
        NgAutoCompleteComponent.prototype.SetTemplate = /**
         *
         * @param {?} key
         * @param {?} type
         * @param {?} template
         * @return {?}
         */
            function (key, type, template) {
                var _this = this;
                this.SubscribeInput(key, function (completer) {
                    completer.group[type] = template;
                    /**
                     * Items may have changed, need to te re-set list in completer components.
                     */
                    _this.TriggerChange();
                });
            };
        /**
         *
         */
        /**
         *
         * @param {?} key
         * @param {?} promise
         * @return {?}
         */
        NgAutoCompleteComponent.prototype.SetAsync = /**
         *
         * @param {?} key
         * @param {?} promise
         * @return {?}
         */
            function (key, promise) {
                var _this = this;
                this.SubscribeInput(key, function (completer) {
                    completer.group.async = promise;
                    /**
                     * Items may have changed, need to te re-set list in completer components.
                     */
                    _this.TriggerChange();
                });
            };
        /**
         *
         */
        /**
         *
         * @param {?} key
         * @param {?} id
         * @return {?}
         */
        NgAutoCompleteComponent.prototype.SelectItem = /**
         *
         * @param {?} key
         * @param {?} id
         * @return {?}
         */
            function (key, id) {
                this.SubscribeInput(key, function (completer) {
                    Object.keys(completer._items).forEach(function (key) {
                        /** @type {?} */
                        var f = "_id_" + String(id);
                        /** @type {?} */
                        var c = key.substring(key.indexOf(f), key.length);
                        if (f === c) {
                            completer.SelectItem(completer._items[key]);
                        }
                    });
                });
            };
        /**
         *
         */
        /**
         *
         * @param {?} key
         * @param {?} ids
         * @return {?}
         */
        NgAutoCompleteComponent.prototype.RemovableValues = /**
         *
         * @param {?} key
         * @param {?} ids
         * @return {?}
         */
            function (key, ids) {
                var _this = this;
                this.SubscribeInput(key, function (completer) {
                    completer.group.Removables(ReturnStringArrayByID(ids));
                    /**
                     * Items may have changed, need to te re-set list in completer components.
                     */
                    _this.TriggerChange();
                });
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        NgAutoCompleteComponent.prototype.ResetInputs = /**
         *
         * @return {?}
         */
            function () {
                var _this = this;
                this.group.forEach(function (item) {
                    _this.ResetInput(item.key);
                });
            };
        // =======================================================================//
        // ! Static (utils)                                                       //
        // =======================================================================//
        /**
         *
         */
        // =======================================================================//
        // ! Static (utils)                                                       //
        // =======================================================================//
        /**
         *
         * @param {?} key
         * @param {?} list
         * @return {?}
         */
        NgAutoCompleteComponent.FindCompleter =
            // =======================================================================//
            // ! Static (utils)                                                       //
            // =======================================================================//
            /**
             *
             * @param {?} key
             * @param {?} list
             * @return {?}
             */
            function (key, list) {
                /** @type {?} */
                var completer = list.filter(function (completer) {
                    return key === completer.key;
                });
                if (typeof completer[0] !== 'undefined') {
                    return completer[0];
                }
                return null;
            };
        NgAutoCompleteComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'ng-auto-complete',
                        template: "\n        <div #init style=\"display: none;\"><span class=\"after-view-init\"></span></div>\n        <ng-completer [ngClass]=\"classes\" *ngFor=\"let item of group\" (cleared)=\"InputCleared($event)\"\n                      (no-result)=\"NoResult($event)\"\n                      (selected)=\"ListenToSelected($event)\"\n                      [group]=\"item\"></ng-completer>\n    "
                    }] }
        ];
        /** @nocollapse */
        NgAutoCompleteComponent.ctorParameters = function () {
            return [
                { type: core.ChangeDetectorRef }
            ];
        };
        NgAutoCompleteComponent.propDecorators = {
            completers: [{ type: core.ViewChildren, args: [CompleterComponent,] }],
            init: [{ type: core.ViewChild, args: ['init',] }],
            selected: [{ type: core.Output }],
            noResult: [{ type: core.Output, args: ['no-result',] }],
            group: [{ type: core.Input }],
            key: [{ type: core.Input }],
            classes: [{ type: core.Input }]
        };
        return NgAutoCompleteComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var HighlightPipe = /** @class */ (function () {
        function HighlightPipe() {
        }
        /**
         * @param {?} text
         * @param {?} search
         * @return {?}
         */
        HighlightPipe.prototype.transform = /**
         * @param {?} text
         * @param {?} search
         * @return {?}
         */
            function (text, search) {
                if (typeof search === 'undefined') {
                    return text;
                }
                /** @type {?} */
                var pattern = search.replace(/[\-\[\]\/{}()*+?.\\^$|]/g, '\\$&');
                pattern = pattern.split(' ').filter(function (t) { return t.length > 0; }).join('|');
                /**
                 *
                 */
                return text.replace(new RegExp(pattern, 'gi'), function (match) { return "<span class=\"dropdown-item-highlight\">" + match + "</span>"; });
            };
        HighlightPipe.decorators = [
            { type: core.Pipe, args: [{
                        name: 'highlight'
                    },] }
        ];
        return HighlightPipe;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var KeyValuePipe = /** @class */ (function () {
        function KeyValuePipe() {
        }
        /**
         * @param {?} value
         * @param {?=} args
         * @return {?}
         */
        KeyValuePipe.prototype.transform = /**
         * @param {?} value
         * @param {?=} args
         * @return {?}
         */
            function (value, args) {
                /** @type {?} */
                var keys = [];
                for (var key in value) {
                    if (value.hasOwnProperty(key)) {
                        keys.push(key);
                    }
                }
                return keys;
            };
        KeyValuePipe.decorators = [
            { type: core.Pipe, args: [{
                        name: 'keys'
                    },] }
        ];
        return KeyValuePipe;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PipeModule = /** @class */ (function () {
        function PipeModule() {
        }
        /**
         * @return {?}
         */
        PipeModule.forRoot = /**
         * @return {?}
         */
            function () {
                return {
                    ngModule: PipeModule,
                    providers: [],
                };
            };
        PipeModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [],
                        declarations: [HighlightPipe, KeyValuePipe],
                        exports: [HighlightPipe, KeyValuePipe],
                    },] }
        ];
        return PipeModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var NgAutoCompleteModule = /** @class */ (function () {
        function NgAutoCompleteModule() {
        }
        NgAutoCompleteModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            forms.FormsModule,
                            PipeModule.forRoot()
                        ],
                        exports: [
                            NgAutoCompleteComponent,
                            CompleterComponent,
                        ],
                        declarations: [
                            NgAutoCompleteComponent,
                            CompleterComponent,
                            NgDropdownDirective
                        ]
                    },] }
        ];
        return NgAutoCompleteModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AutocompleteGroup = /** @class */ (function () {
        function AutocompleteGroup() {
            this.async = null;
            this.removals = [];
        }
        /**
         *
         */
        /**
         *
         * @param {?} value
         * @param {?} titleKey
         * @return {?}
         */
        AutocompleteGroup.prototype.SetNewValue = /**
         *
         * @param {?} value
         * @param {?} titleKey
         * @return {?}
         */
            function (value, titleKey) {
                /** @type {?} */
                var values = SearchableAutoCompleteItems(value, titleKey);
                this.SetCopy(values);
                /**
                 *
                 */
                this.value = this.FilterRemovals(this.removals, values);
            };
        /**
         *
         */
        /**
         *
         * @param {?} ids
         * @return {?}
         */
        AutocompleteGroup.prototype.Removables = /**
         *
         * @param {?} ids
         * @return {?}
         */
            function (ids) {
                this.removals = ids;
                /**
                 *
                 */
                this.value = this.FilterRemovals(this.removals, this._copy);
            };
        /**
         *
         */
        /**
         *
         * @return {?}
         */
        AutocompleteGroup.prototype.InitialValue = /**
         *
         * @return {?}
         */
            function () {
                this.value = this.FilterRemovals(this.removals, this.initialValue);
                /**
                 *
                 */
                this.SetCopy(this.initialValue);
            };
        /**
         *
         */
        /**
         *
         * @param {?} values
         * @return {?}
         */
        AutocompleteGroup.prototype.SetCopy = /**
         *
         * @param {?} values
         * @return {?}
         */
            function (values) {
                this._copy = Object.assign([], values);
            };
        /**
         *
         */
        /**
         *
         * @param {?} value
         * @return {?}
         */
        AutocompleteGroup.prototype.SetValues = /**
         *
         * @param {?} value
         * @return {?}
         */
            function (value) {
                this.value = SearchableAutoCompleteItems(value, this.keys.titleKey, this.keys.childrenKey);
                /**
                 *
                 */
                this.initialValue = Object.assign({}, this.value);
                this.SetCopy(Object.assign({}, this.value));
            };
        /**
         *
         */
        /**
         *
         * @param {?} removals
         * @param {?} value
         * @return {?}
         */
        AutocompleteGroup.prototype.FilterRemovals = /**
         *
         * @param {?} removals
         * @param {?} value
         * @return {?}
         */
            function (removals, value) {
                /** @type {?} */
                var filtered = Object.assign({}, value);
                /** @type {?} */
                var key;
                /** @type {?} */
                var keys = [];
                for (key in filtered) {
                    if (filtered.hasOwnProperty(key)) {
                        removals.forEach(function (id) {
                            // Comparable string and ID
                            /** @type {?} */
                            var f = "_id_" + String(id);
                            /** @type {?} */
                            var c = key.substring(key.indexOf(f), key.length);
                            if (f === c) {
                                keys.push(key);
                            }
                        });
                    }
                }
                keys.forEach(function (k) {
                    delete filtered[k];
                });
                return filtered;
            };
        return AutocompleteGroup;
    }());
    /**
     *
     * @template T
     * @param {?} placeholder
     * @param {?} key
     * @param {?} value
     * @param {?} keys
     * @param {?=} parent
     * @param {?=} completion
     * @param {?=} searchLength
     * @return {?}
     */
    function CreateNewAutocompleteGroup(placeholder, key, value, keys, parent, completion, searchLength) {
        if (parent === void 0) {
            parent = '';
        }
        if (completion === void 0) {
            completion = true;
        }
        if (searchLength === void 0) {
            searchLength = 2;
        }
        /** @type {?} */
        var group = new AutocompleteGroup();
        group.key = key;
        group.keys = keys;
        group.placeholder = placeholder;
        group.parent = parent;
        group.completion = completion;
        group.searchLength = searchLength;
        /**
         * Initial value needed, if we empty search box or want to clear it, it needs to be reset.
         * Setting copy, used if user wants to remove values (by id.). This _ list gets filtered.
         */
        group.SetValues(value);
        return group;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    exports.NgAutoCompleteComponent = NgAutoCompleteComponent;
    exports.NgAutoCompleteModule = NgAutoCompleteModule;
    exports.PipeModule = PipeModule;
    exports.SearchableAutoCompleteItems = SearchableAutoCompleteItems;
    exports.SearchableAutoCompleteString = SearchableAutoCompleteString;
    exports.ComparableAutoCompleteString = ComparableAutoCompleteString;
    exports.TransformToAutocompleteItem = TransformToAutocompleteItem;
    exports.AutocompleteItem = AutocompleteItem;
    exports.CreateNewAutocompleteGroup = CreateNewAutocompleteGroup;
    exports.AutocompleteGroup = AutocompleteGroup;
    exports.ReturnStringArrayByID = ReturnStringArrayByID;
    exports.FilterRemovals = FilterRemovals;
    exports.IsMobileOrTablet = IsMobileOrTablet;
    exports.NotUsedKey = NotUsedKey;
    exports.a = CompleterComponent;
    exports.b = NgDropdownDirective;
    exports.c = HighlightPipe;
    exports.d = KeyValuePipe;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctYXV0by1jb21wbGV0ZS51bWQuanMubWFwIiwic291cmNlcyI6WyJub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwibmc6Ly9uZy1hdXRvLWNvbXBsZXRlL2xpYi9jbGFzc2VzL0F1dG9jb21wbGV0ZUl0ZW0udHMiLCJuZzovL25nLWF1dG8tY29tcGxldGUvbGliL3V0aWxzL3V0aWxzLnRzIiwibmc6Ly9uZy1hdXRvLWNvbXBsZXRlL2xpYi9kcm9wZG93bi9uZy1kcm9wZG93bi5kaXJlY3RpdmUudHMiLCJuZzovL25nLWF1dG8tY29tcGxldGUvbGliL2NvbXBsZXRlci9jb21wbGV0ZXIuY29tcG9uZW50LnRzIiwibmc6Ly9uZy1hdXRvLWNvbXBsZXRlL2xpYi9uZy1hdXRvLWNvbXBsZXRlLmNvbXBvbmVudC50cyIsIm5nOi8vbmctYXV0by1jb21wbGV0ZS9saWIvcGlwZXMvaGlnaGxpZ2h0LnRzIiwibmc6Ly9uZy1hdXRvLWNvbXBsZXRlL2xpYi9waXBlcy9rZXktdmFsdWUudHMiLCJuZzovL25nLWF1dG8tY29tcGxldGUvbGliL3BpcGVzL3BpcGVzLm1vZHVsZS50cyIsIm5nOi8vbmctYXV0by1jb21wbGV0ZS9saWIvbmctYXV0by1jb21wbGV0ZS5tb2R1bGUudHMiLCJuZzovL25nLWF1dG8tY29tcGxldGUvbGliL2NsYXNzZXMvQXV0b2NvbXBsZXRlR3JvdXAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIGlmIChlLmluZGV4T2YocFtpXSkgPCAwKVxyXG4gICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG4iLCJleHBvcnQgaW50ZXJmYWNlIFN0cmlwcGVkQXV0b2NvbXBsZXRlR3JvdXAge1xuICAgIGdyb3VwOiB7IGtleTogc3RyaW5nIH0sXG4gICAgaXRlbTogQXV0b2NvbXBsZXRlSXRlbVxufVxuXG5leHBvcnQgY2xhc3MgQXV0b2NvbXBsZXRlSXRlbSB7XG5cbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGlkPzogc3RyaW5nIHwgbnVtYmVyO1xuICAgIGNoaWxkcmVuOiBhbnlbXTtcbiAgICBvcmlnaW5hbDogYW55O1xuXG4gICAgY29uc3RydWN0b3IodGl0bGU6IHN0cmluZywgaWQ6IHN0cmluZyB8IG51bWJlciwgb3JpZ2luYWw6IGFueSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5vcmlnaW5hbCA9IG9yaWdpbmFsO1xuICAgIH1cbn1cblxuLyoqXG4gKlxuICovXG5leHBvcnQgZnVuY3Rpb24gU2VhcmNoYWJsZUF1dG9Db21wbGV0ZUl0ZW1zKGl0ZW1zOiB7IGlkPzogc3RyaW5nfG51bWJlcjsgW3ZhbHVlOiBzdHJpbmddOiBhbnkgfVtdLCB0aXRsZUtleTogc3RyaW5nLCBjaGlsZHJlbktleTogc3RyaW5nIHwgbnVsbCA9IG51bGwpOiB7W3ZhbHVlOiBzdHJpbmddOiBBdXRvY29tcGxldGVJdGVtfSB7XG4gICAgcmV0dXJuIGl0ZW1zLnJlZHVjZShmdW5jdGlvbiAociwgaSkge1xuICAgICAgICBjb25zdCB0ID0gU2VhcmNoYWJsZUF1dG9Db21wbGV0ZVN0cmluZyhpW3RpdGxlS2V5XSwgaS5pZCk7XG5cbiAgICAgICAgaWYodHlwZW9mIHJbdF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByW3RdID0gVHJhbnNmb3JtVG9BdXRvY29tcGxldGVJdGVtKGksIHRpdGxlS2V5LCBjaGlsZHJlbktleSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByO1xuICAgIH0sIHt9KVxufVxuXG4vKipcbiAqXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBTZWFyY2hhYmxlQXV0b0NvbXBsZXRlU3RyaW5nKGtleTogc3RyaW5nLCBpZDogc3RyaW5nfG51bWJlcikge1xuICAgIHJldHVybiBgJHtrZXkucmVwbGFjZSgvIC9nLFwiX1wiKX1faWRfJHtTdHJpbmcoaWQpfWA7XG59XG5cbi8qKlxuICpcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIENvbXBhcmFibGVBdXRvQ29tcGxldGVTdHJpbmcoc3RyOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoL18vZyxcIiBcIik7XG59XG5cbi8qKlxuICogb2JqZWN0IG11c3QgaGF2ZSBhbiBJRFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBUcmFuc2Zvcm1Ub0F1dG9jb21wbGV0ZUl0ZW0ob2JqZWN0OiB7IGlkPzogc3RyaW5nIHwgbnVtYmVyOyBbdmFsdWU6IHN0cmluZ106IGFueSB9LCB0aXRsZUtleTogc3RyaW5nLCBjaGlsZHJlbktleTogc3RyaW5nIHwgbnVsbCA9IG51bGwpIHtcbiAgICBjb25zdCBpdGVtID0gbmV3IEF1dG9jb21wbGV0ZUl0ZW0ob2JqZWN0W3RpdGxlS2V5XSwgb2JqZWN0LmlkLCBvYmplY3QpO1xuXG4gICAgLyoqXG4gICAgICogaWYgdGhlcmUgYXJlIGNoaWxkcmVuLCBhZGQgdGhlc2UuXG4gICAgICovXG4gICAgaWYgKGNoaWxkcmVuS2V5ICE9PSBudWxsKSBpdGVtLmNoaWxkcmVuID0gb2JqZWN0W2NoaWxkcmVuS2V5XTtcblxuICAgIHJldHVybiBpdGVtXG59XG4iLCJpbXBvcnQgeyBBdXRvY29tcGxldGVJdGVtIH0gZnJvbSAnLi4vY2xhc3Nlcy9BdXRvY29tcGxldGVJdGVtJztcblxuY29uc3QgVXNlZENvZGVMaXN0ID0ge1xuICAgIEFycm93RG93bjogICAgICA0MCxcbiAgICBBcnJvd1VwOiAgICAgICAgMzgsXG4gICAgRW50ZXI6ICAgICAgICAgIDEzLFxuICAgIEVzY2FwZTogICAgICAgICAyNyxcbiAgICBUYWI6ICAgICAgICAgICAgOSxcbiAgICBNZXRhTGVmdDogICAgICAgOTEsXG4gICAgQWx0TGVmdDogICAgICAgIDE4LFxuICAgIENvbnRyb2xMZWZ0OiAgICAxNyxcbiAgICBTaGlmdExlZnQ6ICAgICAgMTYsXG4gICAgQXJyb3dMZWZ0OiAgICAgIDM3LFxuICAgIEFycm93UmlnaHQ6ICAgICAzOSxcbiAgICBNZXRhUmlnaHQ6ICAgICAgOTMsXG4gICAgQWx0UmlnaHQ6ICAgICAgIDE4XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIEdyb3VwTm9SZXN1bHQge1xuICAgIGdyb3VwOiB7a2V5OiBzdHJpbmd9O1xuICAgIHF1ZXJ5OiBzdHJpbmc7XG59XG5cbi8qKlxuICpcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFJldHVyblN0cmluZ0FycmF5QnlJRChhcnJheTogeyBpZDogc3RyaW5nIHwgbnVtYmVyLCBbdmFsdWU6IHN0cmluZ106IGFueSB9W10pIHtcbiAgICByZXR1cm4gYXJyYXkucmVkdWNlKChyZXN1bHQsIGl0ZW0pID0+IHtcbiAgICAgICAgcmVzdWx0LnB1c2goaXRlbS5pZC50b1N0cmluZygpKTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfSwgW10pXG59XG5cbi8qKlxuICpcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEZpbHRlclJlbW92YWxzKHJlbW92YWxzOiBzdHJpbmdbXSwgbGlzdDogQXV0b2NvbXBsZXRlSXRlbVtdKSB7XG4gICAgcmV0dXJuIGxpc3QuZmlsdGVyKChpdGVtKSA9PiB7XG4gICAgICAgIHJldHVybiByZW1vdmFscy5pbmRleE9mKGl0ZW0uaWQudG9TdHJpbmcoKSkgPD0gLTE7XG4gICAgfSk7XG59XG5cbi8qKlxuICpcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIElzTW9iaWxlT3JUYWJsZXQoKSB7XG4gICAgbGV0IGlzTW9iaWxlID0gZmFsc2U7XG4gICAgaWYgKC8oYW5kcm9pZHxiYlxcZCt8bWVlZ28pLittb2JpbGV8YXZhbnRnb3xiYWRhXFwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfG9kKXxpcGFkfGlyaXN8a2luZGxlfEFuZHJvaWR8U2lsa3xsZ2UgfG1hZW1vfG1pZHB8bW1wfG5ldGZyb250fG9wZXJhIG0ob2J8aW4paXxwYWxtKCBvcyk/fHBob25lfHAoaXhpfHJlKVxcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIChjZXxwaG9uZSl8eGRhfHhpaW5vL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuICAgICAgICB8fCAvMTIwN3w2MzEwfDY1OTB8M2dzb3w0dGhwfDUwWzEtNl1pfDc3MHN8ODAyc3xhIHdhfGFiYWN8YWMoZXJ8b298c1xcLSl8YWkoa298cm4pfGFsKGF2fGNhfGNvKXxhbW9pfGFuKGV4fG55fHl3KXxhcHR1fGFyKGNofGdvKXxhcyh0ZXx1cyl8YXR0d3xhdShkaXxcXC1tfHIgfHMgKXxhdmFufGJlKGNrfGxsfG5xKXxiaShsYnxyZCl8YmwoYWN8YXopfGJyKGV8dil3fGJ1bWJ8YndcXC0obnx1KXxjNTVcXC98Y2FwaXxjY3dhfGNkbVxcLXxjZWxsfGNodG18Y2xkY3xjbWRcXC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGNcXC1zfGRldml8ZGljYXxkbW9ifGRvKGN8cClvfGRzKDEyfFxcLWQpfGVsKDQ5fGFpKXxlbShsMnx1bCl8ZXIoaWN8azApfGVzbDh8ZXooWzQtN10wfG9zfHdhfHplKXxmZXRjfGZseShcXC18Xyl8ZzEgdXxnNTYwfGdlbmV8Z2ZcXC01fGdcXC1tb3xnbyhcXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkXFwtKG18cHx0KXxoZWlcXC18aGkocHR8dGEpfGhwKCBpfGlwKXxoc1xcLWN8aHQoYyhcXC18IHxffGF8Z3xwfHN8dCl8dHApfGh1KGF3fHRjKXxpXFwtKDIwfGdvfG1hKXxpMjMwfGlhYyggfFxcLXxcXC8pfGlicm98aWRlYXxpZzAxfGlrb218aW0xa3xpbm5vfGlwYXF8aXJpc3xqYSh0fHYpYXxqYnJvfGplbXV8amlnc3xrZGRpfGtlaml8a2d0KCB8XFwvKXxrbG9ufGtwdCB8a3djXFwtfGt5byhjfGspfGxlKG5vfHhpKXxsZyggZ3xcXC8oa3xsfHUpfDUwfDU0fFxcLVthLXddKXxsaWJ3fGx5bnh8bTFcXC13fG0zZ2F8bTUwXFwvfG1hKHRlfHVpfHhvKXxtYygwMXwyMXxjYSl8bVxcLWNyfG1lKHJjfHJpKXxtaShvOHxvYXx0cyl8bW1lZnxtbygwMXwwMnxiaXxkZXxkb3x0KFxcLXwgfG98dil8enopfG10KDUwfHAxfHYgKXxtd2JwfG15d2F8bjEwWzAtMl18bjIwWzItM118bjMwKDB8Mil8bjUwKDB8Mnw1KXxuNygwKDB8MSl8MTApfG5lKChjfG0pXFwtfG9ufHRmfHdmfHdnfHd0KXxub2soNnxpKXxuenBofG8yaW18b3AodGl8d3YpfG9yYW58b3dnMXxwODAwfHBhbihhfGR8dCl8cGR4Z3xwZygxM3xcXC0oWzEtOF18YykpfHBoaWx8cGlyZXxwbChheXx1Yyl8cG5cXC0yfHBvKGNrfHJ0fHNlKXxwcm94fHBzaW98cHRcXC1nfHFhXFwtYXxxYygwN3wxMnwyMXwzMnw2MHxcXC1bMi03XXxpXFwtKXxxdGVrfHIzODB8cjYwMHxyYWtzfHJpbTl8cm8odmV8em8pfHM1NVxcL3xzYShnZXxtYXxtbXxtc3xueXx2YSl8c2MoMDF8aFxcLXxvb3xwXFwtKXxzZGtcXC98c2UoYyhcXC18MHwxKXw0N3xtY3xuZHxyaSl8c2doXFwtfHNoYXJ8c2llKFxcLXxtKXxza1xcLTB8c2woNDV8aWQpfHNtKGFsfGFyfGIzfGl0fHQ1KXxzbyhmdHxueSl8c3AoMDF8aFxcLXx2XFwtfHYgKXxzeSgwMXxtYil8dDIoMTh8NTApfHQ2KDAwfDEwfDE4KXx0YShndHxsayl8dGNsXFwtfHRkZ1xcLXx0ZWwoaXxtKXx0aW1cXC18dFxcLW1vfHRvKHBsfHNoKXx0cyg3MHxtXFwtfG0zfG01KXx0eFxcLTl8dXAoXFwuYnxnMXxzaSl8dXRzdHx2NDAwfHY3NTB8dmVyaXx2aShyZ3x0ZSl8dmsoNDB8NVswLTNdfFxcLXYpfHZtNDB8dm9kYXx2dWxjfHZ4KDUyfDUzfDYwfDYxfDcwfDgwfDgxfDgzfDg1fDk4KXx3M2MoXFwtfCApfHdlYmN8d2hpdHx3aShnIHxuY3xudyl8d21sYnx3b251fHg3MDB8eWFzXFwtfHlvdXJ8emV0b3x6dGVcXC0vaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQuc3Vic3RyKDAsIDQpKSkge1xuICAgICAgICBpc01vYmlsZSA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlzTW9iaWxlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBOb3RVc2VkS2V5KGNvZGU6IHN0cmluZykge1xuICAgIHJldHVybiB0eXBlb2YgVXNlZENvZGVMaXN0W2NvZGVdID09PSAndW5kZWZpbmVkJztcbn1cbiIsImltcG9ydCB7XG4gICAgRGlyZWN0aXZlLFxuICAgIEVsZW1lbnRSZWYsXG4gICAgRXZlbnRFbWl0dGVyLFxuICAgIEhvc3RCaW5kaW5nLFxuICAgIEhvc3RMaXN0ZW5lcixcbiAgICBJbnB1dCxcbiAgICBPbkNoYW5nZXMsXG4gICAgT25EZXN0cm95LFxuICAgIE9uSW5pdCxcbiAgICBPdXRwdXQsXG4gICAgU2ltcGxlQ2hhbmdlc1xufSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHtJc01vYmlsZU9yVGFibGV0fSBmcm9tIFwiLi4vdXRpbHMvdXRpbHNcIjtcblxuQERpcmVjdGl2ZSh7XG4gICAgc2VsZWN0b3I6ICdbbmdEcm9wZG93bl0nXG59KVxuZXhwb3J0IGNsYXNzIE5nRHJvcGRvd25EaXJlY3RpdmUgaW1wbGVtZW50cyBPbkNoYW5nZXMsIE9uSW5pdCwgT25EZXN0cm95IHtcbiAgICBASW5wdXQoKSBwdWJsaWMgbGlzdDogYW55W10gPSBbXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgYWN0aXZlOiBhbnkgPSBudWxsO1xuXG4gICAgQElucHV0KCkgcHVibGljIGlucHV0OiBFbGVtZW50ID0gbnVsbDtcbiAgICBASW5wdXQoKSBwdWJsaWMgZWxlbWVudDogRWxlbWVudCA9IG51bGw7XG5cbiAgICBASW5wdXQoKSBwdWJsaWMga2V5OiBzdHJpbmcgPSAnJztcbiAgICBASW5wdXQoKSBwdWJsaWMgY29tcGxldGlvbjogYm9vbGVhbiA9IHRydWU7XG5cbiAgICBAT3V0cHV0KCkgcHVibGljIGhvdmVyOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICAgIEBPdXRwdXQoKSBwdWJsaWMgc2VsZWN0ZWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gICAgQE91dHB1dCgpIHB1YmxpYyBjbG9zZWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgICBfb3BlbjogYm9vbGVhbiA9IGZhbHNlO1xuICAgIF9saXN0OiB7IGFjdGl2ZTogYm9vbGVhbiwgW3ZhbHVlOiBzdHJpbmddOiBhbnkgfVtdID0gW107XG4gICAgX2NsYXNzOiBzdHJpbmcgPSAnJztcbiAgICB3aGVlbEhhbmRsZXI6IGFueTtcblxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBfZXJlZjogRWxlbWVudFJlZikge1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuX2NsYXNzID0gYGRyLWl0ZW0tJHt0aGlzLmtleX0tYDtcblxuICAgICAgICBpZiAodGhpcy5SZWZFeGlzdHMoKSkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlEb3duKGV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoIXRoaXMuY29tcGxldGlvbikge1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuX29wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5rZXlEb3duKGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCFJc01vYmlsZU9yVGFibGV0KCkpIHtcbiAgICAgICAgICAgIHRoaXMuX2VyZWYubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLk9uTW91c2VPdmVyKGV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuUHJlcGFyZUxpc3QoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjaGFuZ2VzWydhY3RpdmUnXSAhPT0gJ3VuZGVmaW5lZCcgJiYgIWNoYW5nZXNbJ2FjdGl2ZSddLmZpcnN0Q2hhbmdlKSB7XG4gICAgICAgICAgICB0aGlzLlByZXBhcmVMaXN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBjaGFuZ2VzWydsaXN0J10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmxpc3QgPSBjaGFuZ2VzWydsaXN0J10uY3VycmVudFZhbHVlO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuUHJlcGFyZUxpc3QoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAga2V5RG93bihldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ0Fycm93RG93bic6XG4gICAgICAgICAgICAgICAgdGhpcy5PcGVuKCk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHRoaXMuU2V0QWN0aXZlKHRoaXMuRmluZEFjdGl2ZSgpICsgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5Ecm9wZG93bkZvY3VzQXJlYURvd24oKTtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdBcnJvd1VwJzpcbiAgICAgICAgICAgICAgICB0aGlzLk9wZW4oKTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgdGhpcy5TZXRBY3RpdmUodGhpcy5GaW5kQWN0aXZlKCkgLSAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLkRyb3Bkb3duRm9jdXNBcmVhVXAoKTtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdFbnRlcic6XG4gICAgICAgICAgICAgICAgdGhpcy5FbWl0U2VsZWN0ZWQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLkNsb3NlKG51bGwsIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0VzY2FwZSc6XG4gICAgICAgICAgICAgICAgdGhpcy5DbG9zZShudWxsLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdUYWInOlxuICAgICAgICAgICAgICAgIGlmKCFldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkVtaXRTZWxlY3RlZCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuQ2xvc2UobnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgT25Nb3VzZU92ZXIoZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICAgICAgLy8gTW91c2UgZGlkbid0IGFjdHVhbGx5IG1vdmUsIHNvIG5vIGxvZ2ljIG5lZWRlZC5cbiAgICAgICAgaWYoZXZlbnQubW92ZW1lbnRYID09IDAgJiYgZXZlbnQubW92ZW1lbnRZID09IDApIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBlbDogYW55ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LnNyY0VsZW1lbnQ7XG4gICAgICAgIGlmIChlbC5pZC5sZW5ndGggPiAwICYmIGVsLmlkLmluY2x1ZGVzKHRoaXMuX2NsYXNzKSkge1xuICAgICAgICAgICAgdGhpcy5TZXRBY3RpdmUoTnVtYmVyKGVsLmlkLnNsaWNlKHRoaXMuX2NsYXNzLmxlbmd0aCwgZWwuaWQubGVuZ3RoKSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBFbWl0U2VsZWN0ZWQoKSB7XG4gICAgICAgIGlmKHRoaXMuRmluZEFjdGl2ZSgpID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQuZW1pdCh0aGlzLl9saXN0W3RoaXMuRmluZEFjdGl2ZSgpXS5rZXkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBEcm9wZG93bkZvY3VzQXJlYURvd24oKSB7XG4gICAgICAgIGxldCBzY3JvbGwgPSB0aGlzLl9lcmVmLm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgdGhpcy5fZXJlZi5uYXRpdmVFbGVtZW50LnNjcm9sbFRvcDtcblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgIGlmKCh0aGlzLkdldEVsZW1lbnQodGhpcy5GaW5kQWN0aXZlKCkpLm9mZnNldFRvcCArIHRoaXMuR2V0RWxlbWVudCh0aGlzLkZpbmRBY3RpdmUoKSkub2Zmc2V0SGVpZ2h0KSA+IHNjcm9sbCkge1xuICAgICAgICAgICAgdGhpcy5fZXJlZi5uYXRpdmVFbGVtZW50LnNjcm9sbFRvcCA9IHRoaXMuR2V0RWxlbWVudCh0aGlzLkZpbmRBY3RpdmUoKSkub2Zmc2V0VG9wIC0gKHRoaXMuX2VyZWYubmF0aXZlRWxlbWVudC5vZmZzZXRIZWlnaHQgLSB0aGlzLkdldEVsZW1lbnQodGhpcy5GaW5kQWN0aXZlKCkpLm9mZnNldEhlaWdodClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgRHJvcGRvd25Gb2N1c0FyZWFVcCgpIHtcbiAgICAgICAgbGV0IHNjcm9sbCA9IHRoaXMuX2VyZWYubmF0aXZlRWxlbWVudC5zY3JvbGxUb3A7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICBpZih0aGlzLkdldEVsZW1lbnQodGhpcy5GaW5kQWN0aXZlKCkpLm9mZnNldFRvcCA8IHNjcm9sbCAmJiBzY3JvbGwgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9lcmVmLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsVG9wID0gdGhpcy5HZXRFbGVtZW50KHRoaXMuRmluZEFjdGl2ZSgpKS5vZmZzZXRUb3A7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vXG4gICAgLy8gISBCaW5kaW5ncyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly9cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5vcGVuJylcbiAgICBnZXQgb3BlbmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3BlbjtcbiAgICB9XG5cblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly9cbiAgICAvLyAhIExpc3RlbmVycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vL1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBASG9zdExpc3RlbmVyKCdkb2N1bWVudDpjbGljaycsIFsnJGV2ZW50J10pXG4gICAgQ2xvc2UoZXZlbnQsIGZvcmNlOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICAgICAgaWYoIXRoaXMuX29wZW4pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNsb3NlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fb3BlbiA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVtaXQgTlVMTCBzbyBsaXN0ZW5pbmcgY29tcG9uZW50cyBrbm93IHdoYXQgdG8gZG8uXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuQ2xlYXJBY3RpdmUoKTtcbiAgICAgICAgICAgIHRoaXMuaG92ZXIuZW1pdChudWxsKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VkLmVtaXQoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZm9yY2UpIHtcbiAgICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoKHRoaXMuX29wZW4gJiYgKCF0aGlzLmVsZW1lbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkpKSB7XG4gICAgICAgICAgICBjbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vL1xuICAgIC8vICEgVXRpbHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vXG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIE9wZW4oKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9vcGVuICYmICF0aGlzLl9lcmVmLm5hdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1pbml0aWFsLWVtcHR5JykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLlByZXBhcmVMaXN0KCk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLkZpbmRBY3RpdmUoKSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXJlZi5uYXRpdmVFbGVtZW50LnNjcm9sbFRvcCA9IDA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXJlZi5uYXRpdmVFbGVtZW50LnNjcm9sbFRvcCA9IHRoaXMuR2V0RWxlbWVudCh0aGlzLkZpbmRBY3RpdmUoKSkub2Zmc2V0SGVpZ2h0ICogdGhpcy5GaW5kQWN0aXZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIFJlZkV4aXN0cygpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLmlucHV0ICE9PSAndW5kZWZpbmVkJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIEZpbmRBY3RpdmUoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpc3QucmVkdWNlKChyZXN1bHQsIGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAoaXRlbS5hY3RpdmUpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBpbmRleDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSwgLTEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgU2V0QWN0aXZlKGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgaWYgKGluZGV4ID4gdGhpcy5fbGlzdC5sZW5ndGggLSAxIHx8IGluZGV4IDwgMCkgcmV0dXJuO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5DbGVhckFjdGl2ZSgpO1xuXG4gICAgICAgIHRoaXMuX2xpc3RbaW5kZXhdLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuaG92ZXIuZW1pdCh0aGlzLl9saXN0W2luZGV4XS5rZXkpO1xuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuR2V0RWxlbWVudChpbmRleCkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBHZXRFbGVtZW50KGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VyZWYubmF0aXZlRWxlbWVudC5jaGlsZHJlbltpbmRleF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBDbGVhckFjdGl2ZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fbGlzdC5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgaXRlbS5hY3RpdmUgPSBmYWxzZTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0aGlzLkdldEVsZW1lbnQoaW5kZXgpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIFByZXBhcmVMaXN0KCkge1xuICAgICAgICB0aGlzLl9saXN0ID0gT2JqZWN0LmtleXModGhpcy5saXN0KS5tYXAoKGtleSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgYWN0aXZlOiB0aGlzLkFjdGl2ZUl0ZW0oa2V5KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuUHJlcGFyZUNoaWxkcmVuTGlzdCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgQWN0aXZlSXRlbShpdGVtOiBhbnkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlICE9PSBudWxsICYmIGl0ZW0gPT09IHRoaXMuYWN0aXZlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgRGV0ZXJtaW5lQWN0aXZlQ2xhc3MoKSB7XG4gICAgICAgIHRoaXMuX2xpc3QuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5HZXRFbGVtZW50KGluZGV4KSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5HZXRFbGVtZW50KGluZGV4KS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIGlmIChpdGVtLmFjdGl2ZSlcbiAgICAgICAgICAgICAgICB0aGlzLkdldEVsZW1lbnQoaW5kZXgpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICB9KVxuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBQcmVwYXJlQ2hpbGRyZW5MaXN0KCkge1xuICAgICAgICBjb25zdCBsaXN0ID0gdGhpcy5fZXJlZi5uYXRpdmVFbGVtZW50LmNoaWxkcmVuO1xuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGlzdFtpXS5pZCA9IHRoaXMuX2NsYXNzICsgaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkRldGVybWluZUFjdGl2ZUNsYXNzKCk7XG5cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBEZVJlZmVyZW5jZShvYmplY3Q6IHsgYWN0aXZlOiBib29sZWFuLCBbdmFsdWU6IHN0cmluZ106IGFueSB9KSB7XG4gICAgICAgIGNvbnN0IHtpdGVtfSA9IG9iamVjdDtcblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB7Li4uaXRlbX0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLlJlZkV4aXN0cygpKSB7XG4gICAgICAgICAgICB0aGlzLndoZWVsSGFuZGxlciA9IHRoaXMucmVtb3ZlRXZlbnRMaXN0bmVyLmJpbmQodGhpcy5pbnB1dCk7XG4gICAgICAgICAgICAvLyB0aGlzLmlucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCF0aGlzLmNvbXBsZXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMud2hlZWxIYW5kbGVyID0gdGhpcy5yZW1vdmVFdmVudExpc3RuZXIuYmluZChkb2N1bWVudCk7XG4gICAgICAgICAgICAvLyBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZighSXNNb2JpbGVPclRhYmxldCgpKSB7XG4gICAgICAgICAgICB0aGlzLndoZWVsSGFuZGxlciA9IHRoaXMucmVtb3ZlRXZlbnRMaXN0bmVyLmJpbmQodGhpcy5fZXJlZik7XG4gICAgICAgICAgICAvLyB0aGlzLl9lcmVmLm5hdGl2ZUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW1vdmVFdmVudExpc3RuZXIoZWxlbTogRWxlbWVudCkge1xuICAgICAgICBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy53aGVlbEhhbmRsZXIsIHRydWUpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7ZGVib3VuY2VUaW1lfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQge0NvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgTmdab25lLCBPbkluaXQsIE91dHB1dCwgVmlld0NoaWxkfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7QXV0b2NvbXBsZXRlR3JvdXB9IGZyb20gJy4uL2NsYXNzZXMvQXV0b2NvbXBsZXRlR3JvdXAnO1xuaW1wb3J0IHtcbiAgICBBdXRvY29tcGxldGVJdGVtLFxuICAgIENvbXBhcmFibGVBdXRvQ29tcGxldGVTdHJpbmcsXG4gICAgU2VhcmNoYWJsZUF1dG9Db21wbGV0ZVN0cmluZyxcbiAgICBTdHJpcHBlZEF1dG9jb21wbGV0ZUdyb3VwXG59IGZyb20gJy4uL2NsYXNzZXMvQXV0b2NvbXBsZXRlSXRlbSc7XG5pbXBvcnQge05nRHJvcGRvd25EaXJlY3RpdmV9IGZyb20gJy4uL2Ryb3Bkb3duL25nLWRyb3Bkb3duLmRpcmVjdGl2ZSc7XG5pbXBvcnQge0dyb3VwTm9SZXN1bHR9IGZyb20gJy4uL3V0aWxzL3V0aWxzJztcbmltcG9ydCB7U3ViamVjdH0gZnJvbSAncnhqcyc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnbmctY29tcGxldGVyJyxcbiAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8ZGl2ICNlbGVtZW50IGNsYXNzPVwibmctYXV0b2NvbXBsZXRlLWRyb3Bkb3duXCJcbiAgICAgICAgICAgICBbbmdDbGFzc109XCJ7J29wZW4nOiBkcm9wZG93bi5fb3BlbiwgJ2lzLWxvYWRpbmcnOiBfRE9NLmlzTG9hZGluZywgJ2lzLWFzeW5jJzogZ3JvdXAuYXN5bmMgIT09IG51bGx9XCI+XG5cbiAgICAgICAgICAgIDwhLS1HUk9VUDoge3tncm91cC5rZXl9fS0tPlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibmctYXV0b2NvbXBsZXRlLWlucHV0c1wiIChjbGljayk9XCJSZWdpc3RlckNsaWNrKClcIlxuICAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJ7J2NvbXBsZXRpb24tb2ZmJzogIWdyb3VwLmNvbXBsZXRpb259XCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJuZy1hdXRvY29tcGxldGUtcGxhY2Vob2xkZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICpuZ0lmPVwiX0RPTS5wbGFjZWhvbGRlclwiPlxuICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImdyb3VwLnBsYWNlaG9sZGVyVmFsdWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgKm5nVGVtcGxhdGVPdXRsZXQ9XCJncm91cC5wbGFjZWhvbGRlclZhbHVlOyBjb250ZXh0OiB7JGltcGxpY2l0OiBfRE9NLnBsYWNlaG9sZGVyfVwiPjwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCIhZ3JvdXAucGxhY2Vob2xkZXJWYWx1ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgIHt7X0RPTS5wbGFjZWhvbGRlci50aXRsZX19XG4gICAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgI2lucHV0IHR5cGU9XCJ0ZXh0XCIgW3BsYWNlaG9sZGVyXT1cImdyb3VwLnBsYWNlaG9sZGVyXCIgbmFtZT1cImNvbXBsZXRlclwiIFsobmdNb2RlbCldPVwiX2NvbXBsZXRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgIChuZ01vZGVsQ2hhbmdlKT1cIl9jaGFuZ2UubmV4dCgkZXZlbnQpO1wiXG4gICAgICAgICAgICAgICAgICAgICAgIFt2YWx1ZV09XCJfY29tcGxldGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgYXV0b2NvbXBsZXRlPVwib2ZmXCJcbiAgICAgICAgICAgICAgICAgICAgICAgKGNsaWNrKT1cIk9wZW5Ecm9wZG93bigpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgKGZvY3VzKT1cIk9wZW5Ecm9wZG93bigpXCIgY2xhc3M9XCJuZy1hdXRvY29tcGxldGUtaW5wdXRcIj5cblxuICAgICAgICAgICAgICAgIDxzcGFuIFtuZ0NsYXNzXT1cInsnb3Blbic6IGRyb3Bkb3duLl9vcGVufVwiIGNsYXNzPVwibmctYXV0b2NvbXBsZXRlLWRyb3Bkb3duLWljb25cIlxuICAgICAgICAgICAgICAgICAgICAgIChjbGljayk9XCJEcm9wZG93bkFycmF5KClcIj48L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm5nLWRyb3Bkb3duXCIgbmdEcm9wZG93biBbbGlzdF09XCJfaXRlbXNcIiBbZWxlbWVudF09XCJlbGVtZW50XCIgW2lucHV0XT1cImlucHV0XCJcbiAgICAgICAgICAgICAgICAgW25nQ2xhc3NdPVwieydpcy1pbml0aWFsLWVtcHR5JzogX0RPTS5lbXB0eX1cIlxuICAgICAgICAgICAgICAgICBbYWN0aXZlXT1cIl9ET00uc2VsZWN0ZWRcIiBba2V5XT1cImdyb3VwLmtleVwiXG4gICAgICAgICAgICAgICAgIFtjb21wbGV0aW9uXT1cImdyb3VwLmNvbXBsZXRpb25cIlxuICAgICAgICAgICAgICAgICAoaG92ZXIpPVwiT25Ib3ZlckRyb3Bkb3duSXRlbSgkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAgKHNlbGVjdGVkKT1cIlNlbGVjdEl0ZW0oJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgIChjbG9zZWQpPVwiT25JbnB1dEJsdXJyZWQoKVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdiAqbmdJZj1cIl9ET00ubm90Rm91bmQgJiYgZ3JvdXAubm9SZXN1bHRzXCIgY2xhc3M9XCJkcm9wZG93bi1pdGVtIG5vLXJlc3VsdHNcIj5cbiAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImdyb3VwLm5vUmVzdWx0c1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ1RlbXBsYXRlT3V0bGV0PVwiZ3JvdXAubm9SZXN1bHRzOyBjb250ZXh0OiB7JGltcGxpY2l0OiBfY29tcGxldGVyfVwiPjwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRyb3Bkb3duLWl0ZW1cIiAqbmdGb3I9XCJsZXQgaXRlbSBvZiBfaXRlbXMgfCBrZXlzOyBsZXQgaSA9IGluZGV4XCJcbiAgICAgICAgICAgICAgICAgICAgIChjbGljayk9XCJTZWxlY3RJdGVtKF9pdGVtc1tpdGVtXSlcIj5cblxuICAgICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiZ3JvdXAuZHJvcGRvd25WYWx1ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKm5nVGVtcGxhdGVPdXRsZXQ9XCJncm91cC5kcm9wZG93blZhbHVlOyBjb250ZXh0OiB7JGltcGxpY2l0OiBfaXRlbXNbaXRlbV0sIGhpZ2hsaWdodDogX2l0ZW1zW2l0ZW1dLnRpdGxlIHwgaGlnaGxpZ2h0Ol9oaWdobGlnaHR9XCI+PC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiAqbmdJZj1cIiFncm91cC5kcm9wZG93blZhbHVlXCIgW2lubmVySFRNTF09XCJfaXRlbXNbaXRlbV0udGl0bGUgfCBoaWdobGlnaHQ6X2hpZ2hsaWdodFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PmAsXG4gICAgc3R5bGVzOiBbYFxuICAgICAgICAubmctYXV0b2NvbXBsZXRlLWlucHV0cyB7XG4gICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIH1cblxuICAgICAgICAubmctYXV0b2NvbXBsZXRlLWlucHV0cy5jb21wbGV0aW9uLW9mZiB7XG4gICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIH1cblxuICAgICAgICAubmctYXV0b2NvbXBsZXRlLWlucHV0cy5jb21wbGV0aW9uLW9mZiBpbnB1dCB7XG4gICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5uZy1hdXRvY29tcGxldGUtcGxhY2Vob2xkZXIge1xuICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICAgIH1cblxuICAgICAgICAubmctYXV0b2NvbXBsZXRlLWRyb3Bkb3duLWljb24ge1xuXG4gICAgICAgIH1cblxuICAgICAgICAubmctYXV0b2NvbXBsZXRlLWRyb3Bkb3duIC5uZy1kcm9wZG93biB7XG4gICAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICB9XG5cbiAgICAgICAgLm5nLWF1dG9jb21wbGV0ZS1kcm9wZG93biAubmctZHJvcGRvd24uaXMtZW1wdHkge1xuICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5uZy1hdXRvY29tcGxldGUtZHJvcGRvd24gLm5nLWRyb3Bkb3duLm9wZW4ge1xuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIH1cbiAgICBgXVxufSlcbmV4cG9ydCBjbGFzcyBDb21wbGV0ZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICAgIEBWaWV3Q2hpbGQoTmdEcm9wZG93bkRpcmVjdGl2ZSkgcHVibGljIGRyb3Bkb3duOiBOZ0Ryb3Bkb3duRGlyZWN0aXZlO1xuXG4gICAgQE91dHB1dCgpIHB1YmxpYyBjbGVhcmVkOiBFdmVudEVtaXR0ZXI8c3RyaW5nPiA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuICAgIEBPdXRwdXQoKSBwdWJsaWMgc2VsZWN0ZWQ6IEV2ZW50RW1pdHRlcjxTdHJpcHBlZEF1dG9jb21wbGV0ZUdyb3VwPiA9IG5ldyBFdmVudEVtaXR0ZXI8U3RyaXBwZWRBdXRvY29tcGxldGVHcm91cD4oKTtcbiAgICBAT3V0cHV0KCduby1yZXN1bHQnKSBwdWJsaWMgbm9SZXN1bHQ6IEV2ZW50RW1pdHRlcjxHcm91cE5vUmVzdWx0PiA9IG5ldyBFdmVudEVtaXR0ZXI8R3JvdXBOb1Jlc3VsdD4oKTtcblxuICAgIEBJbnB1dCgpIHB1YmxpYyBncm91cDogQXV0b2NvbXBsZXRlR3JvdXAgPSA8QXV0b2NvbXBsZXRlR3JvdXA+e307XG5cbiAgICBfY2hhbmdlOiBTdWJqZWN0PHN0cmluZz4gPSBuZXcgU3ViamVjdDxzdHJpbmc+KCk7XG4gICAgX2l0ZW1zOiB7IFt2YWx1ZTogc3RyaW5nXTogQXV0b2NvbXBsZXRlSXRlbSB9ID0ge307XG4gICAgX2NvbXBsZXRlcjogc3RyaW5nID0gJyc7XG4gICAgX2hpZ2hsaWdodDogc3RyaW5nID0gJyc7XG5cbiAgICBfRE9NID0ge1xuICAgICAgICBub3RGb3VuZDogPGJvb2xlYW4+ZmFsc2UsXG4gICAgICAgIGVtcHR5OiA8Ym9vbGVhbj5mYWxzZSxcbiAgICAgICAgcGxhY2Vob2xkZXI6IDxBdXRvY29tcGxldGVJdGVtPm51bGwsXG4gICAgICAgIHNlbGVjdGVkOiA8c3RyaW5nPicnLFxuICAgICAgICBpc0xvYWRpbmc6IDxib29sZWFuPmZhbHNlXG5cbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfem9uZTogTmdab25lKSB7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5fem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG5cbiAgICAgICAgICAgIHRoaXMuX2NoYW5nZS5waXBlKFxuICAgICAgICAgICAgICAgIGRlYm91bmNlVGltZSgzMDApKVxuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUoKHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fem9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXAuYXN5bmMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlJ1bkFzeW5jRnVuY3Rpb24odmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLk9uTW9kZWxDaGFuZ2UodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLlNldEl0ZW1zKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT25seSB1c2VkIHdoZW4gY29tcGxldGlvbiBpcyBvZmYuXG4gICAgICovXG4gICAgUmVnaXN0ZXJDbGljaygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmdyb3VwLmNvbXBsZXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuU3dpdGNoRHJvcGRvd25TdGF0ZSgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIERyb3Bkb3duQXJyYXkoKSB7XG4gICAgICAgIGlmICh0aGlzLmdyb3VwLmNvbXBsZXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuU3dpdGNoRHJvcGRvd25TdGF0ZSgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIFN3aXRjaERyb3Bkb3duU3RhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLmRyb3Bkb3duLl9vcGVuKSB7XG4gICAgICAgICAgICB0aGlzLkNsb3NlRHJvcGRvd24oKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5PcGVuRHJvcGRvd24oKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgQ2xvc2VEcm9wZG93bigpIHtcbiAgICAgICAgdGhpcy5kcm9wZG93bi5fb3BlbiA9IGZhbHNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fRE9NLnBsYWNlaG9sZGVyID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIE9wZW5Ecm9wZG93bigpIHtcbiAgICAgICAgdGhpcy5kcm9wZG93bi5PcGVuKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9ET00ucGxhY2Vob2xkZXIgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgU2V0SXRlbXMoKSB7XG4gICAgICAgIHRoaXMuX2l0ZW1zID0gdGhpcy5ncm91cC52YWx1ZTtcbiAgICAgICAgdGhpcy5Jc0luaXRpYWxFbXB0eSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgU2VsZWN0SXRlbShpdGVtOiBBdXRvY29tcGxldGVJdGVtIHwgc3RyaW5nKSB7XG4gICAgICAgIGxldCBpOiBBdXRvY29tcGxldGVJdGVtO1xuICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpID0gdGhpcy5faXRlbXNbaXRlbV07XG4gICAgICAgICAgICB0aGlzLl9ET00uc2VsZWN0ZWQgPSBpdGVtO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaSA9IGl0ZW07XG4gICAgICAgICAgICB0aGlzLl9ET00uc2VsZWN0ZWQgPSBTZWFyY2hhYmxlQXV0b0NvbXBsZXRlU3RyaW5nKGl0ZW0udGl0bGUsIGl0ZW0uaWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fY29tcGxldGVyID0gaS50aXRsZTtcbiAgICAgICAgdGhpcy5faGlnaGxpZ2h0ID0gJyc7XG5cbiAgICAgICAgdGhpcy5kcm9wZG93bi5DbG9zZShudWxsLCB0cnVlKTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZC5lbWl0KHtncm91cDoge2tleTogdGhpcy5ncm91cC5rZXl9LCBpdGVtOiBpfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyBSdW5Bc3luY0Z1bmN0aW9uKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5fY29tcGxldGVyID0gdmFsdWU7XG4gICAgICAgIHRoaXMuX2hpZ2hsaWdodCA9IHZhbHVlO1xuXG4gICAgICAgIHRoaXMuX0RPTS5zZWxlY3RlZCA9IG51bGw7XG5cbiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5ncm91cC5Jbml0aWFsVmFsdWUoKTtcbiAgICAgICAgICAgIHRoaXMuQ2xlYXJNb2RlbCgpO1xuXG4gICAgICAgICAgICB0aGlzLmRyb3Bkb3duLkNsb3NlKCcnLCB0cnVlKVxuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLmxlbmd0aCA+IHRoaXMuZ3JvdXAuc2VhcmNoTGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLl9ET00uaXNMb2FkaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgbGV0IHZhbHVlcyA9IGF3YWl0IHRoaXMuZ3JvdXAuYXN5bmModmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5ncm91cC5TZXROZXdWYWx1ZSh2YWx1ZXMsIHRoaXMuZ3JvdXAua2V5cy50aXRsZUtleSk7XG5cbiAgICAgICAgICAgIHRoaXMuX0RPTS5pc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgdGhpcy5faXRlbXMgPSB0aGlzLmdyb3VwLnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5FbXB0eVNlYXJjaCh0aGlzLl9pdGVtcywgdmFsdWUpO1xuXG4gICAgICAgICAgICAvLyBVc2VyIGhhcyB0eXBlZCBzb21ldGhpbmcgbm93LCByZXN1bHRzIGNvdWxkIGJlIHNob3duLiBXZSBuZWVkIHRvIHJlbW92ZSB0aGUgXCJpcy1pbml0aWFsLWVtcHR5XCIgY2xhc3MuXG4gICAgICAgICAgICB0aGlzLklzSW5pdGlhbEVtcHR5KCk7XG4gICAgICAgICAgICB0aGlzLmRyb3Bkb3duLk9wZW4oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgT25Nb2RlbENoYW5nZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX2NvbXBsZXRlciA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9oaWdobGlnaHQgPSB2YWx1ZTtcblxuICAgICAgICB0aGlzLl9ET00uc2VsZWN0ZWQgPSBudWxsO1xuXG4gICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuQ2xlYXJNb2RlbCgpO1xuXG4gICAgICAgICAgICB0aGlzLmRyb3Bkb3duLkNsb3NlKCcnLCB0cnVlKVxuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLmxlbmd0aCA+IHRoaXMuZ3JvdXAuc2VhcmNoTGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLkNvbXBhcmVJdGVtc0FuZFNldCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIENsZWFyTW9kZWwoKSB7XG4gICAgICAgIHRoaXMuX0RPTS5zZWxlY3RlZCA9IG51bGw7XG4gICAgICAgIHRoaXMuX0RPTS5ub3RGb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuY2xlYXJlZC5lbWl0KHRoaXMuZ3JvdXAua2V5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIENvbXBhcmVJdGVtc0FuZFNldCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5ncm91cC52YWx1ZSkge1xuICAgICAgICAgICAgaWYgKENvbXBhcmFibGVBdXRvQ29tcGxldGVTdHJpbmcoa2V5KS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsdWUudG9Mb3dlckNhc2UoKSkgPiAtMSkge1xuICAgICAgICAgICAgICAgIG9ialtrZXldID0gdGhpcy5ncm91cC52YWx1ZVtrZXldXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9pdGVtcyA9IG9iajtcbiAgICAgICAgdGhpcy5FbXB0eVNlYXJjaCh0aGlzLl9pdGVtcywgdmFsdWUpO1xuXG4gICAgICAgIC8vIFVzZXIgaGFzIHR5cGVkIHNvbWV0aGluZyBub3csIHJlc3VsdHMgY291bGQgYmUgc2hvd24uIFdlIG5lZWQgdG8gcmVtb3ZlIHRoZSBcImlzLWluaXRpYWwtZW1wdHlcIiBjbGFzcy5cbiAgICAgICAgdGhpcy5Jc0luaXRpYWxFbXB0eSgpO1xuICAgICAgICB0aGlzLmRyb3Bkb3duLk9wZW4oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIE9uSW5wdXRCbHVycmVkKCkge1xuICAgICAgICBpZiAoIXRoaXMuSGFzQ2hvc2VuVmFsdWUoKSkge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBMZXQgY29tcG9uZW50IGtub3cgY29tcGxldGVyIGlucHV0IGhhcyBiZWVuIGNsZWFyZWQgLVxuICAgICAgICAgICAgICogdGhpcyBmdW5jdGlvbiBzaG93cyB0aGUgbGlzdCBhZ2FpbiwgYWxzbyByZXNldHMgY2hpbGRyZW4sIGlmIGNob3Nlbi5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5Pbk1vZGVsQ2hhbmdlKCcnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgT25Ib3ZlckRyb3Bkb3duSXRlbShpdGVtOiBBdXRvY29tcGxldGVJdGVtIHwgc3RyaW5nKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhpcy5fRE9NLnBsYWNlaG9sZGVyID0gdGhpcy5faXRlbXNbaXRlbV07XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW0gPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5fRE9NLnBsYWNlaG9sZGVyID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX0RPTS5wbGFjZWhvbGRlciA9IGl0ZW07XG4gICAgfVxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vL1xuICAgIC8vICEgVXRpbHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vXG5cbiAgICBJc0luaXRpYWxFbXB0eSgpIHtcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuX2l0ZW1zKS5sZW5ndGggPT09IDAgJiYgdGhpcy5fY29tcGxldGVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5fRE9NLmVtcHR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX0RPTS5lbXB0eSA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgSGFzQ2hvc2VuVmFsdWUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ET00uc2VsZWN0ZWQgIT09IG51bGxcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIEVtcHR5U2VhcmNoKG9iajogT2JqZWN0LCBxdWVyeTogc3RyaW5nKSB7XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuX0RPTS5ub3RGb3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9ET00ubm90Rm91bmQgPSB0cnVlO1xuICAgICAgICB0aGlzLm5vUmVzdWx0LmVtaXQoe2dyb3VwOiB7a2V5OiB0aGlzLmdyb3VwLmtleX0sIHF1ZXJ5OiBxdWVyeX0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBDbGVhclZhbHVlKCkge1xuICAgICAgICB0aGlzLl9jb21wbGV0ZXIgPSAnJztcbiAgICAgICAgdGhpcy5fRE9NLnNlbGVjdGVkID0gbnVsbDtcblxuICAgICAgICB0aGlzLmdyb3VwLkluaXRpYWxWYWx1ZSgpO1xuICAgICAgICB0aGlzLklzSW5pdGlhbEVtcHR5KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZWxlY3RlZC5lbWl0KHtncm91cDoge2tleTogdGhpcy5ncm91cC5rZXl9LCBpdGVtOiBudWxsfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICBDb21wb25lbnQsXG4gICAgRWxlbWVudFJlZixcbiAgICBFdmVudEVtaXR0ZXIsXG4gICAgSW5wdXQsXG4gICAgT25Jbml0LFxuICAgIE91dHB1dCxcbiAgICBRdWVyeUxpc3QsXG4gICAgU2ltcGxlQ2hhbmdlcyxcbiAgICBUZW1wbGF0ZVJlZixcbiAgICBWaWV3Q2hpbGQsXG4gICAgVmlld0NoaWxkcmVuXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtBdXRvY29tcGxldGVHcm91cH0gZnJvbSAnLi9jbGFzc2VzL0F1dG9jb21wbGV0ZUdyb3VwJztcbmltcG9ydCB7U2VsZWN0ZWRBdXRvY29tcGxldGVJdGVtfSBmcm9tICcuL2NsYXNzZXMvdHlwaW5nJztcbmltcG9ydCB7Q29tcGxldGVyQ29tcG9uZW50fSBmcm9tICcuL2NvbXBsZXRlci9jb21wbGV0ZXIuY29tcG9uZW50JztcbmltcG9ydCB7R3JvdXBOb1Jlc3VsdCwgUmV0dXJuU3RyaW5nQXJyYXlCeUlEfSBmcm9tICcuL3V0aWxzL3V0aWxzJztcbmltcG9ydCB7U3ViamVjdH0gZnJvbSAncnhqcyc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnbmctYXV0by1jb21wbGV0ZScsXG4gICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPGRpdiAjaW5pdCBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PHNwYW4gY2xhc3M9XCJhZnRlci12aWV3LWluaXRcIj48L3NwYW4+PC9kaXY+XG4gICAgICAgIDxuZy1jb21wbGV0ZXIgW25nQ2xhc3NdPVwiY2xhc3Nlc1wiICpuZ0Zvcj1cImxldCBpdGVtIG9mIGdyb3VwXCIgKGNsZWFyZWQpPVwiSW5wdXRDbGVhcmVkKCRldmVudClcIlxuICAgICAgICAgICAgICAgICAgICAgIChuby1yZXN1bHQpPVwiTm9SZXN1bHQoJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgICAgICAgKHNlbGVjdGVkKT1cIkxpc3RlblRvU2VsZWN0ZWQoJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgICAgICAgW2dyb3VwXT1cIml0ZW1cIj48L25nLWNvbXBsZXRlcj5cbiAgICBgLFxufSlcbmV4cG9ydCBjbGFzcyBOZ0F1dG9Db21wbGV0ZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gICAgQFZpZXdDaGlsZHJlbihDb21wbGV0ZXJDb21wb25lbnQpIHB1YmxpYyBjb21wbGV0ZXJzOiBRdWVyeUxpc3Q8Q29tcGxldGVyQ29tcG9uZW50PjtcbiAgICBAVmlld0NoaWxkKCdpbml0JykgcHVibGljIGluaXQ6IEVsZW1lbnRSZWY7XG5cbiAgICBAT3V0cHV0KCkgcHVibGljIHNlbGVjdGVkOiBFdmVudEVtaXR0ZXI8U2VsZWN0ZWRBdXRvY29tcGxldGVJdGVtPiA9IG5ldyBFdmVudEVtaXR0ZXI8U2VsZWN0ZWRBdXRvY29tcGxldGVJdGVtPigpO1xuICAgIEBPdXRwdXQoJ25vLXJlc3VsdCcpIHB1YmxpYyBub1Jlc3VsdDogRXZlbnRFbWl0dGVyPEdyb3VwTm9SZXN1bHQ+ID0gbmV3IEV2ZW50RW1pdHRlcjxHcm91cE5vUmVzdWx0PigpO1xuXG4gICAgQElucHV0KCkgcHVibGljIGdyb3VwOiBBdXRvY29tcGxldGVHcm91cFtdID0gW107XG4gICAgQElucHV0KCkgcHVibGljIGtleTogc3RyaW5nID0gJyc7XG4gICAgQElucHV0KCkgcHVibGljIGNsYXNzZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICBfdmlld0hhc0JlZW5Jbml0OiBib29sZWFuID0gZmFsc2U7XG4gICAgX3ZpZXdJbml0U3ViamVjdDogU3ViamVjdDxib29sZWFuPiA9IG5ldyBTdWJqZWN0PGJvb2xlYW4+KCk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYpIHtcbiAgICB9XG5cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIG5nT25Jbml0KCkge1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgbmdBZnRlclZpZXdDaGVja2VkKCkge1xuICAgICAgICBpZiAoIXRoaXMuX3ZpZXdIYXNCZWVuSW5pdCkge1xuICAgICAgICAgICAgbGV0IGVsID0gdGhpcy5pbml0Lm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmFmdGVyLXZpZXctaW5pdCcpO1xuXG4gICAgICAgICAgICBpZiAod2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl92aWV3SGFzQmVlbkluaXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuX3ZpZXdJbml0U3ViamVjdC5uZXh0KHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBMaXN0ZW5Ub1NlbGVjdGVkKHNlbGVjdGVkOiBTZWxlY3RlZEF1dG9jb21wbGV0ZUl0ZW0pIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZC5lbWl0KHNlbGVjdGVkKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuU2V0Q2hpbGRyZW4oc2VsZWN0ZWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgTm9SZXN1bHQoZ3JvdXA6IEdyb3VwTm9SZXN1bHQpIHtcbiAgICAgICAgdGhpcy5ub1Jlc3VsdC5lbWl0KGdyb3VwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIElucHV0Q2xlYXJlZChrZXk6IHN0cmluZykge1xuICAgICAgICB0aGlzLmdyb3VwLmZvckVhY2goKGdyb3VwKSA9PiB7XG4gICAgICAgICAgICBpZiAoZ3JvdXAua2V5ID09PSBrZXkgfHwgZ3JvdXAucGFyZW50ID09PSBrZXkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLlJlc2V0SW5wdXQoZ3JvdXAua2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEl0ZW1zIG1heSBoYXZlIGNoYW5nZWQsIG5lZWQgdG8gdGUgcmUtc2V0IGxpc3QgaW4gY29tcGxldGVyIGNvbXBvbmVudHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlRyaWdnZXJDaGFuZ2UoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIFNldENoaWxkcmVuKHNlbGVjdGVkOiBTZWxlY3RlZEF1dG9jb21wbGV0ZUl0ZW0pIHtcbiAgICAgICAgdGhpcy5ncm91cC5mb3JFYWNoKChpdGVtKSA9PiB7XG5cbiAgICAgICAgICAgIGlmIChpdGVtLnBhcmVudCA9PSBzZWxlY3RlZC5ncm91cC5rZXkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLlJlc2V0SW5wdXQoaXRlbS5rZXkpO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQuaXRlbSAhPT0gbnVsbCAmJiB0eXBlb2Ygc2VsZWN0ZWQuaXRlbS5jaGlsZHJlbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5TZXROZXdWYWx1ZShzZWxlY3RlZC5pdGVtLmNoaWxkcmVuLCBzZWxlY3RlZC5ncm91cC5rZXlzLnRpdGxlS2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJdGVtcyBtYXkgaGF2ZSBjaGFuZ2VkLCBuZWVkIHRvIHRlIHJlLXNldCBsaXN0IGluIGNvbXBsZXRlciBjb21wb25lbnRzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5UcmlnZ2VyQ2hhbmdlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBUcmlnZ2VyQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLmNvbXBsZXRlcnMuZm9yRWFjaCgoY29tcGxldGVyKSA9PiB7XG4gICAgICAgICAgICBjb21wbGV0ZXIuU2V0SXRlbXMoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vL1xuICAgIC8vICEgVXRpbHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vXG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIEdldElucHV0KGtleTogc3RyaW5nKTogQ29tcGxldGVyQ29tcG9uZW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGVycy5yZWR1Y2UoKHJlc3VsdCwgY29tcGxldGVyKSA9PiB7XG4gICAgICAgICAgICBpZiAoY29tcGxldGVyLmdyb3VwLmtleSA9PT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gY29tcGxldGVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LCA8Q29tcGxldGVyQ29tcG9uZW50Pnt9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIFN1YnNjcmliZUlucHV0KGtleTogc3RyaW5nLCBmOiAoY29tcGxldGVyOiBDb21wbGV0ZXJDb21wb25lbnQpID0+IHZvaWQpIHtcbiAgICAgICAgaWYgKHRoaXMuX3ZpZXdIYXNCZWVuSW5pdCkge1xuICAgICAgICAgICAgbGV0IGNvbXBsZXRlciA9IHRoaXMuR2V0SW5wdXQoa2V5KTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmKGNvbXBsZXRlcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl92aWV3SW5pdFN1YmplY3Quc3Vic2NyaWJlKChfYm9vbCkgPT4ge1xuICAgICAgICAgICAgbGV0IGNvbXBsZXRlciA9IHRoaXMuR2V0SW5wdXQoa2V5KTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGYoY29tcGxldGVyKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLl92aWV3SW5pdFN1YmplY3QudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBSZXNldElucHV0KGtleTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuU3Vic2NyaWJlSW5wdXQoXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAoY29tcGxldGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29tcGxldGVyLkNsZWFyVmFsdWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIFNldFZhbHVlcyhrZXk6IHN0cmluZywgdmFsdWVzOiB7IGlkPzogc3RyaW5nIHwgbnVtYmVyOyBbdmFsdWU6IHN0cmluZ106IGFueSB9W10pIHtcbiAgICAgICAgdGhpcy5TdWJzY3JpYmVJbnB1dChcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIChjb21wbGV0ZXIpID0+IHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZXIuZ3JvdXAuU2V0VmFsdWVzKHZhbHVlcyk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBJdGVtcyBtYXkgaGF2ZSBjaGFuZ2VkLCBuZWVkIHRvIHRlIHJlLXNldCBsaXN0IGluIGNvbXBsZXRlciBjb21wb25lbnRzLlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHRoaXMuVHJpZ2dlckNoYW5nZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgU2V0VGVtcGxhdGUoa2V5OiBzdHJpbmcsIHR5cGU6ICdub1Jlc3VsdHMnIHwgJ3BsYWNlaG9sZGVyVmFsdWUnIHwgJ2Ryb3Bkb3duVmFsdWUnLCB0ZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55Pikge1xuICAgICAgICB0aGlzLlN1YnNjcmliZUlucHV0KFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgKGNvbXBsZXRlcikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlci5ncm91cFt0eXBlXSA9IHRlbXBsYXRlO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogSXRlbXMgbWF5IGhhdmUgY2hhbmdlZCwgbmVlZCB0byB0ZSByZS1zZXQgbGlzdCBpbiBjb21wbGV0ZXIgY29tcG9uZW50cy5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB0aGlzLlRyaWdnZXJDaGFuZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIFNldEFzeW5jKGtleTogc3RyaW5nLCBwcm9taXNlOiAoc3RyOiBzdHJpbmcpID0+IFByb21pc2U8eyBpZDogc3RyaW5nIHwgbnVtYmVyOyBbdmFsdWU6IHN0cmluZ106IGFueSB9W10+KSB7XG4gICAgICAgIHRoaXMuU3Vic2NyaWJlSW5wdXQoXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAoY29tcGxldGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29tcGxldGVyLmdyb3VwLmFzeW5jID0gcHJvbWlzZTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEl0ZW1zIG1heSBoYXZlIGNoYW5nZWQsIG5lZWQgdG8gdGUgcmUtc2V0IGxpc3QgaW4gY29tcGxldGVyIGNvbXBvbmVudHMuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgdGhpcy5UcmlnZ2VyQ2hhbmdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBTZWxlY3RJdGVtKGtleTogc3RyaW5nLCBpZDogc3RyaW5nIHwgbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuU3Vic2NyaWJlSW5wdXQoXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAoY29tcGxldGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoY29tcGxldGVyLl9pdGVtcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmID0gYF9pZF8ke1N0cmluZyhpZCl9YDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGMgPSBrZXkuc3Vic3RyaW5nKGtleS5pbmRleE9mKGYpLCBrZXkubGVuZ3RoKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZiA9PT0gYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVyLlNlbGVjdEl0ZW0oY29tcGxldGVyLl9pdGVtc1trZXldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBSZW1vdmFibGVWYWx1ZXMoa2V5OiBzdHJpbmcsIGlkczogeyBpZDogc3RyaW5nIHwgbnVtYmVyLCBbdmFsdWU6IHN0cmluZ106IGFueSB9W10pIHtcbiAgICAgICAgdGhpcy5TdWJzY3JpYmVJbnB1dChcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIChjb21wbGV0ZXIpID0+IHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZXIuZ3JvdXAuUmVtb3ZhYmxlcyhSZXR1cm5TdHJpbmdBcnJheUJ5SUQoaWRzKSk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBJdGVtcyBtYXkgaGF2ZSBjaGFuZ2VkLCBuZWVkIHRvIHRlIHJlLXNldCBsaXN0IGluIGNvbXBsZXRlciBjb21wb25lbnRzLlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHRoaXMuVHJpZ2dlckNoYW5nZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgUmVzZXRJbnB1dHMoKSB7XG4gICAgICAgIHRoaXMuZ3JvdXAuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5SZXNldElucHV0KGl0ZW0ua2V5KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vL1xuICAgIC8vICEgU3RhdGljICh1dGlscykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vXG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIHN0YXRpYyBGaW5kQ29tcGxldGVyKGtleTogc3RyaW5nLCBsaXN0OiBRdWVyeUxpc3Q8TmdBdXRvQ29tcGxldGVDb21wb25lbnQ+KTogTmdBdXRvQ29tcGxldGVDb21wb25lbnQge1xuICAgICAgICBjb25zdCBjb21wbGV0ZXIgPSBsaXN0LmZpbHRlcigoY29tcGxldGVyOiBOZ0F1dG9Db21wbGV0ZUNvbXBvbmVudCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGtleSA9PT0gY29tcGxldGVyLmtleTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjb21wbGV0ZXJbMF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gY29tcGxldGVyWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtQaXBlLCBQaXBlVHJhbnNmb3JtfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuXG5AUGlwZSh7XG4gICAgbmFtZTogJ2hpZ2hsaWdodCdcbn0pXG5leHBvcnQgY2xhc3MgSGlnaGxpZ2h0UGlwZSBpbXBsZW1lbnRzIFBpcGVUcmFuc2Zvcm0ge1xuICAgIHRyYW5zZm9ybSh0ZXh0OiBzdHJpbmcsIHNlYXJjaDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZWFyY2ggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gdGV4dFxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHBhdHRlcm4gPSBzZWFyY2gucmVwbGFjZSgvW1xcLVxcW1xcXVxcL3t9KCkqKz8uXFxcXF4kfF0vZywgJ1xcXFwkJicpO1xuICAgICAgICBwYXR0ZXJuID0gcGF0dGVybi5zcGxpdCgnICcpLmZpbHRlcigodCkgPT4gdC5sZW5ndGggPiAwKS5qb2luKCd8Jyk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICByZXR1cm4gdGV4dC5yZXBsYWNlKG5ldyBSZWdFeHAocGF0dGVybiwgJ2dpJyksIChtYXRjaCkgPT4gYDxzcGFuIGNsYXNzPVwiZHJvcGRvd24taXRlbS1oaWdobGlnaHRcIj4ke21hdGNofTwvc3Bhbj5gKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgUGlwZSwgUGlwZVRyYW5zZm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5AUGlwZSh7XG4gICAgbmFtZTogJ2tleXMnXG59KVxuZXhwb3J0IGNsYXNzIEtleVZhbHVlUGlwZSBpbXBsZW1lbnRzIFBpcGVUcmFuc2Zvcm0ge1xuXG4gICAgdHJhbnNmb3JtKHZhbHVlOiBhbnksIGFyZ3M/OiBhbnkpOiBhbnkge1xuICAgICAgICBsZXQga2V5cyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBrZXkgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ga2V5cztcbiAgICB9XG59XG4iLCJpbXBvcnQge05nTW9kdWxlfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7SGlnaGxpZ2h0UGlwZX0gZnJvbSAnLi9oaWdobGlnaHQnO1xuaW1wb3J0IHtLZXlWYWx1ZVBpcGV9IGZyb20gJy4va2V5LXZhbHVlJztcblxuQE5nTW9kdWxlKHtcbiAgICBpbXBvcnRzOiBbXSxcbiAgICBkZWNsYXJhdGlvbnM6IFtIaWdobGlnaHRQaXBlLCBLZXlWYWx1ZVBpcGVdLFxuICAgIGV4cG9ydHM6IFtIaWdobGlnaHRQaXBlLCBLZXlWYWx1ZVBpcGVdLFxufSlcbmV4cG9ydCBjbGFzcyBQaXBlTW9kdWxlIHtcblxuICAgIHN0YXRpYyBmb3JSb290KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmdNb2R1bGU6IFBpcGVNb2R1bGUsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtdLFxuICAgICAgICB9O1xuICAgIH1cbn1cbiIsImltcG9ydCB7TmdNb2R1bGV9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtOZ0F1dG9Db21wbGV0ZUNvbXBvbmVudH0gZnJvbSAnLi9uZy1hdXRvLWNvbXBsZXRlLmNvbXBvbmVudCc7XG5pbXBvcnQge0NvbW1vbk1vZHVsZX0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7Rm9ybXNNb2R1bGV9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7Q29tcGxldGVyQ29tcG9uZW50fSBmcm9tICcuL2NvbXBsZXRlci9jb21wbGV0ZXIuY29tcG9uZW50JztcbmltcG9ydCB7TmdEcm9wZG93bkRpcmVjdGl2ZX0gZnJvbSAnLi9kcm9wZG93bi9uZy1kcm9wZG93bi5kaXJlY3RpdmUnO1xuaW1wb3J0IHtQaXBlTW9kdWxlfSBmcm9tICcuL3BpcGVzL3BpcGVzLm1vZHVsZSc7XG5cbkBOZ01vZHVsZSh7XG4gICAgaW1wb3J0czogW1xuICAgICAgICBDb21tb25Nb2R1bGUsXG4gICAgICAgIEZvcm1zTW9kdWxlLFxuICAgICAgICBQaXBlTW9kdWxlLmZvclJvb3QoKVxuICAgIF0sXG4gICAgZXhwb3J0czogW1xuICAgICAgICBOZ0F1dG9Db21wbGV0ZUNvbXBvbmVudCxcbiAgICAgICAgQ29tcGxldGVyQ29tcG9uZW50LFxuICAgIF0sXG4gICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgIE5nQXV0b0NvbXBsZXRlQ29tcG9uZW50LFxuICAgICAgICBDb21wbGV0ZXJDb21wb25lbnQsXG4gICAgICAgIE5nRHJvcGRvd25EaXJlY3RpdmVcbiAgICBdXG59KVxuZXhwb3J0IGNsYXNzIE5nQXV0b0NvbXBsZXRlTW9kdWxlIHtcbn1cbiIsImltcG9ydCB7IEF1dG9jb21wbGV0ZUl0ZW0sIFNlYXJjaGFibGVBdXRvQ29tcGxldGVJdGVtcyB9IGZyb20gJy4vQXV0b2NvbXBsZXRlSXRlbSc7XG5pbXBvcnQgeyBUZW1wbGF0ZVJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5leHBvcnQgY2xhc3MgQXV0b2NvbXBsZXRlR3JvdXAge1xuICAgIGluaXRpYWxWYWx1ZTogeyBbdmFsdWU6IHN0cmluZ106IEF1dG9jb21wbGV0ZUl0ZW0gfTtcblxuICAgIGtleTogc3RyaW5nO1xuICAgIGtleXM6IHsgdGl0bGVLZXk6IHN0cmluZywgY2hpbGRyZW5LZXk6IHN0cmluZyB8IG51bGwgfTtcbiAgICB2YWx1ZTogeyBbdmFsdWU6IHN0cmluZ106IEF1dG9jb21wbGV0ZUl0ZW0gfTtcbiAgICByZW1vdmU6IHN0cmluZ1tdO1xuICAgIHBsYWNlaG9sZGVyOiBzdHJpbmc7XG4gICAgcGFyZW50OiBzdHJpbmc7XG4gICAgY29tcGxldGlvbjogYm9vbGVhbjtcbiAgICBzZWFyY2hMZW5ndGg6IG51bWJlcjtcbiAgICBhc3luYzogKHN0cjogc3RyaW5nKSA9PiBQcm9taXNlPHsgaWQ6IHN0cmluZyB8IG51bWJlcjsgW3ZhbHVlOiBzdHJpbmddOiBhbnkgfVtdPiA9IG51bGw7XG5cbiAgICAvLyBUZW1wbGF0ZXNcbiAgICBub1Jlc3VsdHM6IFRlbXBsYXRlUmVmPGFueT47XG4gICAgZHJvcGRvd25WYWx1ZTogVGVtcGxhdGVSZWY8YW55PjtcbiAgICBwbGFjZWhvbGRlclZhbHVlOiBUZW1wbGF0ZVJlZjxhbnk+O1xuXG4gICAgcHJpdmF0ZSByZW1vdmFsczogc3RyaW5nW10gPSBbXTtcbiAgICBwcml2YXRlIF9jb3B5OiB7IFt2YWx1ZTogc3RyaW5nXTogQXV0b2NvbXBsZXRlSXRlbSB9O1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBTZXROZXdWYWx1ZSh2YWx1ZTogeyBpZDogc3RyaW5nIHwgbnVtYmVyOyBbdmFsdWU6IHN0cmluZ106IGFueSB9W10sIHRpdGxlS2V5OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgdmFsdWVzID0gU2VhcmNoYWJsZUF1dG9Db21wbGV0ZUl0ZW1zKHZhbHVlLCB0aXRsZUtleSk7XG4gICAgICAgIHRoaXMuU2V0Q29weSh2YWx1ZXMpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuRmlsdGVyUmVtb3ZhbHModGhpcy5yZW1vdmFscywgdmFsdWVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIFJlbW92YWJsZXMoaWRzOiBzdHJpbmdbXSkge1xuICAgICAgICB0aGlzLnJlbW92YWxzID0gaWRzO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuRmlsdGVyUmVtb3ZhbHModGhpcy5yZW1vdmFscywgdGhpcy5fY29weSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBJbml0aWFsVmFsdWUoKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLkZpbHRlclJlbW92YWxzKHRoaXMucmVtb3ZhbHMsIHRoaXMuaW5pdGlhbFZhbHVlKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuU2V0Q29weSh0aGlzLmluaXRpYWxWYWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBTZXRDb3B5KHZhbHVlczogeyBbdmFsdWU6IHN0cmluZ106IEF1dG9jb21wbGV0ZUl0ZW0gfSkge1xuICAgICAgICB0aGlzLl9jb3B5ID0gT2JqZWN0LmFzc2lnbihbXSwgdmFsdWVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIFNldFZhbHVlcyh2YWx1ZTogeyBpZD86IHN0cmluZyB8IG51bWJlcjsgW3ZhbHVlOiBzdHJpbmddOiBhbnkgfVtdKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBTZWFyY2hhYmxlQXV0b0NvbXBsZXRlSXRlbXModmFsdWUsIHRoaXMua2V5cy50aXRsZUtleSwgdGhpcy5rZXlzLmNoaWxkcmVuS2V5KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5pdGlhbFZhbHVlID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy52YWx1ZSk7XG4gICAgICAgIHRoaXMuU2V0Q29weShPYmplY3QuYXNzaWduKHt9LCB0aGlzLnZhbHVlKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBGaWx0ZXJSZW1vdmFscyhyZW1vdmFsczogYW55W10sIHZhbHVlOiB7IFt2YWx1ZTogc3RyaW5nXTogQXV0b2NvbXBsZXRlSXRlbSB9KTogeyBbdmFsdWU6IHN0cmluZ106IEF1dG9jb21wbGV0ZUl0ZW0gfSB7XG4gICAgICAgIGxldCBmaWx0ZXJlZCA9IE9iamVjdC5hc3NpZ24oe30sIHZhbHVlKTtcblxuICAgICAgICBsZXQga2V5LCBrZXlzID0gW107XG4gICAgICAgIGZvciAoa2V5IGluIGZpbHRlcmVkKSB7XG4gICAgICAgICAgICBpZiAoZmlsdGVyZWQuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgIHJlbW92YWxzLmZvckVhY2goKGlkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENvbXBhcmFibGUgc3RyaW5nIGFuZCBJRFxuICAgICAgICAgICAgICAgICAgICBsZXQgZiA9IGBfaWRfJHtTdHJpbmcoaWQpfWA7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjID0ga2V5LnN1YnN0cmluZyhrZXkuaW5kZXhPZihmKSwga2V5Lmxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGYgPT09IGMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGtleXMuZm9yRWFjaCgoaykgPT4ge1xuICAgICAgICAgICAgZGVsZXRlIGZpbHRlcmVkW2tdO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZmlsdGVyZWQ7XG4gICAgfVxufVxuXG4vKipcbiAqXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBDcmVhdGVOZXdBdXRvY29tcGxldGVHcm91cDxUPihwbGFjZWhvbGRlcjogc3RyaW5nLCBrZXk6IHN0cmluZywgdmFsdWU6IHsgaWQ/OiBzdHJpbmcgfCBudW1iZXI7IFt2YWx1ZTogc3RyaW5nXTogYW55IH1bXSwga2V5czogeyB0aXRsZUtleTogc3RyaW5nLCBjaGlsZHJlbktleTogc3RyaW5nIHwgbnVsbCB9LCBwYXJlbnQ6IHN0cmluZyA9ICcnLCBjb21wbGV0aW9uOiBib29sZWFuID0gdHJ1ZSwgc2VhcmNoTGVuZ3RoOiBudW1iZXIgPSAyKTogQXV0b2NvbXBsZXRlR3JvdXAge1xuICAgIGNvbnN0IGdyb3VwID0gbmV3IEF1dG9jb21wbGV0ZUdyb3VwKCk7XG5cbiAgICBncm91cC5rZXkgPSBrZXk7XG4gICAgZ3JvdXAua2V5cyA9IGtleXM7XG4gICAgZ3JvdXAucGxhY2Vob2xkZXIgPSBwbGFjZWhvbGRlcjtcbiAgICBncm91cC5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgZ3JvdXAuY29tcGxldGlvbiA9IGNvbXBsZXRpb247XG4gICAgZ3JvdXAuc2VhcmNoTGVuZ3RoID0gc2VhcmNoTGVuZ3RoO1xuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBuZWVkZWQsIGlmIHdlIGVtcHR5IHNlYXJjaCBib3ggb3Igd2FudCB0byBjbGVhciBpdCwgaXQgbmVlZHMgdG8gYmUgcmVzZXQuXG4gICAgICogU2V0dGluZyBjb3B5LCB1c2VkIGlmIHVzZXIgd2FudHMgdG8gcmVtb3ZlIHZhbHVlcyAoYnkgaWQuKS4gVGhpcyBfIGxpc3QgZ2V0cyBmaWx0ZXJlZC5cbiAgICAgKi9cbiAgICBncm91cC5TZXRWYWx1ZXModmFsdWUpO1xuXG4gICAgcmV0dXJuIGdyb3VwO1xufVxuIl0sIm5hbWVzIjpbIkV2ZW50RW1pdHRlciIsIkRpcmVjdGl2ZSIsIkVsZW1lbnRSZWYiLCJJbnB1dCIsIk91dHB1dCIsIkhvc3RCaW5kaW5nIiwiSG9zdExpc3RlbmVyIiwiU3ViamVjdCIsImRlYm91bmNlVGltZSIsIkNvbXBvbmVudCIsIk5nWm9uZSIsIlZpZXdDaGlsZCIsIkNoYW5nZURldGVjdG9yUmVmIiwiVmlld0NoaWxkcmVuIiwiUGlwZSIsIk5nTW9kdWxlIiwiQ29tbW9uTW9kdWxlIiwiRm9ybXNNb2R1bGUiXSwibWFwcGluZ3MiOiI7Ozs7OztJQUFBOzs7Ozs7Ozs7Ozs7OztBQWNBLElBZU8sSUFBSSxRQUFRLEdBQUc7UUFDbEIsUUFBUSxHQUFHLE1BQU0sQ0FBQyxNQUFNLElBQUksU0FBUyxRQUFRLENBQUMsQ0FBQztZQUMzQyxLQUFLLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDakQsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDakIsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDO29CQUFFLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7d0JBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNoRjtZQUNELE9BQU8sQ0FBQyxDQUFDO1NBQ1osQ0FBQTtRQUNELE9BQU8sUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDM0MsQ0FBQyxDQUFBO0FBRUQsYUF5QmdCLFNBQVMsQ0FBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxTQUFTO1FBQ3ZELE9BQU8sS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLE9BQU8sQ0FBQyxFQUFFLFVBQVUsT0FBTyxFQUFFLE1BQU07WUFDckQsU0FB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QUM3SixJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQzt3QkFBRSxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDeEMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO3dCQUNULEtBQUssQ0FBQyxDQUFDO3dCQUFDLEtBQUssQ0FBQzs0QkFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDOzRCQUFDLE1BQU07d0JBQzlCLEtBQUssQ0FBQzs0QkFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7NEJBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxDQUFDO3dCQUN4RCxLQUFLLENBQUM7NEJBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDOzRCQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7NEJBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7NEJBQUMsU0FBUzt3QkFDakQsS0FBSyxDQUFDOzRCQUFFLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDOzRCQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7NEJBQUMsU0FBUzt3QkFDakQ7NEJBQ0ksSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFO2dDQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7Z0NBQUMsU0FBUzs2QkFBRTs0QkFDNUcsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUss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